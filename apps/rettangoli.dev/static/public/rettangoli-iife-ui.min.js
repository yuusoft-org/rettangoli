var rettangoli=(()=>{var In=Object.defineProperty;var R=(e,t)=>{for(var r in t)In(e,r,{get:t[r],enumerable:!0})};var Ce=`
  :host([href]) {
    cursor: pointer;
    position: relative;
  }

  :host([href]) a {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1;
  }
`,Ie=({linkElement:e,href:t,newTab:r,rel:s})=>{e.href=t,r?e.target="_blank":e.removeAttribute("target"),s!=null?e.rel=s:r?e.rel="noopener noreferrer":e.removeAttribute("rel")},Oe=({shadowRoot:e,slotElement:t,linkElement:r,href:s,newTab:i,rel:n})=>{if(t.parentNode!==e&&e.appendChild(t),!s)return r&&r.parentNode===e&&e.removeChild(r),null;let a=r||document.createElement("a");return Ie({linkElement:a,href:s,newTab:i,rel:n}),a.parentNode!==e&&e.appendChild(a),a},ft=({shadowRoot:e,childElement:t,linkElement:r,href:s,newTab:i,rel:n})=>{if(!s)return r?(t.parentNode===r&&e.appendChild(t),r.parentNode===e&&e.removeChild(r),null):(t.parentNode!==e&&e.appendChild(t),null);let a=r||document.createElement("a");return Ie({linkElement:a,href:s,newTab:i,rel:n}),t.parentNode!==a&&a.appendChild(t),a.parentNode!==e&&e.appendChild(a),a};var ie=["default","sm","md","lg","xl"],K=()=>ie.reduce((e,t)=>(e[t]={},e),{});var On=/^([1-9]|1[0-2])fg$/,ht=e=>typeof e=="string"&&On.test(e),H=({styleBucket:e,axis:t,dimension:r,fillValue:s,allowFlexGrow:i=!1,lockBounds:n=!0})=>{if(r!==void 0){if(r==="f"){e[t]=s;return}if(i&&ht(r)){e["flex-grow"]=r.slice(0,-2),e["flex-basis"]="0%";return}e[t]=r,n&&(e[`min-${t}`]=r,e[`max-${t}`]=r)}},mt=({style:e,width:t,fillValue:r="var(--width-stretch)",allowFlexGrow:s=!0,flexMinWidth:i="0"})=>{if(t==="f"){e.width=r,e.flexGrow="",e.flexBasis="",e.minWidth="";return}if(s&&ht(t)){e.width="",e.flexGrow=t.slice(0,-2),e.flexBasis="0%",e.minWidth=i;return}if(t!=null){e.width=t,e.flexGrow="",e.flexBasis="",e.minWidth="";return}e.width="",e.flexGrow="",e.flexBasis="",e.minWidth=""};function L(e,...t){let r="";return e.forEach((s,i)=>{r+=s+(t[i]||"")}),r}var Tn=["sm","md","lg","xl"],Tr={mt:"margin-top",mr:"margin-right",mb:"margin-bottom",ml:"margin-left",m:"margin",mh:"margin-left margin-right",mv:"margin-top margin-bottom",pt:"padding-top",pr:"padding-right",pb:"padding-bottom",pl:"padding-left",p:"padding",ph:"padding-left padding-right",pv:"padding-top padding-bottom",g:"gap",gv:"row-gap",gh:"column-gap",bw:"border-width",bwt:"border-top-width",bwr:"border-right-width",bwb:"border-bottom-width",bwl:"border-left-width",bc:"border-color",br:"border-radius",pos:"position",shadow:"box-shadow",cur:"cursor"},pe=Object.keys(Tr),ee=e=>e.concat(Tn.flatMap(t=>e.map(r=>`${t}-${r}`))),Lr={default:void 0,xl:"@media only screen and (max-width: 1280px)",lg:"@media only screen and (max-width: 1024px)",md:"@media only screen and (max-width: 768px)",sm:"@media only screen and (max-width: 640px)"},G=(e,t={},r=null)=>{let s="";for(let[i,n]of Object.entries(Lr)){i!=="default"&&(s+=`${n} {`);for(let[a,l]of Object.entries(e))for(let[p,o]of Object.entries(l)){let c=Tr[a],u=o.startsWith("--")?`var(${o})`:o,d=i==="default"?a:`${i}-${a}`,h=i==="default"?`h-${a}`:`${i}-h-${a}`,f=(m,g=!1)=>{let y=g?`:host([${m}="${p}"]:hover)`:`:host([${m}="${p}"])`;if(r)return r.split(",").map(_=>`${y} ${_.trim()}`).join(", ");let w=t[a];return w?`${y} ${w}`:y};if(c){let g=c.split(" ").map(y=>`${y}: ${u};`).join(" ");s+=`
            ${f(d)}{
              ${g}
            }
            ${f(h,!0)}{
              ${g}
            }
          `}else s+=`
            ${f(d)}{
              ${o}
            }
            ${f(h,!0)}{
              ${o}
            }
          `}i!=="default"&&(s+="}")}return s};function Ln(e){if(e===null||e.includes("/"))return!1;let t=String(e);return/[0-9]$/.test(t)}var Rn=e=>/%$/.test(e),Nn=e=>/^([1-9]|1[0-2])fg$/.test(e),P=e=>{if(e!==void 0)return Nn(e)||Rn(e)?e:Ln(e)?`${e}px`:Object.keys(S).includes(e)?`var(${S[e]})`:e},S={xs:"--spacing-xs",sm:"--spacing-sm",md:"--spacing-md",lg:"--spacing-lg",xl:"--spacing-xl"};function te(e,t=":host"){let r="",s=["default","xl","lg","md","sm"];for(let i of s){let n=Lr[i];if(!e[i]||Object.keys(e[i]).length===0)continue;i!=="default"&&(r+=`${n} {
`);let a="";for(let[l,p]of Object.entries(e[i]))p!=null&&(a+=`${l}: ${p} !important;
`);r+=`${t} {
    ${a.trim()}
    }
`,i!=="default"&&(r+=`}
`)}return r}var ce=(e,t)=>{if(e===t)return!0;if(e==null||t==null||typeof e!="object"||typeof t!="object")return!1;let r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(let i of r)if(!s.includes(i)||!ce(e[i],t[i]))return!1;return!0};var Pn={mt:S,mr:S,mb:S,ml:S,m:S,mh:S,mv:S,s:{sm:`
    height: 28px;
    padding-left: 12px;
    padding-right: 12px;
    border-radius: 4px;
    font-size: var(--xs-font-size);
    font-weight: var(--xs-font-weight);
    line-height: var(--xs-line-height);
    letter-spacing: var(--xs-letter-spacing);
    gap: var(--spacing-sm);
    `,md:`
    height: 32px;
    padding-left: 16px;
    padding-right: 16px;
    border-radius: 4px;
    font-size: var(--sm-font-size);
    font-weight: var(--sm-font-weight);
    line-height: var(--sm-line-height);
    letter-spacing: var(--sm-letter-spacing);
    gap: var(--spacing-md);
    `,lg:`
    height: 40px;
    padding-left: 20px;
    padding-right: 20px;
    border-radius: 4px;
    font-size: var(--md-font-size);
    font-weight: var(--md-font-weight);
    line-height: var(--md-line-height);
    letter-spacing: var(--md-letter-spacing);
    gap: var(--spacing-md);
    `},v:{pr:`
      background-color: var(--primary);
      color: var(--primary-foreground);
    `,se:`
      background-color: var(--secondary);
      color: var(--secondary-foreground);
    `,de:`
      background-color: var(--destructive);
      color: var(--primary-foreground);
    `,ol:`
      background-color: transparent;
      color: var(--foreground);
      border-width: 1px;
    `,gh:`
      background-color: transparent;
      color: var(--foreground);
    `,lk:`
      background-color: transparent;
      color: var(--foreground);
    `}},Rr=G(Pn,{},".surface");var Vn=[{prefix:"sm",maxWidth:640},{prefix:"md",maxWidth:768},{prefix:"lg",maxWidth:1024},{prefix:"xl",maxWidth:1280}],yt=class e extends HTMLElement{static styleSheet=null;static initializeStyleSheet(){e.styleSheet||(e.styleSheet=new CSSStyleSheet,e.styleSheet.replaceSync(L`
        :host {
          display: inline-flex;
        }
        slot {
          display: contents;
        }

        .surface {
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: center;
          gap: var(--spacing-md);
          border-width: 0px;
          border-style: solid;
          border-color: var(--border);
          padding: 0px;
          height: 32px;
          padding-left: 16px;
          padding-right: 16px;
          border-radius: 4px;

          font-size: var(--sm-font-size);
          font-weight: var(--sm-font-weight);
          line-height: var(--sm-line-height);
          letter-spacing: var(--sm-letter-spacing);

          background-color: var(--primary);
          color: var(--primary-foreground);
          text-decoration: none;
        }

        a.surface,
        a.surface:link,
        a.surface:visited,
        a.surface:hover,
        a.surface:active {
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: center;
          gap: var(--spacing-md);
          border-width: 0px;
          border-style: solid;
          border-color: var(--border);
          height: 32px;
          padding-left: 16px;
          padding-right: 16px;
          border-radius: 4px;
          font-size: var(--sm-font-size);
          font-weight: var(--sm-font-weight);
          line-height: var(--sm-line-height);
          letter-spacing: var(--sm-letter-spacing);
          background-color: var(--primary);
          color: var(--primary-foreground);
          text-decoration: none;
        }

        .surface:hover {
          cursor: pointer;
          background-color: color-mix(
            in srgb,
            var(--primary) 85%,
            white 15%
          );
        }

        :host([disabled]) .surface {
          cursor: not-allowed;
        }

        .surface:active {
          cursor: pointer;
          background-color: color-mix(
            in srgb,
            var(--primary) 80%,
            white 20%
          );
        }

        :host([v="pr"]) .surface:hover {
          background-color: color-mix(
              in srgb,
              var(--primary) 85%,
              white 15%
            );
        }

        :host([v="pr"]) .surface:active {
          background-color: color-mix(
              in srgb,
              var(--primary) 80%,
              white 20%
            );
        }

        :host([v="se"]) .surface:hover {
          background-color: color-mix(
              in srgb,
              var(--secondary) 85%,
              white 15%
            );
        }

        :host([v="se"]) .surface:active {
          background-color: color-mix(
              in srgb,
              var(--secondary) 80%,
              white 20%
            );
        }

        :host([v="de"]) .surface:hover {
          background-color: color-mix(
              in srgb,
              var(--destructive) 85%,
              white 15%
            );
        }

        :host([v="de"]) .surface:active {
          background-color: color-mix(
              in srgb,
              var(--destructive) 80%,
              white 20%
            );
        }

        :host([v="ol"]) .surface:hover {
          background-color: var(--accent);
        }

        :host([v="gh"]) .surface:hover {
          background-color: var(--accent);
        }

        :host([v="lk"]) .surface:hover {
          text-decoration: underline;
        }

        /* Square button styles */
        :host([sq]) .surface {
          width: 32px;
          height: 32px;
          padding: 0;
          gap: 0;
        }

        :host([sq][s="sm"]) .surface {
          width: 24px;
          height: 24px;
          padding: 0;
          gap: 0;
        }

        :host([sq][s="lg"]) .surface {
          width: 40px;
          height: 40px;
          padding: 0;
          gap: 0;
        }

        .surface rtgl-svg {
          color: inherit;
        }

        ${Rr}
      `))}constructor(){super(),e.initializeStyleSheet(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[e.styleSheet],this._containerElement=null,this._surfaceElement=document.createElement("button"),this._slotElement=document.createElement("slot"),this._prefixIcon=null,this._suffixIcon=null,this._surfaceElement.className="surface",this._surfaceElement.appendChild(this._slotElement),this._onWindowResize=this._onWindowResize.bind(this)}static get observedAttributes(){return["key","href","new-tab","rel","w","pre","suf","disabled","v","s","sq","sm-s","md-s","lg-s","xl-s"]}connectedCallback(){window.addEventListener("resize",this._onWindowResize),this._updateButton()}disconnectedCallback(){window.removeEventListener("resize",this._onWindowResize)}attributeChangedCallback(t,r,s){this._updateButton()}_onWindowResize(){(this.hasAttribute("sm-s")||this.hasAttribute("md-s")||this.hasAttribute("lg-s")||this.hasAttribute("xl-s"))&&this._updateIcon()}_resolveResponsiveSizeToken(){let t=window.innerWidth;for(let{prefix:r,maxWidth:s}of Vn){let i=`${r}-s`;if(t<=s&&this.hasAttribute(i))return this.getAttribute(i)}return this.getAttribute("s")}_updateButton(){this.shadow.innerHTML="";let t=this.hasAttribute("disabled"),r=this.getAttribute("href"),s=this.hasAttribute("new-tab"),i=this.getAttribute("rel"),n=r&&!t,a=n?"a":"button";if(this._surfaceElement.tagName.toLowerCase()!==a){let l=document.createElement(a);l.className="surface",l.appendChild(this._slotElement),this._surfaceElement=l}this._updateIcon(),this.hasAttribute("sq")?(this.style.width="",this.style.minWidth="",this.style.maxWidth="",this._surfaceElement.style.width="",this._surfaceElement.style.minWidth="",this._surfaceElement.style.maxWidth=""):this._updateWidth(),n?(Ie({linkElement:this._surfaceElement,href:r,newTab:s,rel:i}),this._surfaceElement.removeAttribute("disabled")):(this._surfaceElement.removeAttribute("href"),this._surfaceElement.removeAttribute("target"),this._surfaceElement.removeAttribute("rel"),t?this._surfaceElement.setAttribute("disabled",""):this._surfaceElement.removeAttribute("disabled")),this.shadow.appendChild(this._surfaceElement),this._containerElement=this._surfaceElement}_updateIcon(){this._prefixIcon&&(this._prefixIcon.remove(),this._prefixIcon=null),this._suffixIcon&&(this._suffixIcon.remove(),this._suffixIcon=null);let t={sm:14,md:18,lg:22},r=this._resolveResponsiveSizeToken(),s=18;this.hasAttribute("sq")?s={sm:14,lg:22}[r]||18:s=t[r]||18;let i=this.getAttribute("pre");i&&(this._prefixIcon=document.createElement("rtgl-svg"),this._prefixIcon.setAttribute("svg",i),this._prefixIcon.setAttribute("wh",s.toString()),this._prefixIcon.style.color="inherit",this._surfaceElement.insertBefore(this._prefixIcon,this._slotElement));let n=this.getAttribute("suf");n&&(this._suffixIcon=document.createElement("rtgl-svg"),this._suffixIcon.setAttribute("svg",n),this._suffixIcon.setAttribute("wh",s.toString()),this._suffixIcon.style.color="inherit",this._surfaceElement.appendChild(this._suffixIcon))}_updateWidth(){let t=P(this.getAttribute("w"));t==="f"?(this.style.width="var(--width-stretch)",this.style.minWidth="",this.style.maxWidth="",this._surfaceElement.style.width="100%",this._surfaceElement.style.minWidth="",this._surfaceElement.style.maxWidth=""):t!=null?(this.style.width=t,this.style.minWidth=t,this.style.maxWidth=t,this._surfaceElement.style.width="100%",this._surfaceElement.style.minWidth="",this._surfaceElement.style.maxWidth=""):(this.style.width="",this.style.minWidth="",this.style.maxWidth="",this._surfaceElement.style.width="",this._surfaceElement.style.minWidth="",this._surfaceElement.style.maxWidth="")}getBoundingClientRect(){return this._surfaceElement?this._surfaceElement.getBoundingClientRect():super.getBoundingClientRect()}},Nr=({render:e,html:t})=>yt;var Pr=L`

  :host([d="h"]) {
    flex-direction: row;
  }
  :host([d="v"]) {
    flex-direction: column;
  }
  :host([d="h"]:not([ah])) {
    justify-content: flex-start;
  }
  :host([d="h"][ah="c"]) {
    justify-content: center;
  }
  :host([d="h"][ah="e"]) {
    justify-content: flex-end;
  }
  :host([d="h"]:not([av])) {
    align-items: flex-start;
  }
  :host([d="h"][av="c"]) {
    align-items: center;
    align-content: center;
  }
  :host([d="h"][av="e"]) {
    align-items: flex-end;
    align-content: flex-end;
  }
  
  /* Default/vertical direction - horizontal alignment */
  :host(:not([d]):not([ah])),
  :host([d="v"]:not([ah])) {
    align-items: flex-start;
  }
  :host(:not([d])[ah="c"]),
  :host([d="v"][ah="c"]) {
    align-items: center;
  }
  :host(:not([d])[ah="e"]),
  :host([d="v"][ah="e"]) {
    align-items: flex-end;
  }
  
  :host(:not([d]):not([av])),
  :host([d="v"]:not([av])) {
    justify-content: flex-start;
  }
  :host(:not([d])[av="c"]),
  :host([d="v"][av="c"]) {
    justify-content: center;
  }
  :host(:not([d])[av="e"]),
  :host([d="v"][av="e"]) {
    justify-content: flex-end;
  }
  
  @media screen and (max-width: 640px) {
    :host([sm-d="v"]) {
      flex-direction: column;
    }
    :host([sm-d="h"]) {
      flex-direction: row;
    }
    :host([sm-d="h"][sm-av="c"]) {
      align-items: center;
      align-content: center;
    }
    :host([sm-d="v"][sm-av="c"]) {
      justify-content: center;
    }
  }
`;var Dn={cur:{alias:"alias","all-scroll":"all-scroll",auto:"auto",cell:"cell","col-resize":"col-resize","context-menu":"context-menu",copy:"copy",crosshair:"crosshair",default:"default","e-resize":"e-resize","ew-resize":"ew-resize",grab:"grab",grabbing:"grabbing",help:"help",move:"move","n-resize":"n-resize","ne-resize":"ne-resize","nesw-resize":"nesw-resize","ns-resize":"ns-resize","nw-resize":"nw-resize","nwse-resize":"nwse-resize","no-drop":"no-drop",none:"none","not-allowed":"not-allowed",pointer:"pointer",progress:"progress","row-resize":"row-resize","s-resize":"s-resize","se-resize":"se-resize","sw-resize":"sw-resize",text:"text",url:"url","w-resize":"w-resize",wait:"wait","zoom-in":"zoom-in","zoom-out":"zoom-out"}},F=G(Dn);var Vr=L`
:host([sh]:not([sv])) {
    overflow-x: scroll;
    flex-wrap: nowrap;
    min-width: 0;
}
:host([sv]:not([sh])) {
    overflow-y: scroll;
    flex-wrap: nowrap;
    min-height: 0;
}
:host([sh][sv]) {
    overflow: scroll;
    flex-wrap: nowrap;
    min-height: 0;
    min-width: 0;
}
:host([sh]),
:host([sv]) {
    -ms-overflow-style: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb, var(--muted-foreground)) var(--scrollbar-track, transparent);
}
:host([sh])::-webkit-scrollbar,
:host([sv])::-webkit-scrollbar {
    width: var(--scrollbar-size, 6px);
    height: var(--scrollbar-size, 6px);
    background: var(--scrollbar-track, transparent);
}
:host([sh])::-webkit-scrollbar-track,
:host([sv])::-webkit-scrollbar-track {
    background: var(--scrollbar-track, transparent);
}
:host([sh])::-webkit-scrollbar-thumb,
:host([sv])::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb, var(--muted-foreground));
    border-radius: 9999px;
}
:host([sh])::-webkit-scrollbar-thumb:hover,
:host([sv])::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover, var(--ring));
}
:host([overflow="hidden"]) {
    overflow: hidden;
    flex-wrap: nowrap;
}

`;var Te={xs:"--border-width-xs",sm:"--border-width-sm",md:"--border-width-md",lg:"--border-width-lg",xl:"--border-width-xl"},jn={bgc:{pr:`
    background-color: var(--primary);
    `,se:`
    background-color: var(--secondary);
    `,de:`
    background-color: var(--destructive);
    `,fg:`
    background-color: var(--foreground);
    `,bg:`
    background-color: var(--background);
    `,mu:`
    background-color: var(--muted);
    `,ac:`
    background-color: var(--accent);
    `,bo:`
    background-color: var(--border);
    `},pos:{rel:"relative",abs:"absolute",fix:"fixed"},edge:{f:`
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        height: 100%;
        `,t:`
        top: 0;
        right: 0;
        left: 0;
        `,r:`
        top: 0;
        right: 0;
        bottom: 0;
        height: 100%;
        `,b:`
        right: 0;
        bottom: 0;
        left: 0;
        `,l:`
        bottom: 0;
        left: 0;
        top: 0;
        height: 100%;
        `},shadow:{sm:"--shadow-sm",md:"--shadow-md",lg:"--shadow-lg"},pt:S,pr:S,pb:S,pl:S,p:S,ph:S,pv:S,g:S,gv:S,gh:S,bw:Te,bwt:Te,bwr:Te,bwb:Te,bwl:Te,bc:{pr:"--primary",se:"--secondary",de:"--destructive",fg:"--foreground",bg:"--background",mu:"--muted",ac:"--accent",bo:"--border",tr:"transparent"},br:{xs:"--border-radius-xs",sm:"--border-radius-sm",md:"--border-radius-md",lg:"--border-radius-lg",xl:"--border-radius-xl",f:"--border-radius-f"}},Dr=G(jn);var Bn={mt:S,mr:S,mb:S,ml:S,m:S,mh:S,mv:S},q=G(Bn);var He=L`
  a, a:link, a:visited, a:hover, a:active {
    color: inherit;
    text-decoration: none;
    background: none;
    border: none;
    padding: 0;
    margin: 0;
    font: inherit;
  }
`;var gt=class e extends HTMLElement{static styleSheet=null;static initializeStyleSheet(){e.styleSheet||(e.styleSheet=new CSSStyleSheet,e.styleSheet.replaceSync(L`
        slot {
          display: contents;
        }
        :host {
          display: flex;
          flex-direction: column;
          align-self: auto;
          align-content: flex-start;
          border-style: solid;
          border-width: 0;
          box-sizing: border-box;
          border-color: var(--border);
        }


        ${Vr}
        ${Pr}
        ${q}
        ${F}
        ${Dr}
        ${He}
        ${Ce}
      `))}constructor(){super(),e.initializeStyleSheet(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[e.styleSheet],this._styleElement=document.createElement("style"),this._slotElement=document.createElement("slot"),this._linkElement=null,this.shadow.appendChild(this._styleElement),this._updateDOM()}static get observedAttributes(){return["href","new-tab","rel",...ee([...pe,"op","wh","w","h","hide","show","sh","sv","z","d","ah","av","wrap","no-wrap","overflow"])]}_styles=K();_lastStyleString="";_updateDOM(){let t=this.getAttribute("href"),r=this.hasAttribute("new-tab"),s=this.getAttribute("rel");this._linkElement=Oe({shadowRoot:this.shadow,slotElement:this._slotElement,linkElement:this._linkElement,href:t,newTab:r,rel:s})}connectedCallback(){this.updateStyles()}updateStyles(){this._styles=K(),ie.forEach(r=>{let s=_=>`${r==="default"?"":`${r}-`}${_}`,i=this.getAttribute(s("wh")),n=P(i===null?this.getAttribute(s("w")):i),a=P(i===null?this.getAttribute(s("h")):i),l=this.getAttribute(s("op")),p=this.getAttribute(s("z"));p!==null&&(this._styles[r]["z-index"]=p),l!==null&&(this._styles[r].opacity=l),H({styleBucket:this._styles[r],axis:"width",dimension:n,fillValue:"var(--width-stretch)",allowFlexGrow:!0}),H({styleBucket:this._styles[r],axis:"height",dimension:a,fillValue:"100%",allowFlexGrow:!0}),this.hasAttribute(s("hide"))&&(this._styles[r].display="none"),this.hasAttribute(s("show"))&&(this._styles[r].display="flex");let o=this.getAttribute(s("d")),c=this.getAttribute(s("ah")),u=this.getAttribute(s("av"));o==="h"?this._styles[r]["flex-direction"]="row":o==="v"?this._styles[r]["flex-direction"]="column":r==="default"&&!o&&["sm","md","lg","xl"].some(A=>this.hasAttribute(`${A}-d`))&&(this._styles[r]["flex-direction"]="column");let d=o==="h",h=o==="v"||!o;d&&(c==="c"?this._styles[r]["justify-content"]="center":c==="e"?this._styles[r]["justify-content"]="flex-end":c==="s"&&(this._styles[r]["justify-content"]="flex-start"),u==="c"?(this._styles[r]["align-items"]="center",this._styles[r]["align-content"]="center"):u==="e"?(this._styles[r]["align-items"]="flex-end",this._styles[r]["align-content"]="flex-end"):u==="s"&&(this._styles[r]["align-items"]="flex-start")),h&&(c!==null||u!==null)&&(c==="c"?this._styles[r]["align-items"]="center":c==="e"?this._styles[r]["align-items"]="flex-end":c==="s"&&(this._styles[r]["align-items"]="flex-start"),u==="c"?this._styles[r]["justify-content"]="center":u==="e"?this._styles[r]["justify-content"]="flex-end":u==="s"&&(this._styles[r]["justify-content"]="flex-start"));let f=this.hasAttribute(s("wrap")),m=this.hasAttribute(s("no-wrap"));f&&(this._styles[r]["flex-wrap"]="wrap"),m&&(this._styles[r]["flex-wrap"]="nowrap");let g=this.hasAttribute(s("sh")),y=this.hasAttribute(s("sv")),w=this.getAttribute(s("overflow"));g&&y?(this._styles[r].overflow="scroll",this._styles[r]["flex-wrap"]="nowrap"):g?(this._styles[r]["overflow-x"]="scroll",this._styles[r]["flex-wrap"]="nowrap"):y&&(this._styles[r]["overflow-y"]="scroll",this._styles[r]["flex-wrap"]="nowrap"),w==="hidden"&&(this._styles[r].overflow="hidden",this._styles[r]["flex-wrap"]="nowrap")});let t=te(this._styles);t!==this._lastStyleString&&(this._styleElement.textContent=t,this._lastStyleString=t)}attributeChangedCallback(t,r,s){if(t==="href"||t==="new-tab"||t==="rel"){this._updateDOM();return}r!==s&&this.updateStyles()}},jr=({render:e,html:t})=>gt;var Wn={ta:{s:"text-align: start;",c:"text-align: center;",e:"text-align: end;",j:"text-align: justify;"},s:{h1:`
      font-size: var(--h1-font-size);
      font-weight: var(--h1-font-weight);
      line-height: var(--h1-line-height);
      letter-spacing: var(--h1-letter-spacing);
    `,h2:`
      font-size: var(--h2-font-size);
      font-weight: var(--h2-font-weight);
      line-height: var(--h2-line-height);
      letter-spacing: var(--h2-letter-spacing);
    `,h3:`
      font-size: var(--h3-font-size);
      font-weight: var(--h3-font-weight);
      line-height: var(--h3-line-height);
      letter-spacing: var(--h3-letter-spacing);
    `,h4:`
      font-size: var(--h4-font-size);
      font-weight: var(--h4-font-weight);
      line-height: var(--h4-line-height);
      letter-spacing: var(--h4-letter-spacing);
    `,lg:`
      font-size: var(--lg-font-size);
      font-weight: var(--lg-font-weight);
      line-height: var(--lg-line-height);
      letter-spacing: var(--lg-letter-spacing);
    `,md:`
      font-size: var(--md-font-size);
      font-weight: var(--md-font-weight);
      line-height: var(--md-line-height);
      letter-spacing: var(--md-letter-spacing);
    `,sm:`
      font-size: var(--sm-font-size);
      font-weight: var(--sm-font-weight);
      line-height: var(--sm-line-height);
      letter-spacing: var(--sm-letter-spacing);
    `,xs:`
      font-size: var(--xs-font-size);
      font-weight: var(--xs-font-weight);
      line-height: var(--xs-line-height);
      letter-spacing: var(--xs-letter-spacing);
    `}},Br=G(Wn);var Mn={c:{pr:"color: var(--primary);",se:"color: var(--secondary);",de:"color: var(--destructive);",fg:"color: var(--foreground);",bg:"color: var(--background);",mu:"color: var(--muted-foreground);",ac:"color: var(--accent);",bo:"color: var(--border);",tr:"color: transparent;","pr-fg":"color: var(--primary-foreground);","se-fg":"color: var(--secondary-foreground);","de-fg":"color: var(--destructive-foreground);","mu-fg":"color: var(--muted-foreground);","ac-fg":"color: var(--accent-foreground);"}},Ge=G(Mn);var vt=class e extends HTMLElement{static styleSheet=null;static initializeStyleSheet(){e.styleSheet||(e.styleSheet=new CSSStyleSheet,e.styleSheet.replaceSync(L`
        :host {
          display: block;
          font-size: var(--md-font-size);
          font-weight: var(--md-font-weight);
          line-height: var(--md-line-height);
          letter-spacing: var(--md-letter-spacing);
        }
        slot {
          display: contents;
        }
        :host ::slotted(a) {
          text-decoration: var(--anchor-text-decoration);
          color: var(--anchor-color);
        }
        :host ::slotted(a:hover) {
          text-decoration: var(--anchor-text-decoration-hover);
          color: var(--anchor-color-hover);
        }
        ${Ce}
        ${Br}
        ${Ge}
        ${q}
        ${F}
      `))}constructor(){super(),e.initializeStyleSheet(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[e.styleSheet],this._slotElement=document.createElement("slot"),this._linkElement=null,this._updateDOM()}static get observedAttributes(){return["key","w","ellipsis","href","new-tab","rel"]}connectedCallback(){this._updateStyling(),this._updateDOM()}attributeChangedCallback(t,r,s){t==="href"||t==="new-tab"||t==="rel"?this._updateDOM():this._updateStyling()}_updateStyling(){let t=P(this.getAttribute("w"));this.hasAttribute("ellipsis")?(this.style.overflow="hidden",this.style.textOverflow="ellipsis",this.style.whiteSpace="nowrap"):(this.style.overflow="",this.style.textOverflow="",this.style.whiteSpace=""),mt({style:this.style,width:t,flexMinWidth:"0"})}_updateDOM(){let t=this.getAttribute("href"),r=this.hasAttribute("new-tab"),s=this.getAttribute("rel");this._linkElement=Oe({shadowRoot:this.shadow,slotElement:this._slotElement,linkElement:this._linkElement,href:t,newTab:r,rel:s})}},Wr=({render:e,html:t})=>vt;var Le={xs:"--border-width-xs",sm:"--border-width-sm",md:"--border-width-md",lg:"--border-width-lg",xl:"--border-width-xl"},zn={bgc:{pr:"background-color: var(--primary);",se:"background-color: var(--secondary);",de:"background-color: var(--destructive);",fg:"background-color: var(--foreground);",bg:"background-color: var(--background);",mu:"background-color: var(--muted);",ac:"background-color: var(--accent);",bo:"background-color: var(--border);"},pos:{rel:"relative",abs:"absolute",fix:"fixed"},shadow:{sm:"--shadow-sm",md:"--shadow-md",lg:"--shadow-lg"},bw:Le,bwt:Le,bwr:Le,bwb:Le,bwl:Le,bc:{pr:"--primary",se:"--secondary",de:"--destructive",fg:"--foreground",bg:"--background",mu:"--muted",ac:"--accent",bo:"--border",tr:"transparent"},br:{xs:"--border-radius-xs",sm:"--border-radius-sm",md:"--border-radius-md",lg:"--border-radius-lg",xl:"--border-radius-xl",f:"--border-radius-f"}},Mr=e=>G(zn,{},e);var Fn={mt:S,mr:S,mb:S,ml:S,m:S,mh:S,mv:S},zr=e=>G(Fn,{},e);var bt=class e extends HTMLElement{static styleSheet=null;static initializeStyleSheet(){e.styleSheet||(e.styleSheet=new CSSStyleSheet,e.styleSheet.replaceSync(L`
        :host {
          display: contents;
        }
        img, a {
          border-style: solid;
          box-sizing: border-box;
          overflow: hidden;
          border-width: 0;
        }
        :host([of="con"]) img {
          object-fit: contain;
        }
        :host([of="cov"]) img {
          object-fit: cover;
        }
        :host([of="none"]) img {
          object-fit: none;
        }
        :host([w]:not([h]):not([wh])) img,
        :host([sm-w]:not([sm-h]):not([sm-wh])) img,
        :host([md-w]:not([md-h]):not([md-wh])) img,
        :host([lg-w]:not([lg-h]):not([lg-wh])) img,
        :host([xl-w]:not([xl-h]):not([xl-wh])) img {
          height: auto;
        }

        ${He}

        a {
          display: block;
          height: 100%;
          width: 100%;
        }

        ${Mr("img, a")}
        ${zr("img, a")}
        ${F}
      `))}constructor(){super(),e.initializeStyleSheet(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[e.styleSheet],this._styleElement=document.createElement("style"),this._imgElement=document.createElement("img"),this._linkElement=null,this.shadow.appendChild(this._styleElement),this._updateDOM()}static get observedAttributes(){return ee([...pe,"key","src","alt","href","new-tab","rel","wh","w","h","hide","show","op","z","of"])}_styles=K();_lastStyleString="";_updateDOM(){let t=this.getAttribute("href"),r=this.hasAttribute("new-tab"),s=this.getAttribute("rel");this._linkElement=ft({shadowRoot:this.shadow,childElement:this._imgElement,linkElement:this._linkElement,href:t,newTab:r,rel:s})}connectedCallback(){this._updateImageAttributes(),this.updateStyles()}attributeChangedCallback(t,r,s){if(t==="href"||t==="new-tab"||t==="rel"){this._updateDOM();return}if(t==="src"||t==="alt"){this._updateImageAttributes();return}r!==s&&this.updateStyles()}updateStyles(){this._styles=K(),ie.forEach(r=>{let s=o=>`${r==="default"?"":`${r}-`}${o}`,i=this.getAttribute(s("wh")),n=P(i===null?this.getAttribute(s("w")):i),a=P(i===null?this.getAttribute(s("h")):i),l=this.getAttribute(s("op")),p=this.getAttribute(s("z"));p!==null&&(this._styles[r]["z-index"]=p),l!==null&&(this._styles[r].opacity=l),H({styleBucket:this._styles[r],axis:"width",dimension:n,fillValue:"var(--width-stretch)"}),H({styleBucket:this._styles[r],axis:"height",dimension:a,fillValue:"100%"}),this.hasAttribute(s("hide"))&&(this._styles[r].display="none !important"),this.hasAttribute(s("show"))&&(this._styles[r].display="block !important")});let t=te(this._styles,"img, a");t!==this._lastStyleString&&(this._styleElement.textContent=t,this._lastStyleString=t)}_updateImageAttributes(){let t=this.getAttribute("src"),r=this.getAttribute("alt");t!==null?this._imgElement.setAttribute("src",t):this._imgElement.removeAttribute("src"),r!==null?this._imgElement.setAttribute("alt",r):this._imgElement.removeAttribute("alt")}},Fr=({render:e,html:t})=>bt;var Ur=L`
:host([pt="xs"]) svg {
  padding-top: var(--spacing-xs);
}
:host([pt="sm"]) svg {
  padding-top: var(--spacing-sm);
}
:host([pt="md"]) svg {
  padding-top: var(--spacing-md);
}
:host([pt="lg"]) svg {
  padding-top: var(--spacing-lg);
}
:host([pt="xl"]) svg {
  padding-top: var(--spacing-xl);
}
:host([pr="xs"]) svg {
  padding-right: var(--spacing-xs);
}
:host([pr="sm"]) svg {
  padding-right: var(--spacing-sm);
}
:host([pr="md"]) svg {
  padding-right: var(--spacing-md);
}
:host([pr="lg"]) svg {
  padding-right: var(--spacing-lg);
}
:host([pr="xl"]) svg {
  padding-right: var(--spacing-xl);
}
:host([pb="xs"]) svg {
  padding-bottom: var(--spacing-xs);
}
:host([pb="sm"]) svg {
  padding-bottom: var(--spacing-sm);
}
:host([pb="md"]) svg {
  padding-bottom: var(--spacing-md);
}
:host([pb="lg"]) svg {
  padding-bottom: var(--spacing-lg);
}
:host([pb="xl"]) svg {
  padding-bottom: var(--spacing-xl);
}
:host([pl="xs"]) svg {
  padding-left: var(--spacing-xs);
}
:host([pl="sm"]) svg {
  padding-left: var(--spacing-sm);
}
:host([pl="md"]) svg {
  padding-left: var(--spacing-md);
}
:host([pl="lg"]) svg {
  padding-left: var(--spacing-lg);
}
:host([pl="xl"]) svg {
  padding-left: var(--spacing-xl);
}
:host([p="xs"]) svg {
  padding: var(--spacing-xs);
}
:host([p="sm"]) svg {
  padding: var(--spacing-sm);
}
:host([p="md"]) svg {
  padding: var(--spacing-md);
}
:host([p="lg"]) svg {
  padding: var(--spacing-lg);
}
:host([p="xl"]) svg {
  padding: var(--spacing-xl);
}
:host([ph="xs"]) svg {
  padding-left: var(--spacing-xs);
  padding-right: var(--spacing-xs);
}
:host([ph="sm"]) svg {
  padding-left: var(--spacing-sm);
  padding-right: var(--spacing-sm);
}
:host([ph="md"]) svg {
  padding-left: var(--spacing-md);
  padding-right: var(--spacing-md);
}
:host([ph="lg"]) svg {
  padding-left: var(--spacing-lg);
  padding-right: var(--spacing-lg);
}
:host([ph="xl"]) svg {
  padding-left: var(--spacing-xl);
  padding-right: var(--spacing-xl);
}
:host([pv="xs"]) svg {
  padding-top: var(--spacing-xs);
  padding-bottom: var(--spacing-xs);
}
:host([pv="sm"]) svg {
  padding-top: var(--spacing-sm);
  padding-bottom: var(--spacing-sm);
}
:host([pv="md"]) svg {
  padding-top: var(--spacing-md);
  padding-bottom: var(--spacing-md);
}
:host([pv="lg"]) svg {
  padding-top: var(--spacing-lg);
  padding-bottom: var(--spacing-lg);
}
:host([pv="xl"]) svg {
  padding-top: var(--spacing-xl);
  padding-bottom: var(--spacing-xl);
}
`;var wt=class e extends HTMLElement{static styleSheet=null;static _icons={};static initializeStyleSheet(){e.styleSheet||(e.styleSheet=new CSSStyleSheet,e.styleSheet.replaceSync(L`
        :host {
          color: var(--foreground);
          flex-shrink: 0;
        }
        ${Ge}
        ${Ur}
        ${q}
        ${F}
      `))}constructor(){super(),e.initializeStyleSheet(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[e.styleSheet]}static get observedAttributes(){return["key","svg","w","h","wh"]}static get icons(){return e._icons}static addIcon(t,r){e._icons[t]=r}connectedCallback(){this._updateSizing(),this._render()}attributeChangedCallback(t,r,s){this._updateSizing(),this._render()}_updateSizing(){let t=this.getAttribute("wh"),r=P(t===null?this.getAttribute("w"):t),s=P(t===null?this.getAttribute("h"):t);r!=null?this.style.width=r:this.style.width="",s!=null?this.style.height=s:this.style.height=""}_render(){try{let t=this.getAttribute("svg"),r=e._icons[t]||(window.rtglIcons||{})[t];if(r){this.shadow.innerHTML=r;return}}catch(t){console.log("error in rtgl-svg render",t)}this.shadow.innerHTML=""}},Kr=({render:e,html:t})=>wt;var Un=["mt","mr","mb","ml","m","mh","mv","cur"],_t=class e extends HTMLElement{static styleSheet=null;static inputSpecificAttributes=["type","disabled","s"];static initializeStyleSheet(){e.styleSheet||(e.styleSheet=new CSSStyleSheet,e.styleSheet.replaceSync(L`
        :host {
          display: contents;
        }
        input {
          background-color: var(--background);
          font-size: var(--sm-font-size);
          font-weight: var(--sm-font-weight);
          line-height: var(--sm-line-height);
          letter-spacing: var(--sm-letter-spacing);
          border: 1px solid var(--ring);
          border-radius: var(--border-radius-lg);
          padding-left: var(--spacing-md);
          padding-right: var(--spacing-md);
          height: 32px;
          color: var(--foreground);
          outline: none;
        }
        :host([s="sm"]) input {
          font-size: var(--xs-font-size);
          font-weight: var(--xs-font-weight);
          line-height: var(--xs-line-height);
          letter-spacing: var(--xs-letter-spacing);
          padding-left: var(--spacing-md);
          padding-right: var(--spacing-md);
          height: 24px;
        }
        input:focus {
          border-color: var(--foreground);
        }
        input:disabled {
          cursor: not-allowed;
        }
        ${q}
        ${F}
      `))}constructor(){super(),e.initializeStyleSheet(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[e.styleSheet],this._styles=K(),this._lastStyleString="",this._inputElement=document.createElement("input"),this._styleElement=document.createElement("style"),this.shadow.appendChild(this._styleElement),this.shadow.appendChild(this._inputElement),this._inputElement.addEventListener("input",this._onInput),this._inputElement.addEventListener("change",this._onChange)}static get observedAttributes(){return["key","type","placeholder","disabled","value","s",...ee([...Un,"wh","w","h","hide","show","op","z"])]}get value(){return this._inputElement.value}set value(t){this._inputElement.value=t}focus(){this._inputElement.focus()}_onInput=()=>{this.dispatchEvent(new CustomEvent("value-input",{detail:{value:this._inputElement.value},bubbles:!0}))};_onChange=()=>{this.dispatchEvent(new CustomEvent("value-change",{detail:{value:this._inputElement.value},bubbles:!0}))};attributeChangedCallback(t,r,s){if(r!==s){if(t==="key"){this._syncValueAttribute();return}if(t==="value"){this._syncValueAttribute();return}if(t==="placeholder"){this._syncPlaceholderAttribute();return}if(e.inputSpecificAttributes.includes(t)){this._updateInputAttributes();return}this.updateStyles()}}updateStyles(){this._styles=K(),ie.forEach(r=>{let s=o=>`${r==="default"?"":`${r}-`}${o}`,i=this.getAttribute(s("wh")),n=P(i===null?this.getAttribute(s("w")):i),a=P(i===null?this.getAttribute(s("h")):i),l=this.getAttribute(s("op")),p=this.getAttribute(s("z"));p!==null&&(this._styles[r]["z-index"]=p),l!==null&&(this._styles[r].opacity=l),H({styleBucket:this._styles[r],axis:"width",dimension:n,fillValue:"var(--width-stretch)"}),H({styleBucket:this._styles[r],axis:"height",dimension:a,fillValue:"100%"}),this.hasAttribute(s("hide"))&&(this._styles[r].display="none"),this.hasAttribute(s("show"))&&(this._styles[r].display="block")});let t=te(this._styles,"input");t!==this._lastStyleString&&(this._styleElement.textContent=t,this._lastStyleString=t)}_setOrRemoveInputAttribute(t,r){if(r==null||r==="null"){this._inputElement.removeAttribute(t);return}this._inputElement.setAttribute(t,r)}_syncValueAttribute(){this._inputElement.value=this.getAttribute("value")??""}_syncPlaceholderAttribute(){this._setOrRemoveInputAttribute("placeholder",this.getAttribute("placeholder"))}_updateInputAttributes(){let r=this.getAttribute("type")==="password"?"password":"text",s=this.hasAttribute("disabled");this._setOrRemoveInputAttribute("type",r),s?this._inputElement.setAttribute("disabled",""):this._inputElement.removeAttribute("disabled")}connectedCallback(){this._updateInputAttributes(),this._syncValueAttribute(),this._syncPlaceholderAttribute(),this.updateStyles()}},Hr=({render:e,html:t})=>_t;var Kn=["mt","mr","mb","ml","m","mh","mv","cur"],xt=class e extends HTMLElement{static styleSheet=null;static inputSpecificAttributes=["disabled","step","min","max","s"];static initializeStyleSheet(){e.styleSheet||(e.styleSheet=new CSSStyleSheet,e.styleSheet.replaceSync(L`
        :host {
          display: contents;
        }
        input {
          background-color: var(--background);
          font-size: var(--sm-font-size);
          font-weight: var(--sm-font-weight);
          line-height: var(--sm-line-height);
          letter-spacing: var(--sm-letter-spacing);
          border: 1px solid var(--ring);
          border-radius: var(--border-radius-lg);
          padding-left: var(--spacing-md);
          padding-right: var(--spacing-md);
          height: 32px;
          color: var(--foreground);
          outline: none;
        }
        :host([s="sm"]) input {
          font-size: var(--xs-font-size);
          font-weight: var(--xs-font-weight);
          line-height: var(--xs-line-height);
          letter-spacing: var(--xs-letter-spacing);
          padding-left: var(--spacing-md);
          padding-right: var(--spacing-md);
          height: 24px;
        }
        input:focus {
          border-color: var(--foreground);
        }
        input:disabled {
          cursor: not-allowed;
        }
        ${q}
        ${F}
      `))}constructor(){super(),e.initializeStyleSheet(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[e.styleSheet],this._styles=K(),this._lastStyleString="",this._inputElement=document.createElement("input"),this._styleElement=document.createElement("style"),this.shadow.appendChild(this._styleElement),this.shadow.appendChild(this._inputElement),this._inputElement.addEventListener("input",this._onInput),this._inputElement.addEventListener("change",this._onChange)}static get observedAttributes(){return["key","placeholder","disabled","value","step","min","max","s",...ee([...Kn,"wh","w","h","hide","show","op","z"])]}get value(){return this._inputElement.value}set value(t){this._inputElement.value=t}focus(){this._inputElement.focus()}_emitValueEvent=t=>{let r=this._inputElement.value;if(r.trim()===""){this.dispatchEvent(new CustomEvent(t,{detail:{value:null},bubbles:!0}));return}let s=parseFloat(r);isNaN(s)||(s=this._clampValueToBounds(s),this._inputElement.value=s.toString(),this.dispatchEvent(new CustomEvent(t,{detail:{value:s},bubbles:!0})))};_onInput=()=>{this._emitValueEvent("value-input")};_onChange=()=>{this._emitValueEvent("value-change")};attributeChangedCallback(t,r,s){if(r!==s){if(t==="key"){this._syncValueAttribute();return}if(t==="value"){this._syncValueAttribute();return}if(t==="placeholder"){this._syncPlaceholderAttribute();return}if(e.inputSpecificAttributes.includes(t)){this._updateInputAttributes(),(t==="min"||t==="max")&&this._syncValueAttribute();return}this.updateStyles()}}updateStyles(){this._styles=K(),ie.forEach(r=>{let s=o=>`${r==="default"?"":`${r}-`}${o}`,i=this.getAttribute(s("wh")),n=P(i===null?this.getAttribute(s("w")):i),a=P(i===null?this.getAttribute(s("h")):i),l=this.getAttribute(s("op")),p=this.getAttribute(s("z"));p!==null&&(this._styles[r]["z-index"]=p),l!==null&&(this._styles[r].opacity=l),H({styleBucket:this._styles[r],axis:"width",dimension:n,fillValue:"var(--width-stretch)"}),H({styleBucket:this._styles[r],axis:"height",dimension:a,fillValue:"100%"}),this.hasAttribute(s("hide"))&&(this._styles[r].display="none"),this.hasAttribute(s("show"))&&(this._styles[r].display="block")});let t=te(this._styles,"input");t!==this._lastStyleString&&(this._styleElement.textContent=t,this._lastStyleString=t)}_setOrRemoveInputAttribute(t,r){if(r==null||r==="null"){this._inputElement.removeAttribute(t);return}this._inputElement.setAttribute(t,r)}_clampValueToBounds(t){let r=t,s=this.getAttribute("min");if(s!==null){let n=parseFloat(s);isNaN(n)||(r=Math.max(r,n))}let i=this.getAttribute("max");if(i!==null){let n=parseFloat(i);isNaN(n)||(r=Math.min(r,n))}return r}_syncValueAttribute(){let t=this.getAttribute("value");if(t==null||t===""){this._inputElement.value="";return}let r=parseFloat(t);if(isNaN(r)){this._inputElement.value="";return}let s=this._clampValueToBounds(r);this._inputElement.value=s.toString()}_syncPlaceholderAttribute(){this._setOrRemoveInputAttribute("placeholder",this.getAttribute("placeholder"))}_updateInputAttributes(){let t=this.getAttribute("step"),r=this.getAttribute("min"),s=this.getAttribute("max"),i=this.hasAttribute("disabled");this._inputElement.setAttribute("type","number"),this._setOrRemoveInputAttribute("step",t),this._setOrRemoveInputAttribute("min",r),this._setOrRemoveInputAttribute("max",s),i?this._inputElement.setAttribute("disabled",""):this._inputElement.removeAttribute("disabled")}connectedCallback(){this._updateInputAttributes(),this._syncValueAttribute(),this._syncPlaceholderAttribute(),this.updateStyles()}},Gr=({render:e,html:t})=>xt;var At=class e extends HTMLElement{static styleSheet=null;static initializeStyleSheet(){e.styleSheet||(e.styleSheet=new CSSStyleSheet,e.styleSheet.replaceSync(L`
        :host {
          display: contents;
        }
        textarea {
          font-family: inherit;
          background-color: var(--background);
          font-size: var(--sm-font-size);
          font-weight: var(--sm-font-weight);
          line-height: var(--sm-line-height);
          letter-spacing: var(--sm-letter-spacing);
          border: 1px solid var(--ring);
          border-radius: var(--border-radius-lg);
          padding-top: var(--spacing-md);
          padding-bottom: var(--spacing-md);
          padding-left: var(--spacing-md);
          padding-right: var(--spacing-md);
          color: var(--foreground);
          outline: none;
        }
        textarea:focus {
          border-color: var(--foreground);
        }
        ${q}
        ${F}
      `))}constructor(){super(),e.initializeStyleSheet(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[e.styleSheet],this._styles={default:{},sm:{},md:{},lg:{},xl:{}},this._lastStyleString="",this._textareaElement=document.createElement("textarea"),this._styleElement=document.createElement("style"),this.shadow.appendChild(this._styleElement),this.shadow.appendChild(this._textareaElement),this._textareaElement.addEventListener("input",this._onInput),this._textareaElement.addEventListener("change",this._onChange)}_onInput=()=>{this.dispatchEvent(new CustomEvent("value-input",{detail:{value:this._textareaElement.value},bubbles:!0}))};_onChange=()=>{this.dispatchEvent(new CustomEvent("value-change",{detail:{value:this._textareaElement.value},bubbles:!0}))};static get observedAttributes(){return["key","placeholder","disabled","value","cols","rows",...ee([...pe,"wh","w","h","hide","show","op","z"])]}get value(){return this._textareaElement.value}set value(t){this._textareaElement.value=t}connectedCallback(){this._updateTextareaAttributes()}focus(){this._textareaElement&&this._textareaElement.focus()}select(){this._textareaElement&&this._textareaElement.select()}attributeChangedCallback(t,r,s){if(t==="key"){requestAnimationFrame(()=>{let n=this.getAttribute("value");this._textareaElement.value=n??""});return}if(t==="value"&&requestAnimationFrame(()=>{let n=this.getAttribute("value");this._textareaElement.value=n??""}),t==="placeholder"&&requestAnimationFrame(()=>{let n=this.getAttribute("placeholder");n===void 0||n==="null"?this._textareaElement.removeAttribute("placeholder"):this._textareaElement.setAttribute("placeholder",n??"")}),["cols","rows","disabled"].includes(t)){this._updateTextareaAttributes();return}this._styles={default:{},sm:{},md:{},lg:{},xl:{}},["default","sm","md","lg","xl"].forEach(n=>{let a=d=>`${n==="default"?"":`${n}-`}${d}`,l=this.getAttribute(a("wh")),p=P(l===null?this.getAttribute(a("w")):l),o=P(l===null?this.getAttribute(a("h")):l),c=this.getAttribute(a("op")),u=this.getAttribute(a("z"));u!==null&&(this._styles[n]["z-index"]=u),c!==null&&(this._styles[n].opacity=c),p==="f"?this._styles[n].width="var(--width-stretch)":p!==void 0&&(this._styles[n].width=p,this._styles[n]["min-width"]=p,this._styles[n]["max-width"]=p),o==="f"?this._styles[n].height="100%":o!==void 0&&(this._styles[n].height=o,this._styles[n]["min-height"]=o,this._styles[n]["max-height"]=o),this.hasAttribute(a("hide"))&&(this._styles[n].display="none"),this.hasAttribute(a("show"))&&(this._styles[n].display="block")});let i=te(this._styles,"textarea");i!==this._lastStyleString&&(this._styleElement.textContent=i,this._lastStyleString=i)}_updateTextareaAttributes(){let t=this.getAttribute("cols"),r=this.getAttribute("rows"),s=this.hasAttribute("disabled");t!==null?this._textareaElement.setAttribute("cols",t):this._textareaElement.removeAttribute("cols"),r!==null?this._textareaElement.setAttribute("rows",r):this._textareaElement.removeAttribute("rows"),s?this._textareaElement.setAttribute("disabled",""):this._textareaElement.removeAttribute("disabled")}},qr=({render:e,html:t})=>At;var Hn=["mt","mr","mb","ml","m","mh","mv","cur"],Gn=/^#[0-9a-fA-F]{6}$/,Et=class e extends HTMLElement{static styleSheet=null;static initializeStyleSheet(){e.styleSheet||(e.styleSheet=new CSSStyleSheet,e.styleSheet.replaceSync(L`
        :host {
          display: contents;
        }
        input[type="color"] {
          background-color: var(--background);
          border: 1px solid var(--ring);
          border-radius: var(--border-radius-lg);
          padding: 2px;
          height: 32px;
          width: 32px;
          cursor: pointer;
          outline: none;
        }
        input[type="color"]:focus {
          border-color: var(--foreground);
        }
        input[type="color"]:disabled {
          cursor: not-allowed;
          opacity: 0.5;
        }
        ${q}
        ${F}
      `))}constructor(){super(),e.initializeStyleSheet(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[e.styleSheet],this._styles=K(),this._lastStyleString="",this._inputElement=document.createElement("input"),this._inputElement.type="color",this._styleElement=document.createElement("style"),this.shadow.appendChild(this._styleElement),this.shadow.appendChild(this._inputElement),this._inputElement.addEventListener("change",this._onChange),this._inputElement.addEventListener("input",this._onInput)}static get observedAttributes(){return["key","value","disabled",...ee([...Hn,"wh","w","h","hide","show","op","z"])]}get value(){return this._inputElement.value}set value(t){this._inputElement.value=t}_onChange=()=>{this.dispatchEvent(new CustomEvent("value-change",{detail:{value:this._inputElement.value},bubbles:!0}))};_onInput=()=>{this.dispatchEvent(new CustomEvent("value-input",{detail:{value:this._inputElement.value},bubbles:!0}))};attributeChangedCallback(t,r,s){if(r!==s){if(t==="key"){this._syncValueAttribute();return}if(["value","disabled"].includes(t)){this._updateInputAttributes();return}this.updateStyles()}}updateStyles(){this._styles=K(),ie.forEach(r=>{let s=o=>`${r==="default"?"":`${r}-`}${o}`,i=this.getAttribute(s("wh")),n=P(i===null?this.getAttribute(s("w")):i),a=P(i===null?this.getAttribute(s("h")):i),l=this.getAttribute(s("op")),p=this.getAttribute(s("z"));p!==null&&(this._styles[r]["z-index"]=p),l!==null&&(this._styles[r].opacity=l),H({styleBucket:this._styles[r],axis:"width",dimension:n,fillValue:"var(--width-stretch)"}),H({styleBucket:this._styles[r],axis:"height",dimension:a,fillValue:"100%"}),this.hasAttribute(s("hide"))&&(this._styles[r].display="none"),this.hasAttribute(s("show"))&&(this._styles[r].display="block")});let t=te(this._styles,'input[type="color"]');t!==this._lastStyleString&&(this._styleElement.textContent=t,this._lastStyleString=t)}_syncValueAttribute(){let t=this.getAttribute("value");if(t===null){this._inputElement.value="#000000";return}this._inputElement.value=Gn.test(t)?t:"#000000"}_updateInputAttributes(){let t=this.hasAttribute("disabled");this._syncValueAttribute(),t?this._inputElement.setAttribute("disabled",""):this._inputElement.removeAttribute("disabled")}connectedCallback(){this._updateInputAttributes(),this.updateStyles()}},Jr=({render:e,html:t})=>Et;var kt=class e extends HTMLElement{static styleSheet=null;static initializeStyleSheet(){e.styleSheet||(e.styleSheet=new CSSStyleSheet,e.styleSheet.replaceSync(L`
        :host {
          display: contents;
        }
        input[type="range"] {
          -webkit-appearance: none;
          appearance: none;
          height: 8px;
          background: var(--muted);
          border-radius: var(--border-radius-full);
          outline: none;
          cursor: pointer;
        }
        input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          width: 20px;
          height: 20px;
          background: var(--foreground);
          border-radius: 50%;
          cursor: pointer;
          transition: all 0.2s ease;
        }
        input[type="range"]::-moz-range-thumb {
          width: 20px;
          height: 20px;
          background: var(--foreground);
          border-radius: 50%;
          cursor: pointer;
          border: none;
          transition: all 0.2s ease;
        }
        input[type="range"]:hover::-webkit-slider-thumb {
          transform: scale(1.1);
        }
        input[type="range"]:hover::-moz-range-thumb {
          transform: scale(1.1);
        }
        input[type="range"]:focus {
          outline: 2px solid var(--ring);
          outline-offset: 2px;
        }
        input[type="range"]:disabled {
          cursor: not-allowed;
          opacity: 0.5;
        }
        input[type="range"]:disabled::-webkit-slider-thumb {
          cursor: not-allowed;
        }
        input[type="range"]:disabled::-moz-range-thumb {
          cursor: not-allowed;
        }
        ${q}
        ${F}
      `))}constructor(){super(),e.initializeStyleSheet(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[e.styleSheet],this._styles={default:{},sm:{},md:{},lg:{},xl:{}},this._lastStyleString="",this._inputElement=document.createElement("input"),this._inputElement.type="range",this._styleElement=document.createElement("style"),this.shadow.appendChild(this._styleElement),this.shadow.appendChild(this._inputElement),this._inputElement.addEventListener("input",this._onInput),this._inputElement.addEventListener("change",this._onChange)}static get observedAttributes(){return["key","value","min","max","step","disabled",...ee([...pe,"wh","w","h","hide","show","op","z"])]}get value(){return this._inputElement.value}set value(t){this._inputElement.value=t}_onInput=()=>{this.dispatchEvent(new CustomEvent("value-input",{detail:{value:Number(this._inputElement.value)},bubbles:!0}))};_onChange=()=>{this.dispatchEvent(new CustomEvent("value-change",{detail:{value:Number(this._inputElement.value)},bubbles:!0}))};attributeChangedCallback(t,r,s){if(t==="key"&&r!==s){requestAnimationFrame(()=>{let n=this.getAttribute("value"),a=this.getAttribute("min")||"0";this._inputElement.value=n??a});return}if(["value","min","max","step","disabled"].includes(t)){this._updateInputAttributes();return}this._styles={default:{},sm:{},md:{},lg:{},xl:{}},["default","sm","md","lg","xl"].forEach(n=>{let a=d=>`${n==="default"?"":`${n}-`}${d}`,l=this.getAttribute(a("wh")),p=P(l===null?this.getAttribute(a("w")):l),o=P(l===null?this.getAttribute(a("h")):l),c=this.getAttribute(a("op")),u=this.getAttribute(a("z"));u!==null&&(this._styles[n]["z-index"]=u),c!==null&&(this._styles[n].opacity=c),p==="f"?this._styles[n].width="var(--width-stretch)":p!==void 0&&(this._styles[n].width=p,this._styles[n]["min-width"]=p,this._styles[n]["max-width"]=p),o==="f"?this._styles[n].height="100%":o!==void 0&&(this._styles[n].height=o,this._styles[n]["min-height"]=o,this._styles[n]["max-height"]=o),this.hasAttribute(a("hide"))&&(this._styles[n].display="none"),this.hasAttribute(a("show"))&&(this._styles[n].display="block")});let i=te(this._styles,'input[type="range"]');i!==this._lastStyleString&&(this._styleElement.textContent=i,this._lastStyleString=i)}_updateInputAttributes(){let t=this.getAttribute("value"),r=this.getAttribute("min"),s=this.getAttribute("max"),i=this.getAttribute("step"),n=this.hasAttribute("disabled");t!==null?this._inputElement.value=t:this._inputElement.value=r??0,r!==null?this._inputElement.min=r:this._inputElement.min="0",s!==null?this._inputElement.max=s:this._inputElement.max="100",i!==null?this._inputElement.step=i:this._inputElement.step="1",n?this._inputElement.setAttribute("disabled",""):this._inputElement.removeAttribute("disabled")}connectedCallback(){this._updateInputAttributes()}},Yr=({render:e,html:t})=>kt;var $t=40,qn=6,St=class e extends HTMLElement{static styleSheet=null;static initializeStyleSheet(){e.styleSheet||(e.styleSheet=new CSSStyleSheet,e.styleSheet.replaceSync(L`
        :host {
          display: contents;
        }

        dialog {
          padding: 0;
          border: none;
          background: transparent;
          margin: auto;
          overflow-y: scroll;
          color: inherit;
          max-height: 100vh;
          height: 100vh;
          max-width: 100vw;
          scrollbar-width: none;
          outline: none;
        }

        dialog::backdrop {
          background-color: rgba(0, 0, 0, 0.5);
        }

        slot[name="content"] {
          background-color: var(--background) !important;
          display: block;
          padding: var(--spacing-lg);
          border: 1px solid var(--border);
          border-radius: var(--border-radius-md);
          margin-left: var(--spacing-lg);
          margin-right: var(--spacing-lg);
          width: fit-content;
          max-width: calc(100vw - 2 * var(--spacing-lg));
          /* Default margins will be set dynamically via JavaScript for adaptive centering */
          margin-top: 40px;
          margin-bottom: 40px;
        }

        /* Size attribute styles */
        :host([s="sm"]) slot[name="content"] {
          width: 33vw;
        }

        :host([s="md"]) slot[name="content"] {
          width: 50vw;
        }

        :host([s="lg"]) slot[name="content"] {
          width: 80vw;
        }

        :host([s="f"]) slot[name="content"] {
          width: 100vw;
          margin-left: 0;
          margin-right: 0;
        }

        @keyframes dialog-in {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

        dialog[open] slot[name="content"] {
          animation: dialog-in 150ms cubic-bezier(0.16, 1, 0.3, 1);
        }

        @media (prefers-reduced-motion: reduce) {
          dialog[open] slot[name="content"] {
            animation: none;
          }
        }
      `))}constructor(){super(),e.initializeStyleSheet(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[e.styleSheet],this._dialogElement=document.createElement("dialog"),this.shadow.appendChild(this._dialogElement),this._slotElement=null,this._isConnected=!1,this._adaptiveFrameId=null,this._layoutRetryCount=0,this._observedContentElement=null,this._resizeObserver=typeof ResizeObserver<"u"?new ResizeObserver(()=>{this._scheduleAdaptiveCentering()}):null,this._onSlotChange=()=>{this._observeAssignedContent(),this._scheduleAdaptiveCentering({resetRetries:!0})},this._onWindowResize=()=>{this._scheduleAdaptiveCentering({resetRetries:!0})},this._mouseDownInContent=!1,this._dialogElement.addEventListener("mousedown",t=>{this._mouseDownInContent=t.target!==this._dialogElement}),this._dialogElement.addEventListener("click",t=>{t.target===this._dialogElement&&!this._mouseDownInContent&&this._attemptClose(),this._mouseDownInContent=!1}),this._dialogElement.addEventListener("contextmenu",t=>{t.target===this._dialogElement&&!this._mouseDownInContent&&(t.preventDefault(),this._attemptClose()),this._mouseDownInContent=!1}),this._dialogElement.addEventListener("cancel",t=>{t.preventDefault(),this._attemptClose()})}_attemptClose(){this.dispatchEvent(new CustomEvent("close",{detail:{},bubbles:!0}))}static get observedAttributes(){return["open","w","s"]}connectedCallback(){this._updateDialog(),this._isConnected=!0,this.hasAttribute("open")&&this._showModal()}disconnectedCallback(){this._isConnected=!1,this._stopAdaptiveObservers(),this._slotElement&&this._slotElement.removeEventListener("slotchange",this._onSlotChange),this._dialogElement.open&&this._dialogElement.close()}attributeChangedCallback(t,r,s){t==="open"?s!==null&&!this._dialogElement.open&&this._isConnected?this._showModal():s===null&&this._dialogElement.open&&this._hideModal():t==="w"&&this._updateWidth()}_updateDialog(){this._updateWidth()}_updateWidth(){let t=this.getAttribute("w");t?this._dialogElement.style.width=t:this._dialogElement.style.width=""}_showModal(){this._dialogElement.open||(this._slotElement||(this._slotElement=document.createElement("slot"),this._slotElement.setAttribute("name","content"),this._slotElement.addEventListener("slotchange",this._onSlotChange),this._dialogElement.appendChild(this._slotElement)),this._dialogElement.showModal(),this._dialogElement.scrollTop=0,window.addEventListener("resize",this._onWindowResize),this._observeAssignedContent(),this._scheduleAdaptiveCentering({resetRetries:!0}))}_hideModal(){this._dialogElement.open&&(this._stopAdaptiveObservers(),this._dialogElement.close(),this._slotElement&&(this._slotElement.removeEventListener("slotchange",this._onSlotChange),this._slotElement.style.marginTop="",this._slotElement.style.marginBottom="",this._dialogElement.removeChild(this._slotElement),this._slotElement=null),this._dialogElement.style.height="")}_stopAdaptiveObservers(){this._adaptiveFrameId!==null&&(cancelAnimationFrame(this._adaptiveFrameId),this._adaptiveFrameId=null),this._layoutRetryCount=0,window.removeEventListener("resize",this._onWindowResize),this._resizeObserver&&this._observedContentElement&&this._resizeObserver.unobserve(this._observedContentElement),this._observedContentElement=null}_getAssignedContentElement(){if(!this._slotElement)return null;let t=this._slotElement.assignedElements({flatten:!0});return t.length>0?t[0]:null}_observeAssignedContent(){if(!this._resizeObserver)return;let t=this._getAssignedContentElement();this._observedContentElement!==t&&(this._observedContentElement&&this._resizeObserver.unobserve(this._observedContentElement),this._observedContentElement=t,this._observedContentElement&&this._resizeObserver.observe(this._observedContentElement))}_scheduleAdaptiveCentering({resetRetries:t=!1}={}){!this._slotElement||!this._dialogElement.open||(t&&(this._layoutRetryCount=0),this._adaptiveFrameId!==null&&cancelAnimationFrame(this._adaptiveFrameId),this._adaptiveFrameId=requestAnimationFrame(()=>{this._adaptiveFrameId=requestAnimationFrame(()=>{this._adaptiveFrameId=null,this._applyAdaptiveCentering()})}))}_applyAdaptiveCentering(){if(!this._slotElement||!this._dialogElement.open)return;this._observeAssignedContent();let t=this._getAssignedContentElement(),r=t?Math.round(t.getBoundingClientRect().height):0;if(r<=0){this._layoutRetryCount<qn&&(this._layoutRetryCount+=1,this._scheduleAdaptiveCentering());return}this._layoutRetryCount=0;let s=window.innerHeight;if(r>=s-2*$t){this._slotElement.style.marginTop=`${$t}px`,this._slotElement.style.marginBottom=`${$t}px`,this._dialogElement.style.height="100vh";return}let i=s-r,n=Math.floor(i/2);this._slotElement.style.marginTop=`${n}px`,this._slotElement.style.marginBottom=`${n}px`,this._dialogElement.style.height="auto"}get dialog(){return this._dialogElement}},Xr=({render:e,html:t})=>St;var Ct=class e extends HTMLElement{static styleSheet=null;static initializeStyleSheet(){e.styleSheet||(e.styleSheet=new CSSStyleSheet,e.styleSheet.replaceSync(L`
        :host {
          display: contents;
        }

        dialog {
          padding: 0;
          border: none;
          background: transparent;
          margin: 0;
          overflow: visible;
          color: inherit;
          scrollbar-width: none;
          outline: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          /* Prevent dialog from being focused */
          pointer-events: none;
        }

        dialog::backdrop {
          background-color: transparent;
          /* Allow backdrop to receive clicks */
          pointer-events: auto;
        }

        .popover-container {
          position: fixed;
          z-index: 1000;
          outline: none;
          pointer-events: auto;
        }

        :host([open]) .popover-container {
          display: block;
          visibility: hidden;
        }

        :host([open][positioned]) .popover-container {
          visibility: visible;
        }

        slot[name="content"] {
          display: block;
          background-color: var(--muted);
          border: 1px solid var(--border);
          border-radius: var(--border-radius-md);
          padding: var(--spacing-md);
          min-width: 200px;
          max-width: 400px;
        }
      `))}constructor(){super(),e.initializeStyleSheet(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[e.styleSheet],this._dialogElement=document.createElement("dialog"),this.shadow.appendChild(this._dialogElement),this._dialogElement.addEventListener("click",t=>{t.stopPropagation();let r=t.composedPath();(r[0]===this._dialogElement||r[0].nodeName==="DIALOG"&&r[0]===this._dialogElement)&&this._emitClose()}),this._dialogElement.addEventListener("contextmenu",t=>{let r=t.composedPath();(r[0]===this._dialogElement||r[0].nodeName==="DIALOG"&&r[0]===this._dialogElement)&&(t.preventDefault(),this._emitClose())}),this._dialogElement.addEventListener("cancel",t=>{t.preventDefault(),this._emitClose()}),this._popoverContainer=document.createElement("div"),this._popoverContainer.className="popover-container",this._dialogElement.appendChild(this._popoverContainer),this._slotElement=null,this._isOpen=!1}_emitClose(){this.dispatchEvent(new CustomEvent("close",{detail:{},bubbles:!0}))}static get observedAttributes(){return["open","x","y","place","no-overlay"]}connectedCallback(){this.hasAttribute("open")&&this._show()}disconnectedCallback(){this._isOpen&&this._dialogElement.open&&this._dialogElement.close()}attributeChangedCallback(t,r,s){t==="open"?s!==null&&!this._isOpen?this.isConnected&&this._show():s===null&&this._isOpen&&this._hide():(t==="x"||t==="y"||t==="place")&&this._isOpen?this._updatePosition():t==="no-overlay"&&r!==s&&this._isOpen&&(this._hide(),this._show())}_show(){this._isOpen||(this._slotElement||(this._slotElement=document.createElement("slot"),this._slotElement.setAttribute("name","content"),this._popoverContainer.appendChild(this._slotElement)),this._isOpen=!0,this._dialogElement.open||setTimeout(()=>{this._dialogElement&&!this._dialogElement.open&&(this.hasAttribute("no-overlay")?this._dialogElement.show():this._dialogElement.showModal())},0),requestAnimationFrame(()=>{this._updatePosition()}))}_hide(){this._isOpen&&(this._isOpen=!1,this._dialogElement.open&&this._dialogElement.close(),this._slotElement&&(this._popoverContainer.removeChild(this._slotElement),this._slotElement=null))}_updatePosition(){let t=parseFloat(this.getAttribute("x")||"0"),r=parseFloat(this.getAttribute("y")||"0"),s=this.getAttribute("place")||"bs";this.removeAttribute("positioned"),requestAnimationFrame(()=>{let i=this._popoverContainer.getBoundingClientRect(),{left:n,top:a}=this._calculatePosition(t,r,i.width,i.height,s);this._popoverContainer.style.left=`${n}px`,this._popoverContainer.style.top=`${a}px`,requestAnimationFrame(()=>{this.setAttribute("positioned","")})})}_calculatePosition(t,r,s,i,n){let l=t,p=r;switch(n){case"t":l=t-s/2,p=r-i-8;break;case"ts":l=t,p=r-i-8;break;case"te":l=t-s,p=r-i-8;break;case"r":l=t+8,p=r-i/2;break;case"rs":l=t+8,p=r;break;case"re":l=t+8,p=r-i;break;case"b":l=t-s/2,p=r+8;break;case"bs":l=t,p=r+8;break;case"be":l=t-s,p=r+8;break;case"l":l=t-s-8,p=r-i/2;break;case"ls":l=t-s-8,p=r;break;case"le":l=t-s-8,p=r-i;break;default:l=t,p=r+8;break}let o=8;return l=Math.max(o,Math.min(l,window.innerWidth-s-o)),p=Math.max(o,Math.min(p,window.innerHeight-i-o)),{left:l,top:p}}get popover(){return this._popoverContainer}},Zr=({render:e,html:t})=>Ct;var It={};R(It,{handleClickHeader:()=>Jn});var Jn=(e,t)=>{let{store:r,render:s}=e;r.toggleOpen({}),s()};var Qr={componentName:"rtgl-accordion-item",propsSchema:{type:"object",properties:{label:{type:"string"},content:{type:"string"},w:{type:"string"}}},events:[],methods:{type:"object",properties:{}}};var Ot={};R(Ot,{createInitialState:()=>Yn,selectViewData:()=>Qn,toggleOpen:()=>ea});var Yn=()=>Object.freeze({open:!1}),Xn=["id","class","style","slot","label","content"],Zn=(e={})=>Object.entries(e).filter(([t])=>!Xn.includes(t)).map(([t,r])=>`${t}=${r}`).join(" "),Qn=({state:e,props:t})=>({label:t.label||"",content:t.content||"",openClass:e.open?"content-wrapper open":"content-wrapper",chevronIcon:e.open?"chevronUp":"chevronDown",containerAttrString:Zn(t)}),ea=({state:e})=>{e.open=!e.open};var es={refs:{header:{eventListeners:{click:{handler:"handleClickHeader"}}}},styles:{".content-wrapper":{display:"grid","grid-template-rows":"0fr",transition:"grid-template-rows 0.2s ease-out"},".content-wrapper.open":{"grid-template-rows":"1fr"},".content-inner":{overflow:"hidden"}},template:{type:9,items:[{type:8,properties:[{key:"rtgl-view d=v ${containerAttrString}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view#header d=h av=c w=f pv=md cur=pointer",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text",value:{type:1,path:"label"}}],fast:!0},{type:8,properties:[{key:"rtgl-view w=1fg",value:{type:0,value:null}}],fast:!0},{type:8,properties:[{key:"rtgl-svg svg=${chevronIcon} wh=16 c=mu-fg",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-svg svg=",{type:1,path:"chevronIcon"}," wh=16 c=mu-fg"]}}],fast:!0}],fast:!0}}],fast:!0},{type:8,properties:[{key:'div class="${openClass}"',value:{type:9,items:[{type:8,properties:[{key:"div class=content-inner",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view pb=md",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text c=mu-fg",value:{type:1,path:"content"}}],fast:!0},{type:8,properties:[{key:"slot name=content",value:{type:0,value:null}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:['div class="',{type:1,path:"openClass"},'"']}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view d=v ",{type:1,path:"containerAttrString"}]}}],fast:!0}],fast:!0}};var Tt={};R(Tt,{handleClickItem:()=>ta});var ta=(e,t)=>{let{dispatchEvent:r,props:s}=e,i=t._event,n=Number(i.currentTarget.dataset.index),a=Array.isArray(s.items)?s.items[n]:void 0;if(!a)return;if(a.disabled||a.current){i.preventDefault();return}typeof a.href=="string"&&a.href.length>0||i.preventDefault(),r(new CustomEvent("item-click",{detail:{id:a.id,path:a.path,href:a.href,item:a,index:n,trigger:i.type}}))};var ts={componentName:"rtgl-breadcrumb",propsSchema:{type:"object",properties:{items:{type:"array",items:{type:"object",properties:{label:{type:"string"},id:{type:"string"},href:{type:"string"},path:{type:"string"},current:{type:"boolean"},disabled:{type:"boolean"},click:{type:"boolean"},newTab:{type:"boolean"},rel:{type:"string"}}}},sep:{type:"string",default:"breadcrumb-arrow"},max:{type:"number"}}},events:{"item-click":{type:"object",properties:{id:{type:"string"},path:{type:"string"},href:{type:"string"},item:{type:"object"},index:{type:"number"},trigger:{type:"string"}}}},methods:{type:"object",properties:{}}};var Lt={};R(Lt,{createInitialState:()=>ra,selectViewData:()=>pa});var ra=()=>Object.freeze({}),sa=["id","class","style","slot","items","sep","max","separator"],ia=(e={})=>Object.entries(e).filter(([t])=>!sa.includes(t)).map(([t,r])=>`${t}=${r}`).join(" "),na=e=>{if(e==null||e==="")return;let t=Number(e);return Number.isNaN(t)?void 0:t},aa=e=>`${e}`.replace(/"/g,"&quot;"),oa=(e,t)=>{if(!t||t<3||e.length<=t)return e;let r=t-2;return[e[0],{isEllipsis:!0,label:"..."},...e.slice(-r)]},la=e=>e.map((t,r)=>{let s=typeof t.href=="string"&&t.href.length>0,i=t.path!==void 0&&t.path!==null&&`${t.path}`!="",n=!!t.current,a=!!t.disabled,l=!n&&!a&&(s||i||!!t.click),p=t.rel||(t.newTab?"noopener noreferrer":""),o=[t.newTab?'target="_blank"':"",p?`rel="${aa(p)}"`:""].filter(Boolean).join(" ");return{...t,label:t.label||"",index:r,href:s?t.href:void 0,path:i?t.path:void 0,isCurrent:n,isDisabled:a,isInteractive:l,linkExtraAttrs:o,c:n?"fg":"mu-fg"}}),pa=({props:e})=>{let t=ia(e),r=Array.isArray(e.items)?e.items:[],s=na(e.max),i=e.sep||"breadcrumb-arrow",n=la(r),a=oa(n,s),l=[];return a.forEach((p,o)=>{l.push(p),o<a.length-1&&l.push({isSeparator:!0})}),{containerAttrString:t,items:l,sep:i}};var rs={refs:{"item*":{eventListeners:{click:{handler:"handleClickItem"}}}},styles:{a:{"text-decoration":"none",color:"inherit"}},template:{type:9,items:[{type:8,properties:[{key:"rtgl-view d=h av=c g=md p=sm ${containerAttrString}",value:{type:9,items:[{type:7,itemVar:"item",indexVar:"i",iterable:{type:1,path:"items"},body:{type:9,items:[{type:8,properties:[{key:"$if item.isSeparator",value:{type:6,conditions:[{type:1,path:"item.isSeparator"},{type:1,path:"item.isEllipsis"},{type:4,op:6,left:{type:1,path:"item.isInteractive"},right:{type:1,path:"item.href"}},{type:1,path:"item.isInteractive"},null],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-svg wh=16 svg=${sep} c=mu-fg",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-svg wh=16 svg=",{type:1,path:"sep"}," c=mu-fg"]}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-text s=sm c=mu-fg",value:{type:1,path:"item.label"}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"a#item${i} href=${item.href} ${item.linkExtraAttrs} data-index=${item.index}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text s=sm c=${item.c}",value:{type:1,path:"item.label"},parsedKey:{type:2,parts:["rtgl-text s=sm c=",{type:1,path:"item.c"}]}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["a#item",{type:1,path:"i"}," href=",{type:1,path:"item.href"}," ",{type:1,path:"item.linkExtraAttrs"}," data-index=",{type:1,path:"item.index"}]}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-view#item${i} data-index=${item.index} cur=pointer",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text s=sm c=${item.c}",value:{type:1,path:"item.label"},parsedKey:{type:2,parts:["rtgl-text s=sm c=",{type:1,path:"item.c"}]}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view#item",{type:1,path:"i"}," data-index=",{type:1,path:"item.index"}," cur=pointer"]}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-text s=sm c=${item.c}",value:{type:1,path:"item.label"},parsedKey:{type:2,parts:["rtgl-text s=sm c=",{type:1,path:"item.c"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}}],fast:!1},parsedKey:{type:2,parts:["rtgl-view d=h av=c g=md p=sm ",{type:1,path:"containerAttrString"}]}}],fast:!1}],fast:!1}};var Rt={};R(Rt,{handleClickMenuItem:()=>ua,handleClosePopover:()=>ca});var ca=(e,t)=>{let{dispatchEvent:r}=e;r(new CustomEvent("close"))},ua=(e,t)=>{let{dispatchEvent:r,props:s}=e,i=t._event,n=Number(i.currentTarget.dataset.index??i.currentTarget.id.slice(6)),a=s.items[n],l=a?.type||"item";if(!a||l!=="item"||a.disabled){i.preventDefault();return}a.href||i.preventDefault(),r(new CustomEvent("item-click",{detail:{index:n,item:a,id:a.id,path:a.path,href:a.href,trigger:i.type}}))};var ss={componentName:"rtgl-dropdown-menu",propsSchema:{type:"object",properties:{items:{type:"array",items:{type:"object",properties:{label:{type:"string"},type:{type:"string",enum:["label","item","separator"]},id:{type:"string"},path:{type:"string"},href:{type:"string"},disabled:{type:"boolean"},newTab:{type:"boolean"},rel:{type:"string"},testId:{type:"string"}}}},open:{type:"string"},x:{type:"string"},y:{type:"string"},place:{type:"string"},w:{type:"string"},h:{type:"string"}}},events:{close:{type:"object"},"item-click":{type:"object",properties:{index:{type:"number"},item:{type:"object"},id:{type:"string"},path:{type:"string"},href:{type:"string"},trigger:{type:"string"}}}},methods:{type:"object",properties:{}}};var Nt={};R(Nt,{createInitialState:()=>da,selectViewData:()=>ma});var da=()=>Object.freeze({}),fa=e=>`${e}`.replace(/"/g,"&quot;"),ha=e=>e.map((t,r)=>{let s=t.type||"item",i=s==="separator",n=s==="label",a=s==="item",l=!!t.disabled,p=a&&!l,o=l?"mu-fg":"fg",c=l?"mu":"",u=l?"":"ac",d=typeof t.href=="string"&&t.href.length>0,h=t.rel||(t.newTab?"noopener noreferrer":""),f=[t.newTab?'target="_blank"':"",h?`rel="${fa(h)}"`:""].filter(Boolean).join(" ");return{...t,index:r,type:s,isSeparator:i,isLabel:n,isItem:a,isDisabled:l,isInteractive:p,hasHref:d,linkExtraAttrs:f,c:o,bgc:c,hoverBgc:u}}),ma=({props:e})=>{let t=Array.isArray(e.items)?e.items:[];return{items:ha(t),open:!!e.open,x:e.x||0,y:e.y||0,w:e.w||"300",h:e.h||"300",place:e.place||"bs"}};var is={refs:{popover:{eventListeners:{close:{handler:"handleClosePopover"}}},"option*":{eventListeners:{click:{handler:"handleClickMenuItem"}}}},styles:{a:{display:"block",width:"100%","text-decoration":"none",color:"inherit"}},template:{type:9,items:[{type:8,properties:[{key:"rtgl-popover#popover ?open=${open} x=${x} y=${y} place=${place}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view w=${w} h=${h} sv g=xs slot=content bgc=mu br=md",value:{type:9,items:[{type:7,itemVar:"item",indexVar:"i",iterable:{type:1,path:"items"},body:{type:9,items:[{type:8,properties:[{key:"$if item.isLabel",value:{type:6,conditions:[{type:1,path:"item.isLabel"},{type:4,op:6,left:{type:1,path:"item.isItem"},right:{type:1,path:"item.isDisabled"}},{type:4,op:6,left:{type:1,path:"item.isItem"},right:{type:4,op:6,left:{type:1,path:"item.hasHref"},right:{type:1,path:"item.linkExtraAttrs"}}},{type:4,op:6,left:{type:1,path:"item.isItem"},right:{type:1,path:"item.hasHref"}},{type:1,path:"item.isItem"},{type:1,path:"item.isSeparator"}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-view w=f ph=lg pv=md",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text s=sm c=mu-fg",value:{type:1,path:"item.label"}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-view w=f ph=lg pv=md br=md bgc=${item.bgc}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text c=${item.c}",value:{type:1,path:"item.label"},parsedKey:{type:2,parts:["rtgl-text c=",{type:1,path:"item.c"}]}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view w=f ph=lg pv=md br=md bgc=",{type:1,path:"item.bgc"}]}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"a#option${i} href=${item.href} ${item.linkExtraAttrs} data-index=${item.index} data-testid=${item.testId}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view w=f h-bgc=${item.hoverBgc} ph=lg pv=md cur=pointer br=md bgc=${item.bgc}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text c=${item.c}",value:{type:1,path:"item.label"},parsedKey:{type:2,parts:["rtgl-text c=",{type:1,path:"item.c"}]}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view w=f h-bgc=",{type:1,path:"item.hoverBgc"}," ph=lg pv=md cur=pointer br=md bgc=",{type:1,path:"item.bgc"}]}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["a#option",{type:1,path:"i"}," href=",{type:1,path:"item.href"}," ",{type:1,path:"item.linkExtraAttrs"}," data-index=",{type:1,path:"item.index"}," data-testid=",{type:1,path:"item.testId"}]}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"a#option${i} href=${item.href} data-index=${item.index} data-testid=${item.testId}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view w=f h-bgc=${item.hoverBgc} ph=lg pv=md cur=pointer br=md bgc=${item.bgc}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text c=${item.c}",value:{type:1,path:"item.label"},parsedKey:{type:2,parts:["rtgl-text c=",{type:1,path:"item.c"}]}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view w=f h-bgc=",{type:1,path:"item.hoverBgc"}," ph=lg pv=md cur=pointer br=md bgc=",{type:1,path:"item.bgc"}]}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["a#option",{type:1,path:"i"}," href=",{type:1,path:"item.href"}," data-index=",{type:1,path:"item.index"}," data-testid=",{type:1,path:"item.testId"}]}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-view#option${i} w=f h-bgc=${item.hoverBgc} ph=lg pv=md cur=pointer br=md bgc=${item.bgc} data-index=${item.index} data-testid=${item.testId}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text c=${item.c}",value:{type:1,path:"item.label"},parsedKey:{type:2,parts:["rtgl-text c=",{type:1,path:"item.c"}]}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view#option",{type:1,path:"i"}," w=f h-bgc=",{type:1,path:"item.hoverBgc"}," ph=lg pv=md cur=pointer br=md bgc=",{type:1,path:"item.bgc"}," data-index=",{type:1,path:"item.index"}," data-testid=",{type:1,path:"item.testId"}]}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-view w=f h=1 ph=lg mv=md bgc=bo",value:{type:0,value:null}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}}],fast:!1},parsedKey:{type:2,parts:["rtgl-view w=",{type:1,path:"w"}," h=",{type:1,path:"h"}," sv g=xs slot=content bgc=mu br=md"]}}],fast:!1}],fast:!1},parsedKey:{type:2,parts:["rtgl-popover#popover ?open=",{type:1,path:"open"}," x=",{type:1,path:"x"}," y=",{type:1,path:"y"}," place=",{type:1,path:"place"}]}}],fast:!1}],fast:!1}};var Pt={};R(Pt,{handleActionClick:()=>_a,handleAfterMount:()=>va,handleBeforeMount:()=>ga,handleImageClick:()=>Aa,handleInputChange:()=>xa,handleKeyDown:()=>Ca,handleOnUpdate:()=>ba,handleSelectAddOption:()=>ka,handleTooltipMouseEnter:()=>$a,handleTooltipMouseLeave:()=>Sa,handleWaveformClick:()=>Ea});var ns=({form:e,defaultValues:t={},refs:r})=>{let{fields:s=[]}=e;s.forEach((i,n)=>{let a=r[`field${n}`];if(a){if(["input-textarea","input-text","input-number","color-picker","slider","slider-input","popover-input"].includes(i.inputType)){let l=t[i.name];l==null?a.removeAttribute("value"):a.setAttribute("value",l)}["input-text","input-textarea"].includes(i.inputType)&&i.placeholder&&a.getAttribute("placeholder")!==i.placeholder&&(i.placeholder===void 0||i.placeholder===null?a.removeAttribute("placeholder"):a.setAttribute("placeholder",i.placeholder))}})},ya=e=>{for(let t in e)if(t.startsWith("field")){let r=e[t];if(r&&r.focus){r.focus();return}}},ga=e=>{let{store:t,props:r}=e;t.setFormValues({formValues:r.defaultValues})},va=e=>{let{props:t,refs:r,render:s}=e,{form:i={},defaultValues:n}=t;ns({form:i,defaultValues:n,refs:r}),s(),t?.autofocus&&setTimeout(()=>{ya(r)},50)},ba=(e,t)=>{let{oldProps:r,newProps:s}=t,{store:i,render:n,refs:a}=e,{form:l={},defaultValues:p}=s;if(r?.key!==s?.key){ns({form:l,defaultValues:p,refs:a}),i.setFormValues({formValues:p}),n();return}n()},wa=(e,t,r,s)=>{s(new CustomEvent("form-change",{detail:{name:e,fieldValue:t,formValues:r}}))},_a=(e,t)=>{let{store:r,dispatchEvent:s}=e,i=t._event,n=i.currentTarget.dataset.actionId||i.currentTarget.id.slice(6);s(new CustomEvent("action-click",{detail:{actionId:n,formValues:r.selectFormValues()}}))},xa=(e,t)=>{let{store:r,dispatchEvent:s}=e,i=t._event,n=i.currentTarget.dataset.fieldName||i.currentTarget.id.slice(5);if(n&&i.detail&&Object.prototype.hasOwnProperty.call(i.detail,"value")){let a=i.detail.value;r.setFormFieldValue({name:n,value:a}),wa(n,a,r.selectFormValues(),s)}},Aa=(e,t)=>{let r=t._event;r.type==="contextmenu"&&r.preventDefault();let{dispatchEvent:s}=e,i=r.currentTarget.dataset.fieldName||r.currentTarget.id.slice(5);s(new CustomEvent("extra-event",{detail:{name:i,x:r.clientX,y:r.clientY,trigger:r.type}}))},Ea=(e,t)=>{let r=t._event;r.type==="contextmenu"&&r.preventDefault();let{dispatchEvent:s}=e,i=r.currentTarget.dataset.fieldName||r.currentTarget.id.slice(8);s(new CustomEvent("extra-event",{detail:{name:i,x:r.clientX,y:r.clientY,trigger:r.type}}))},ka=(e,t)=>{let{store:r,dispatchEvent:s}=e,i=t._event,n=i.currentTarget.dataset.fieldName||i.currentTarget.id.slice(5);s(new CustomEvent("action-click",{detail:{actionId:"select-options-add",name:n,formValues:r.selectFormValues()}}))},$a=(e,t)=>{let{store:r,render:s,props:i}=e,n=t._event,a=n.currentTarget.dataset.fieldName||n.currentTarget.id.slice(11),p=i.form.fields.find(o=>o.name===a);if(p&&p.tooltip){let o=n.currentTarget.getBoundingClientRect();r.showTooltip({x:o.left+o.width/2,y:o.top-8,content:p.tooltip.content}),s()}},Sa=e=>{let{store:t,render:r}=e;t.hideTooltip({}),r()},Ca=(e,t)=>{let{store:r,dispatchEvent:s,props:i}=e,n=t._event;if(n.key==="Enter"&&!n.shiftKey){let a=n.target;if(a.tagName==="TEXTAREA"||a.tagName==="RTGL-TEXTAREA")return;n.preventDefault();let o=((i.form||{}).actions||{}).buttons||[];if(o.length>0){let c=o[0].id,u=r.selectFormValues();s(new CustomEvent("action-click",{detail:{actionId:c,formValues:u}}))}}};var as={componentName:"rtgl-form",propsSchema:{type:"object",properties:{key:{type:"string"},autofocus:{type:"boolean"},defaultValues:{type:"object"},context:{type:"object"},form:{type:"object",properties:{title:{type:"string"},description:{type:"string"},fields:{type:"array",items:{anyOf:[{type:"object",properties:{name:{type:"string"},label:{type:"string"},description:{type:"string"},inputType:{const:"input-text"},placeholder:{type:"string"},testId:{type:"string"},tooltip:{type:"object",properties:{content:{type:"string"}}}},required:["name","label","inputType"],additionalProperties:!1},{type:"object",properties:{name:{type:"string"},label:{type:"string"},description:{type:"string"},inputType:{const:"select"},placeholder:{type:"string"},noClear:{type:"boolean"},addOption:{type:"object",properties:{label:{type:"string"}}},options:{type:"array",items:{type:"object",properties:{label:{type:"string"},value:{type:"any"}},required:["label","value"]}},testId:{type:"string"},tooltip:{type:"object",properties:{content:{type:"string"}}}},required:["name","label","inputType","options"],additionalProperties:!1},{type:"object",properties:{name:{type:"string"},label:{type:"string"},description:{type:"string"},inputType:{const:"color-picker"},value:{type:"string"},testId:{type:"string"},tooltip:{type:"object",properties:{content:{type:"string"}}}},required:["name","label","inputType"],additionalProperties:!1},{type:"object",properties:{name:{type:"string"},label:{type:"string"},description:{type:"string"},inputType:{const:"slider"},min:{type:"number"},max:{type:"number"},step:{type:"number"},value:{type:"number"},testId:{type:"string"},tooltip:{type:"object",properties:{content:{type:"string"}}}},required:["name","label","inputType"],additionalProperties:!1},{type:"object",properties:{name:{type:"string"},label:{type:"string"},description:{type:"string"},inputType:{const:"slider-input"},min:{type:"number"},max:{type:"number"},step:{type:"number"},value:{type:"number"},testId:{type:"string"},tooltip:{type:"object",properties:{content:{type:"string"}}}},required:["name","label","inputType"],additionalProperties:!1},{type:"object",properties:{name:{type:"string"},label:{type:"string"},description:{type:"string"},inputType:{const:"image"},width:{type:"number"},height:{type:"number"},placeholder:{type:"string"},testId:{type:"string"},tooltip:{type:"object",properties:{content:{type:"string"}}}},required:["name","label","inputType"],additionalProperties:!1},{type:"object",properties:{name:{type:"string"},label:{type:"string"},description:{type:"string"},inputType:{const:"waveform"},width:{type:"number"},height:{type:"number"},placeholder:{type:"string"},defaultValue:{type:"object"},waveformData:{type:"object"},testId:{type:"string"},tooltip:{type:"object",properties:{content:{type:"string"}}}},required:["name","label","inputType"],additionalProperties:!1},{type:"object",properties:{name:{type:"string"},label:{type:"string"},description:{type:"string"},inputType:{const:"popover-input"},placeholder:{type:"string"},testId:{type:"string"},tooltip:{type:"object",properties:{content:{type:"string"}}}},required:["name","label","inputType"],additionalProperties:!1}]}},actions:{type:"object",properties:{buttons:{type:"array",items:{type:"object",properties:{id:{type:"string"},content:{type:"string"},testId:{type:"string"}},required:["id","content"]}}}}}}}},events:{"form-change":{},"extra-event":{},"action-click":{}},methods:{type:"object",properties:{}}};var Mt={};R(Mt,{createInitialState:()=>ao,getFormFieldValue:()=>ho,hideTooltip:()=>vo,selectForm:()=>Je,selectFormValues:()=>fo,selectState:()=>uo,selectViewData:()=>co,setFormFieldValue:()=>yo,setFormValues:()=>mo,showTooltip:()=>go});var b={LITERAL:0,VARIABLE:1,INTERPOLATION:2,FUNCTION:3,BINARY:4,UNARY:5,CONDITIONAL:6,LOOP:7,OBJECT:8,ARRAY:9,PARTIAL:10,PATH_REFERENCE:11},V={EQ:0,NEQ:1,GT:2,LT:3,GTE:4,LTE:5,AND:6,OR:7,IN:8,ADD:10,SUBTRACT:11},Re={NOT:0};var E=class extends Error{constructor(t){super(`Parse Error: ${t}`),this.name="JemplParseError"}},Z=class extends Error{constructor(t){super(`Render Error: ${t}`),this.name="JemplRenderError"}};var Vt=e=>{if(!e||e.trim()==="")throw new E("Missing condition expression after '$if'");if(e.includes("===")||e.includes("!==")){let r=e.includes("===")?"==":"!=";throw new E(`Invalid comparison operator '${e.includes("===")?"===":"!=="}' - did you mean '${r}'? (got: '${e}')`)}let t=["<",">","<=",">=","==","!="];for(let r of t)if(e.trim().endsWith(r))throw new E(`Incomplete comparison expression - missing right operand (got: '${e}')`)},os=e=>{if(e.trim().endsWith(" in"))throw new E(`Missing iterable expression after 'in' (got: '$for ${e}')`);if(!e.includes(" in "))throw new E(`Invalid loop syntax - missing 'in' keyword (got: '$for ${e}')`);let[t,r]=e.split(" in ");if(!r||r.trim()==="")throw new E(`Missing iterable expression after 'in' (got: '$for ${e}')`);let s=t.includes(",")?t.split(",").map(i=>i.trim()):[t.trim()];for(let i of s){if(!i)throw new E(`Invalid loop variable - variable name cannot be empty (got: '$for ${e}')`);if(!/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(i))throw new E(`Invalid loop syntax (got: '$for ${e}')`)}};var ls=(e,t,r=!1)=>{if(t===null)return new Z(`Cannot iterate over null value at '$for ${e}'`);if(t===void 0)return new Z(`Cannot iterate over undefined value at '$for ${e}'`);let s=typeof t;return r?new Z(`Cannot iterate over non-array value in loop '${e}' - got ${s} instead`):new Z(`Cannot iterate over non-array value (got: ${s}) at '$for ${e}'`)},ps=(e,t)=>{let r=t&&Object.keys(t).length>0?Object.keys(t).join(", "):"no custom functions provided";return new Z(`Unknown function '${e}' (${r})`)};var Ia=(e,t,r={})=>{let s={},i={};r&&typeof r=="object"&&(r.functions!==void 0||r.partials!==void 0?(s=r.functions||{},i=r.partials||{}):typeof r=="object"&&(s=r));let a=C(e,{functions:s,partials:i},t,{});return a===void 0?{}:a},C=(e,t,r,s)=>{let i=t.functions||t;if(e.var&&!e.type)return M(e.var,r,s);if(e.type===b.LITERAL)return e.value;if(e.type===b.VARIABLE)return M(e.path,r,s);if(e.type===b.INTERPOLATION)return Ta(e.parts,t,r,s);switch(e.type){case b.FUNCTION:return us(e,t,r,s);case b.BINARY:return ds(e,t,r,s);case b.UNARY:return fs(e,t,r,s);case b.CONDITIONAL:return Ra(e,t,r,s);case b.LOOP:return ja(e,t,r,s);case b.OBJECT:return Wa(e,t,r,s);case b.ARRAY:return Ma(e,t,r,s);case b.PARTIAL:return za(e,t,r,s);case b.PATH_REFERENCE:return Fa(e,t,r,s);default:throw new Error(`Unknown node type: ${e.type}`)}},cs=new Map,Oa=e=>{let t=[],r="",s=!1;for(let i=0;i<e.length;i++){let n=e[i];if(n==="[")r&&(t.push({type:"property",value:r}),r=""),s=!0;else if(n==="]"){if(s&&r){let a=r.trim();if(/^\d+$/.test(a))t.push({type:"index",value:parseInt(a,10)});else if(a.startsWith('"')&&a.endsWith('"')||a.startsWith("'")&&a.endsWith("'")){let l=a.slice(1,-1);t.push({type:"property",value:l})}else t.push({type:"property",value:a});r=""}s=!1}else r+=n}return r&&t.push({type:"property",value:r}),t},M=(e,t,r)=>{if(!e)return;if(e in r)return r[e];let s=cs.get(e);if(!s){let n=[],a="",l=0;for(let p=0;p<e.length;p++){let o=e[p];o==="["?(l++,a+=o):o==="]"?(l--,a+=o):o==="."&&l===0?a&&(n.push(a),a=""):a+=o}a&&n.push(a),s=[];for(let p of n){let o=Oa(p.trim());s.push(...o)}cs.set(e,s)}let i=t;for(let n=0;n<s.length;n++){let a=s[n];if(a.type==="property"&&a.value in r){i=r[a.value];continue}if(i==null)return;(a.type==="property"||a.type==="index")&&(i=i[a.value])}return i},Ta=(e,t,r,s)=>{let i=[];for(let n of e)if(typeof n=="string")i.push(n);else{let a=C(n,t,r,s);i.push(a!=null?String(a):"")}return i.join("")},us=(e,t,r,s)=>{let i=t.functions||t,n=i[e.name];if(!n)throw ps(e.name,i);let a=e.args.map(l=>C(l,t,r,s));return n(...a)},Ae=(e,t,r,s)=>{if(e.var&&!e.type)return M(e.var,r,s);switch(e.type){case b.VARIABLE:return M(e.path,r,s);case b.LITERAL:return e.value;case b.BINARY:return ds(e,t,r,s);case b.UNARY:return fs(e,t,r,s);case b.FUNCTION:return us(e,t,r,s);default:return C(e,t,r,s)}},ds=(e,t,r,s)=>{if(e.op===V.AND||e.op===V.OR){let a=Ae(e.left,t,r,s),l=Ae(e.right,t,r,s);switch(e.op){case V.AND:return a&&l;case V.OR:return a||l}}let i=C(e.left,t,r,s),n=C(e.right,t,r,s);switch(e.op){case V.EQ:return i==n;case V.NEQ:return i!=n;case V.GT:return i>n;case V.LT:return i<n;case V.GTE:return i>=n;case V.LTE:return i<=n;case V.IN:return Array.isArray(n)?n.includes(i):!1;case V.ADD:if(typeof i!="number"||typeof n!="number")throw new Z(`Arithmetic operations require numbers. Got ${typeof i} + ${typeof n}`);return i+n;case V.SUBTRACT:if(typeof i!="number"||typeof n!="number")throw new Z(`Arithmetic operations require numbers. Got ${typeof i} - ${typeof n}`);return i-n;default:throw new Error(`Unknown binary operator: ${e.op}`)}},fs=(e,t,r,s)=>{let i=e.op===Re.NOT?Ae(e.operand,t,r,s):C(e.operand,t,r,s);switch(e.op){case Re.NOT:return!i;default:throw new Error(`Unknown unary operator: ${e.op}`)}},La=(e,t,r,s)=>{if(e.conditions.length===2&&e.conditions[1]===null){let i=e.conditions[0];if(i.type===b.VARIABLE)if(M(i.path,r,s)){let a=e.bodies[0];if(a.type===b.OBJECT&&a.properties.length<=5){let l={};for(let p of a.properties){let o=p.parsedKey?C(p.parsedKey,t,r,s):p.key,c=p.value;if(c.type===b.LITERAL)l[o]=c.value;else if(c.type===b.VARIABLE)l[o]=M(c.path,r,s);else if(c.type===b.INTERPOLATION){let u=[];for(let d of c.parts)if(typeof d=="string")u.push(d);else if(d.type===b.VARIABLE){let h=M(d.path,r,s);u.push(h!=null?String(h):"")}else{let h=C(d,t,r,s);u.push(h!=null?String(h):"")}l[o]=u.join("")}else l[o]=C(c,t,r,s)}return l}}else{let a=e.bodies[1];if(a.type===b.OBJECT&&a.properties.length<=5){let l={};for(let p of a.properties){let o=p.parsedKey?C(p.parsedKey,t,r,s):p.key,c=p.value;if(c.type===b.LITERAL)l[o]=c.value;else if(c.type===b.VARIABLE)l[o]=M(c.path,r,s);else if(c.type===b.INTERPOLATION){let u=[];for(let d of c.parts)if(typeof d=="string")u.push(d);else if(d.type===b.VARIABLE){let h=M(d.path,r,s);u.push(h!=null?String(h):"")}else{let h=C(d,t,r,s);u.push(h!=null?String(h):"")}l[o]=u.join("")}else l[o]=C(c,t,r,s)}return l}}}return null},Ra=(e,t,r,s)=>{let i=La(e,t,r,s);if(i!==null)return i;for(let n=0;n<e.conditions.length;n++){let a=e.conditions[n];if(a===null||Ae(a,t,r,s))return C(e.bodies[n],t,r,s)}return hs},Na=(e,t)=>{let r=e.body,s=e.itemVar;if(r.type===b.CONDITIONAL&&r.conditions.length===1&&r.conditions[0].type===b.VARIABLE){let i=r.conditions[0].path,n=r.bodies[0];if(i.startsWith(s+".")){let a=i.substring(s.length+1);if(n.type===b.OBJECT&&n.properties.length<=5){for(let p of n.properties)if(p.parsedKey)return null;let l=[];for(let p=0;p<t.length;p++){let o=t[p];if(o[a]){let c={};for(let u of n.properties){let d=u.key,h=u.value;if(h.type===b.LITERAL)c[d]=h.value;else if(h.type===b.VARIABLE){let f=h.path;if(f===s)c[d]=o;else if(f.startsWith(s+".")){let m=f.substring(s.length+1);c[d]=o[m]}else return null}else if(h.type===b.INTERPOLATION){let f=[],m=!0;for(let g of h.parts)if(typeof g=="string")f.push(g);else if(g.type===b.VARIABLE){let y=g.path;if(y===s)f.push(o!=null?String(o):"");else if(y.startsWith(s+".")){let w=y.substring(s.length+1),_=o[w];f.push(_!=null?String(_):"")}else{m=!1;break}}else{m=!1;break}if(!m)return null;c[d]=f.join("")}else return null}l.push(c)}}return l}}}return null},Pa=(e,t)=>{let r=e.body,s=e.itemVar,i=Na(e,t);if(i!==null)return i;if(r.type===b.OBJECT&&r.properties.length<=5&&!r.whenCondition){for(let l of r.properties)if(l.parsedKey)return null;let n=[],a=!0;for(let l of r.properties){let p=l.key,o=l.value;if(o.type===b.LITERAL)n.push({key:p,type:"literal",value:o.value});else if(o.type===b.VARIABLE){let c=o.path;if(c===s)n.push({key:p,type:"item"});else if(c.startsWith(s+".")){let u=c.substring(s.length+1);if(!u.includes(".")&&!u.includes("["))n.push({key:p,type:"prop",prop:u});else{a=!1;break}}else{a=!1;break}}else if(o.type===b.INTERPOLATION&&o.parts.length===1){let c=o.parts[0];if(c.type===b.VARIABLE){let u=c.path;if(u===s)n.push({key:p,type:"item_string"});else if(u.startsWith(s+".")){let d=u.substring(s.length+1);if(!d.includes(".")&&!d.includes("["))n.push({key:p,type:"prop_string",prop:d});else{a=!1;break}}else{a=!1;break}}else{a=!1;break}}else{a=!1;break}}if(a){let l=new Array(t.length);if(n.length===3&&n[0].type==="prop"&&n[0].key==="id"&&n[1].type==="prop_string"&&n[1].key==="title"&&n[2].type==="prop"&&n[2].key==="completed")for(let p=0;p<t.length;p++){let o=t[p];l[p]={id:o.id,title:o.title!=null?String(o.title):"",completed:o.completed}}else for(let p=0;p<t.length;p++){let o=t[p],c={};for(let u of n)if(u.type==="literal")c[u.key]=u.value;else if(u.type==="item")c[u.key]=o;else if(u.type==="prop")c[u.key]=o[u.prop];else if(u.type==="item_string")c[u.key]=o!=null?String(o):"";else if(u.type==="prop_string"){let d=o[u.prop];c[u.key]=d!=null?String(d):""}l[p]=c}return l}}return null},Va=(e,t,r,s,i)=>{let n=[],a=e.body;if(a.type===b.OBJECT&&a.fast!==!1){let l=e.itemVar,p=e.indexVar;for(let o=0;o<i.length;o++){let c=i[o],u={},d={...s,[l]:c,...p&&{[p]:o}};d.__paths__||(d.__paths__=s.__paths__||{});let h=e.iterable.path||"";if(s&&s.__paths__&&h){let f=h.split("."),m=f[0];m in s.__paths__&&(h=s.__paths__[m],f.length>1&&(h+="."+f.slice(1).join(".")))}d.__paths__={...d.__paths__,[l]:`${h}[${o}]`,...p&&{[p]:o}};for(let f of a.properties){let m=f.parsedKey?C(f.parsedKey,t,r,d):f.key,g=f.value;if(g.type===b.LITERAL)u[m]=g.value;else if(g.type===b.VARIABLE){let y=g.path;if(y===l)u[m]=c;else if(y===p)u[m]=o;else if(y.startsWith(l+".")){let w=y.substring(l.length+1);!w.includes(".")&&!w.includes("[")?u[m]=c[w]:u[m]=M(y,r,{...s,[l]:c,...p&&{[p]:o}})}else u[m]=M(y,r,{...s,[l]:c,...p&&{[p]:o}})}else if(g.type===b.INTERPOLATION){let y=[];for(let w of g.parts)if(typeof w=="string")y.push(w);else if(w.type===b.VARIABLE){let _=w.path,A;if(_===l)A=c;else if(_===p)A=o;else if(_.startsWith(l+".")){let x=_.substring(l.length+1);!x.includes(".")&&!x.includes("[")?A=c[x]:A=M(_,r,{...s,[l]:c,...p&&{[p]:o}})}else A=M(_,r,{...s,[l]:c,...p&&{[p]:o}});y.push(A!=null?String(A):"")}else{let _={...s,[l]:c,...p&&{[p]:o}},A=C(w,t,r,_);y.push(A!=null?String(A):"")}u[m]=y.join("")}else{let y={...s,[l]:c,...p&&{[p]:o}};u[m]=C(g,t,r,y)}}n.push(u)}return n}return null},Da=(e,t,r)=>{let s=e.body;if(s.type===b.OBJECT&&s.properties.length===1&&s.properties[0].key==="$if item.visible"){let n=s.properties[0].value;if(n.type===b.CONDITIONAL&&n.conditions.length===1&&n.conditions[0].type===b.VARIABLE&&n.conditions[0].path==="item.visible"){let a=n.bodies[0];if(a.type===b.OBJECT&&a.properties.length===2){let l=a.properties[0],p=a.properties[1];if(l.key==="id"&&l.value.type===b.VARIABLE&&l.value.path==="item.id"&&p.key==="$if item.highlighted"&&p.value.type===b.CONDITIONAL){let o=[];for(let c=0;c<t.length;c++){let u=t[c];if(u.visible){let d={id:u.id};u.highlighted?(d.highlight=!0,d.message=`This item is highlighted: ${u.name}`):(d.highlight=!1,d.message=u.name),o.push(d)}}return o}}}}return null},ja=(e,t,r,s)=>{let i=C(e.iterable,t,r,s);if(!Array.isArray(i)){let o,c=!1;if(e.iterable.type===b.FUNCTION){c=!0;let d=e.iterable.args.map(h=>h.type===b.LITERAL?typeof h.value=="string"?`'${h.value}'`:String(h.value):h.type===b.VARIABLE?h.path:h.type===b.FUNCTION?`${h.name}(...)`:"?").join(", ");o=`${e.iterable.name}(${d})`}else o=e.iterable.path||"undefined";let u=`${e.itemVar}${e.indexVar?`, ${e.indexVar}`:""} in ${o}`;throw ls(u,i,c)}if(!e.indexVar){let o=Da(e,i,e.itemVar);if(o!==null)return o}if(!e.indexVar){let o=Pa(e,i);if(o!==null)return o}let n=Va(e,t,r,s,i);if(n!==null)return n;let a=[],l=e.iterable.path||"";if(s&&s.__paths__&&l){let o=l.split("."),c=o[0];c in s.__paths__&&(l=s.__paths__[c],o.length>1&&(l+="."+o.slice(1).join(".")))}let p=!1;e.body.type===b.ARRAY&&(e.body.items.length<=1?p=!1:p=e.body._shouldPreserveArray??=e.body.items.some(o=>o.type===b.OBJECT&&o.properties.some(c=>c.key.startsWith("$if ")||c.key.startsWith("$when "))));for(let o=0;o<i.length;o++){let c=e.indexVar?{...s,[e.itemVar]:i[o],[e.indexVar]:o}:{...s,[e.itemVar]:i[o]};c.__paths__||(c.__paths__=s.__paths__||{}),c.__paths__={...c.__paths__,[e.itemVar]:`${l}[${o}]`},e.indexVar&&(c.__paths__[e.indexVar]=o);let u=C(e.body,t,r,c);if(Array.isArray(u)&&u.length===1&&!p){let d=u[0];a.push(d===void 0?{}:d)}else a.push(u===void 0?{}:u)}return a},Ba=(e,t,r,s)=>{if(e.whenCondition)return null;if(e.properties.length===1){let i=e.properties[0],n=i.parsedKey?C(i.parsedKey,t,r,s):i.key,a=i.value;if(a.type===b.OBJECT&&a.properties.length<=10&&!a.whenCondition){let l={},p={},o=!0;for(let c of a.properties){let u=c.parsedKey?C(c.parsedKey,t,r,s):c.key,d=c.value;if(d.type===b.LITERAL)p[u]=d.value;else if(d.type===b.VARIABLE)p[u]=M(d.path,r,s);else if(d.type===b.INTERPOLATION){let h=[];for(let f of d.parts)if(typeof f=="string")h.push(f);else if(f.type===b.VARIABLE){let m=M(f.path,r,s);h.push(m!=null?String(m):"")}else{o=!1;break}if(!o)break;p[u]=h.join("")}else if(d.type===b.OBJECT&&d.properties.length<=5){let h={};for(let f of d.properties){let m=f.key,g=f.value;if(g.type===b.LITERAL)h[m]=g.value;else if(g.type===b.VARIABLE)h[m]=M(g.path,r,s);else if(g.type===b.INTERPOLATION){let y=[];for(let w of g.parts)if(typeof w=="string")y.push(w);else if(w.type===b.VARIABLE){let _=M(w.path,r,s);y.push(_!=null?String(_):"")}else{o=!1;break}if(!o)break;h[m]=y.join("")}else{o=!1;break}}if(!o)break;p[u]=h}else{o=!1;break}}if(o)return l[n]=p,l}}return null},Wa=(e,t,r,s)=>{let i=t.functions||t;if(e.whenCondition&&!Ae(e.whenCondition,i,r,s))return;let n=Ba(e,t,r,s);if(n!==null)return n;if(e.fast){let o={};for(let c of e.properties){let u=c.parsedKey?C(c.parsedKey,t,r,s):c.key,d=c.value;if(d.type===b.LITERAL)o[u]=d.value;else if(d.type===b.VARIABLE)o[u]=M(d.path,r,s);else if(d.type===b.INTERPOLATION){let h=[];for(let f of d.parts)if(typeof f=="string")h.push(f);else if(f.type===b.VARIABLE){let m=M(f.path,r,s);h.push(m!=null?String(m):"")}else{let m=C(f,t,r,s);h.push(m!=null?String(m):"")}o[u]=h.join("")}else o[u]=C(d,t,r,s)}return o}let a={},l=null,p=!1;for(let o of e.properties)if(!o.key.startsWith("$if ")&&!o.key.match(/^\$if\s+\w+.*:?$/)&&!o.key.startsWith("$elif")&&!o.key.startsWith("$else")&&!o.key.startsWith("$for ")){p=!0;break}for(let o of e.properties)if(o.key.startsWith("$if ")||o.key.match(/^\$if\s+\w+.*:?$/)){let c=C(o.value,t,r,s);if(!p&&c!==null&&c!==void 0)return Array.isArray(c)&&c.length===1?c[0]:c;typeof c=="object"&&c!==null&&!Array.isArray(c)&&Object.assign(a,c)}else if(o.key.startsWith("$for ")){if(e.properties.length===1)return C(o.value,t,r,s)}else{let c=o.value;if(c&&c.type===b.OBJECT&&c.properties){let u=c.properties.find(d=>d.key.startsWith("$for "));if(u){let d=C(u.value,t,r,s);d!==void 0&&(a[o.key]=d)}else{let d=C(o.value,t,r,s);d!==void 0&&(a[o.key]=d)}}else{let u=o.parsedKey?C(o.parsedKey,t,r,s):o.key,d=C(o.value,t,r,s);d!==void 0&&(a[u]=d)}}return a},hs={},Ma=(e,t,r,s)=>{let i=[];for(let n of e.items)if(n.type===b.LOOP){let a=C(n,t,r,s);Array.isArray(a)&&n.flatten!==!1?i.push(...a):i.push(a)}else{let a=C(n,t,r,s);a!==hs&&a!==void 0&&i.push(a)}return i},za=(e,t,r,s)=>{let{name:i,data:n,whenCondition:a}=e,l=t.partials||{},p=t.functions||t;if(a&&!Ae(a,p,r,s))return;if(!l[i])throw new Z(`Partial '${i}' is not defined`);let o=s._partialStack||[];if(o.includes(i))throw new Z(`Circular partial reference detected: ${i}`);let c=l[i],u=r,d={...s,_partialStack:[...o,i]};if(s){u={...r};for(let h of Object.keys(s))h.startsWith("_")||(u[h]=s[h])}if(n){let h=C(n,t,r,s);u={...u,...h}}return C(c,t,u,d)},Fa=(e,t,r,s)=>{let{path:i}=e,n=i.split("."),a=n[0],l=n.slice(1);if(!s||!(a in s))throw new Z(`Path reference '#{${i}}' refers to '${a}' which is not a loop variable in the current scope`);if(s.__paths__||(s.__paths__={}),!(a in s.__paths__))throw new Z(`Path reference '#{${i}}' cannot be resolved - path tracking may not be initialized properly`);let p=s.__paths__[a];if(typeof p=="number"){if(l.length>0)throw new Z(`Path reference '#{${i}}' - cannot access properties on index variable '${a}'`);return String(p)}return l.length>0&&(p+="."+l.join(".")),p},Dt=Ia;var Ua=/\$\{([^}]*)\}/g,Ka=/#\{([^}]*)\}/g,ys=(e,t={})=>{let r=e.match(/^(\w+)\((.*)\)$/);if(!r)return{isFunction:!1};let[,s,i]=r,n=Ha(i,t);return{isFunction:!0,type:b.FUNCTION,name:s,args:n}},Ha=(e,t={})=>e.trim()?Ga(e).map(s=>qa(s.trim(),t)):[],Ga=e=>{let t=[],r="",s=0,i=!1,n="";for(let a=0;a<e.length;a++){let l=e[a],p=a>0?e[a-1]:"";!i&&(l==='"'||l==="'")?(i=!0,n=l,r+=l):i&&l===n&&p!=="\\"?(i=!1,n="",r+=l):!i&&l==="("?(s++,r+=l):!i&&l===")"?(s--,r+=l):!i&&l===","&&s===0?(t.push(r),r=""):r+=l}return r&&t.push(r),t},qa=(e,t={})=>{if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return{type:b.LITERAL,value:e.slice(1,-1)};if(/^-?\d+(\.\d+)?$/.test(e))return{type:b.LITERAL,value:parseFloat(e)};if(e==="true")return{type:b.LITERAL,value:!0};if(e==="false")return{type:b.LITERAL,value:!1};if(e==="null")return{type:b.LITERAL,value:null};let r=ys(e,t);if(r.isFunction)return{type:r.type,name:r.name,args:r.args};let s=e.trim(),i=[{op:" + ",type:"ADD"},{op:" - ",type:"SUBTRACT"}],n=-1,a=null;for(let{op:l,type:p}of i){let o=0;for(;o<s.length;){let c=me(s.substring(o),l);if(c===-1)break;let u=o+c;u>n&&(n=u,a={op:l,type:p}),o=u+l.length}}if(n!==-1)try{return J(s,t)}catch{return{type:b.VARIABLE,path:s}}return{type:b.VARIABLE,path:s}},gs=/^\w+\(.*\)$/,Ja=/\s[+\-*/%]\s|\|\||&&|\?\?|.*\?.*:/,Ya=e=>{if(!(!e||e.trim()===""||gs.test(e))&&Ja.test(e))throw e.includes("?")&&e.includes(":")?new E(`Complex expressions not supported in variable replacements - consider calculating the value in your data instead. Offending expression: "${e}"`):e.includes("||")||e.includes("&&")||e.includes("??")?new E(`Logical operators not supported in variable replacements - consider calculating the value in your data instead (operators like ||, &&, ?? are not supported). Offending expression: "${e}"`):new E(`Arithmetic expressions not supported in variable replacements - consider calculating '${e}' in your data instead (expressions with +, -, *, /, % are not supported). Offending expression: "${e}"`)},ms=e=>{let t=e.trim();if(gs.test(t))throw new E(`Functions are not supported in path references - path references can only refer to loop variables. Offending expression: "#{${e}}"`);if(t.includes("["))throw new E(`Array indices not supported in path references - use simple variable names or properties. Offending expression: "#{${e}}"`);if(/[+\-*/%]/.test(t))throw new E(`Arithmetic expressions not supported in path references - path references can only refer to loop variables. Offending expression: "#{${e}}"`);if(/\|\||&&/.test(t))throw new E(`Logical operators not supported in path references - path references can only refer to loop variables. Offending expression: "#{${e}}"`);if(t.includes("?")&&t.includes(":"))throw new E(`Complex expressions not supported in path references - path references can only refer to loop variables. Offending expression: "#{${e}}"`);return{type:b.PATH_REFERENCE,path:t}},Ne=(e,t={})=>{let r=e.trim();Ya(r);let s=ys(r,t);if(s.isFunction)return{type:s.type,name:s.name,args:s.args};if(r.includes("[")&&!/[\s+\-*/%|&?:]/.test(r)){let i=0;for(let n of r)n==="["?i++:n==="]"&&i--;if(i!==0)throw new Error("Invalid array index syntax")}return{type:b.VARIABLE,path:r}},jt=(e,t={})=>{let r=e,s=[];(e.includes("\\${")||e.includes("\\#{"))&&(r=e.replace(/\\\\(\$\{[^}]*\})/g,"\\DOUBLE_ESC_VAR$1"),r=r.replace(/\\\\(#\{[^}]*\})/g,"\\DOUBLE_ESC_PATH$1"),r=r.replace(/\\(\$\{[^}]*\})/g,(o,c)=>{let u=`__ESCAPED_${s.length}__`;return s.push(c),u}),r=r.replace(/\\(#\{[^}]*\})/g,(o,c)=>{let u=`__ESCAPED_${s.length}__`;return s.push(c),u}),r=r.replace(/\\DOUBLE_ESC_VAR/g,"\\"),r=r.replace(/\\DOUBLE_ESC_PATH/g,"\\"));let i=[...r.matchAll(Ua)],n=[...r.matchAll(Ka)],a=[...i.map(o=>({match:o,type:"variable"})),...n.map(o=>({match:o,type:"pathref"}))].sort((o,c)=>o.match.index-c.match.index);if(a.length===0){let o=r;for(let c=0;c<s.length;c++)o=o.replace(`__ESCAPED_${c}__`,s[c]);return{type:b.LITERAL,value:o}}if(a.length===1&&a[0].match[0]===r&&s.length===0){let{match:o,type:c}=a[0];try{return c==="variable"?Ne(o[1],t):ms(o[1])}catch(u){if(u.message==="Invalid array index syntax")return{type:b.LITERAL,value:r};throw u}}let l=[],p=0;for(let{match:o,type:c}of a){let[u,d]=o,h=o.index;if(h>p){let f=r.substring(p,h);for(let m=0;m<s.length;m++)f=f.replace(`__ESCAPED_${m}__`,s[m]);f&&l.push(f)}try{let f;c==="variable"?f=Ne(d.trim(),t):f=ms(d.trim()),l.push(f)}catch(f){if(f.message==="Invalid array index syntax")l.push(u);else throw f}p=h+u.length}if(p<r.length){let o=r.substring(p);for(let c=0;c<s.length;c++)o=o.replace(`__ESCAPED_${c}__`,s[c]);o&&l.push(o)}return{type:b.INTERPOLATION,parts:l}};var ue=(e,t)=>typeof e=="string"?jt(e,t):typeof e=="object"&&e!==null?Array.isArray(e)?Za(e,t):Qa(e,t):{type:b.LITERAL,value:e},Xa=e=>{let{$each:t,...r}=e;if(typeof t!="string")throw new E("$each value must be a non-empty string");let s=t.trim();if(s==="")throw new E("$each value must be a non-empty string");if(Object.keys(r).length===0)throw new E("Empty $each body not allowed");if(r.$partial!==void 0)throw new E("Cannot use $partial with $each at the same level. Wrap $partial in a parent object if you need conditionals.");return{[`$for ${s}`]:r}},Za=(e,t)=>{let r=[],s=!1;for(let i=0;i<e.length;i++){let n=e[i];if(typeof n=="object"&&n!==null&&!Array.isArray(n)){if(n.$each!==void 0)try{let p=Xa(n),o=Object.keys(p);if(o.length===1&&/^\$for(?::\w+)?\s/.test(o[0])){let c=vs(o[0],p[o[0]],t,!0);r.push(c),s=!0;continue}}catch(p){throw p instanceof E?p:new E(p.message)}let l=Object.keys(n);if(l.length===1&&/^\$for(?::\w+)?\s/.test(l[0])){let p=vs(l[0],n[l[0]],t);r.push(p),s=!0;continue}}let a=ue(n,t);r.push(a),(a.type===b.FUNCTION||a.type===b.CONDITIONAL||a.type===b.LOOP||a.type===b.PARTIAL||a.type===b.OBJECT&&!a.fast||a.type===b.ARRAY&&!a.fast)&&(s=!0)}return{type:b.ARRAY,items:r,fast:!s}},Qa=(e,t)=>{let r=[],s=!1,i=null,n=Object.entries(e),a=0;if(e.$partial!==void 0){if(typeof e.$partial!="string")throw new E("$partial value must be a string");if(e.$partial.trim()==="")throw new E("$partial value cannot be an empty string");let p=["$if","$elif","$else","$for"],o=[];for(let[y]of n)for(let w of p)if(y===w||y.startsWith(w+" ")||y.startsWith(w+"#")){o.push(w);break}if(o.length>0)throw new E(`Cannot use $partial with ${o.join(", ")} at the same level. Wrap $partial in a parent object if you need conditionals.`);let{$partial:c,$when:u,...d}=e,h={},f=!1;for(let[y,w]of Object.entries(d)){let _=y;(y.startsWith("\\$")||y.startsWith("$$"))&&(_=y.slice(1)),h[_]=w,f=!0}let m=null;if(f&&(m=ue(h,t),m.type===b.OBJECT)){let y=!1;for(let w of m.properties)if(w.value.type===b.VARIABLE||w.value.type===b.INTERPOLATION||w.value.type===b.FUNCTION||w.value.type===b.CONDITIONAL||w.value.type===b.OBJECT&&!w.value.fast||w.value.type===b.ARRAY&&!w.value.fast){y=!0;break}y&&(m.fast=!1)}let g={type:b.PARTIAL,name:c,data:m};if(u!==void 0){let y;if(typeof u=="string"){if(u.trim()==="")throw new E("Empty condition expression after '$when'");y=J(u,t)}else y={type:b.LITERAL,value:u};g.whenCondition=y}return g}for(let[p,o]of n)if(p==="$when"){if(i!==null)throw new E("Multiple '$when' directives on the same object are not allowed");if(o==null)throw new E("Missing condition expression after '$when'");let c=typeof o=="string"?o:JSON.stringify(o);if(c.trim()==="")throw new E("Empty condition expression after '$when'");i=J(c,t),s=!0}else if(p.startsWith("$when#")||p.startsWith("$when "))throw new E("'$when' does not support ID syntax or inline conditions - use '$when' as a property");for(;a<n.length;){let[p,o]=n[a];if(p==="$when"){a++;continue}if(p==="$each")throw new E("$each can only be used inside arrays");if(p.startsWith("$if ")||p.match(/^\$if#\w+\s/)||p.match(/^\$if\s+\w+.*:$/)){let c=eo(n,a,t);r.push({key:p,value:c.node}),s=!0,a=c.nextIndex}else if(/^\$for(?::\w+)?\s/.test(p)){let c=p.match(/^\$for(?::(\w+))?\s/)?.[1]||"",u=c?`:${c}`:"";throw new E(`$for loops must be inside arrays - use '- $for${u} item in items:' instead of '$for${u} item in items:'. For cleaner object generation syntax, consider using $each.`)}else{if(p.startsWith("$elif ")||p.startsWith("$else"))throw new E(`'${p.split(" ")[0]}' without matching '$if'`);if(p==="$if"||p==="$if:")throw new E("Missing condition expression after '$if'");{let c=ue(o,t);(c.type===b.FUNCTION||c.type===b.CONDITIONAL||c.type===b.PARTIAL||c.type===b.OBJECT&&!c.fast||c.type===b.ARRAY&&!c.fast)&&(s=!0);let u=jt(p,t),d={key:p,value:c};(u.type!==b.LITERAL||u.value!==p)&&(d.parsedKey=u),r.push(d),a++}}}let l={type:b.OBJECT,properties:r,fast:!s};return i&&(l.whenCondition=i),l},eo=(e,t,r={})=>{let s=[],i=[],n=t,[a,l]=e[n],p=null,o;if(a.startsWith("$if#")){let u=a.match(/^\$if#(\w+)\s+(.+)$/);if(u)p=u[1],o=u[2];else throw new E(`Invalid conditional syntax: ${a}`)}else o=a.substring(4),o.endsWith(":")&&(o=o.slice(0,-1).trim());Vt(o);let c=J(o,r);for(s.push(c),i.push(ue(l,r)),n++;n<e.length;){let[u,d]=e[n],h=!1,f;if(p?u.startsWith(`$elif#${p} `)?(f=u.substring(`$elif#${p} `.length),f.endsWith(":")&&(f=f.slice(0,-1).trim()),h=!0):(u===`$else#${p}`||u===`$else#${p}:`)&&(h=!0,f=null):u.startsWith("$elif ")?(f=u.substring(6),f.endsWith(":")&&(f=f.slice(0,-1).trim()),h=!0):(u==="$else"||u==="$else:")&&(h=!0,f=null),h){if(f===null)s.push(null);else{Vt(f);let m=J(f,r);s.push(m)}if(i.push(ue(d,r)),n++,f===null)break}else break}return{node:{type:b.CONDITIONAL,conditions:s,bodies:i,id:p},nextIndex:n}},J=(e,t={})=>{if(e=e.trim(),e.startsWith("(")&&e.endsWith(")")){let o=e.slice(1,-1),c=0,u=!0;for(let d=0;d<o.length;d++)if(o[d]==="("?c++:o[d]===")"&&c--,c<0){u=!1;break}if(u&&c===0)return J(o,t)}let r=me(e,"||");if(r!==-1)return{type:b.BINARY,op:V.OR,left:J(e.substring(0,r).trim(),t),right:J(e.substring(r+2).trim(),t)};let s=me(e,"&&");if(s!==-1)return{type:b.BINARY,op:V.AND,left:J(e.substring(0,s).trim(),t),right:J(e.substring(s+2).trim(),t)};let i=[{op:">=",type:V.GTE},{op:"<=",type:V.LTE},{op:"==",type:V.EQ},{op:"!=",type:V.NEQ},{op:">",type:V.GT},{op:"<",type:V.LT},{op:" in ",type:V.IN}];for(let{op:o,type:c}of i){let u=me(e,o);if(u!==-1)return{type:b.BINARY,op:c,left:J(e.substring(0,u).trim(),t),right:J(e.substring(u+o.length).trim(),t)}}let n=-1,a=null,l=[{op:" + ",type:V.ADD},{op:" - ",type:V.SUBTRACT}];for(let{op:o,type:c}of l){let u=0;for(;u<e.length;){let d=me(e.substring(u),o);if(d===-1)break;let h=u+d;h>n&&(n=h,a={op:o,type:c}),u=h+o.length}}if(n!==-1&&a)return{type:b.BINARY,op:a.type,left:J(e.substring(0,n).trim(),t),right:J(e.substring(n+a.op.length).trim(),t)};let p=[" * "," / "," % "];for(let o of p)if(me(e,o)!==-1)throw new E(`Arithmetic operations are not allowed in conditionals: "${o}"`);return e.startsWith("!")?{type:b.UNARY,op:Re.NOT,operand:J(e.substring(1).trim(),t)}:bs(e,t)},me=(e,t)=>{let r=0,s=0;for(;s<=e.length-t.length;){if(e[s]==="(")r++;else if(e[s]===")")r--;else if(r===0&&e.substring(s,s+t.length)===t)return s;s++}return-1},to=e=>{if(e=e.trim(),e==="true")return{type:b.LITERAL,value:!0};if(e==="false")return{type:b.LITERAL,value:!1};if(e==="null")return{type:b.LITERAL,value:null};if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return{type:b.LITERAL,value:e.slice(1,-1)};if(e==='""'||e==="''")return{type:b.LITERAL,value:""};if(e==="{}")return{type:b.LITERAL,value:{}};if(e==="[]")return{type:b.LITERAL,value:[]};let t=Number(e);return!isNaN(t)&&isFinite(t)?{type:b.LITERAL,value:t}:{type:b.VARIABLE,path:e}},bs=(e,t)=>{let r=e.trim();if(r.match(/^(\w+)\((.*)\)$/))return Ne(r,t);let i=to(r);if(i.type===b.LITERAL)return i;if(/^[a-zA-Z_$][\w.$]*$/.test(r))return{type:b.VARIABLE,path:r};try{return Ne(r,t)}catch(n){if(n.message&&n.message.includes("not supported"))return i;throw n}},ro=(e,t=!1)=>{let r=t?"$each":"$for";try{os(e)}catch(s){if(s instanceof E&&t){let i=s.message.replace(/\$for/g,"$each");throw new E(i.replace("Parse Error: ",""))}throw s}},vs=(e,t,r,s=!1)=>{let i=/^\$for(?::(\w+))?\s+(.+)$/,n=e.match(i);if(!n){let g=s?"$each":"$for";throw new E(`Invalid loop syntax (got: '${e.replace("$for",g)}')`)}let a=n[1],l=n[2].trim();ro(l,s);let p=l.match(/^(.+?)\s+in\s+(.+)$/);if(!p){let g=s?"$each":"$for";throw new E(`Invalid loop syntax - missing 'in' keyword (got: '${g} ${l}')`)}let o=p[1].trim(),c=p[2].trim(),u,d=null;if(o.includes(",")){let g=o.split(",").map(y=>y.trim());if(g.length!==2)throw new E(`Invalid loop variables: ${o}. Expected format: "item" or "item, index"`);u=g[0],d=g[1]}else u=o;let h=["this","undefined","null","true","false"];if(h.includes(u))throw new E(`Reserved variable name: ${u}`);if(d&&h.includes(d))throw new E(`Reserved variable name: ${d}`);let f=bs(c,r),m=ue(t,r);return{type:b.LOOP,itemVar:u,indexVar:d,iterable:f,body:m,flatten:a!=="nested"}};var so=(e,t={})=>{let{functions:r={}}=t;return ue(e,r)},qe=so;var Bt={};R(Bt,{now:()=>io});var io=()=>Date.now();var no=(e,t,r={})=>{let{functions:s={},partials:i={}}=r,n={...Bt,...s},a=qe(e,{functions:n}),l={};for(let[p,o]of Object.entries(i))l[p]=qe(o,{functions:n});return Dt(a,t,{functions:n,partials:l})},Wt=no;function ws(e,t){return t.reduce((r,s)=>(s in e&&(r[s]=e[s]),r),{})}var ao=()=>Object.freeze({formValues:{},tooltipState:{open:!1,x:0,y:0,content:""}}),_s=(e,t,r=void 0)=>{if(!t)return;let s=t.split(/[\[\].]/).filter(n=>n!==""),i=e;for(let n of s){if(i==null||!(n in i))return r;i=i[n]}return i},oo=(e,t,r)=>{let s=t.split(/[\[\].]/).filter(n=>n!=="");t.includes("[")&&t in e&&delete e[t];let i=e;for(let n=0;n<s.length-1;n++){let a=s[n];if(!(a in i)||typeof i[a]!="object"||i[a]===null){let l=s[n+1],p=/^\d+$/.test(l);i[a]=p?[]:{}}i=i[a]}return i[s[s.length-1]]=r,e},lo=["id","class","style","slot","form","defaultValues","context","autofocus","key"],po=(e={})=>Object.entries(e).filter(([t])=>!lo.includes(t)).map(([t,r])=>`${t}=${r}`).join(" "),Je=({props:e})=>{let{form:t={}}=e,{context:r}=e;return r?Wt(t,r):t},co=({state:e,props:t})=>{let r=po(t),s=Je({state:e,props:t}),i=structuredClone(s.fields||[]);return i.forEach(n=>{let a=_s(e.formValues,n.name);if(["read-only-text"].includes(n.inputType)&&(n.defaultValue=a),["select"].includes(n.inputType)){let l=t?.defaultValues;l&&l[n.name]!==void 0&&(n.selectedValue=l[n.name])}if(n.inputType==="image"){let l=n.src;n.imageSrc=l&&l.trim()?l:null,n.placeholderText=n.placeholder||"No Image"}if(n.inputType==="waveform"){let l=n.waveformData;n.waveformData=l||null,n.placeholderText=n.placeholder||"No Waveform"}}),{key:t?.key,containerAttrString:r,title:s?.title||"",description:s?.description||"",fields:i,actions:t?.form?.actions||{buttons:[]},formValues:e.formValues,tooltipState:e.tooltipState}},uo=({state:e})=>e,fo=({state:e,props:t})=>{let r=Je({state:e,props:t});return ws(e.formValues,r.fields.map(s=>s.name))},ho=({state:e},t)=>_s(e.formValues,t),mo=({state:e},t={})=>{e.formValues=t.formValues||{}},yo=({state:e,props:t},r={})=>{let{name:s,value:i}=r;if(!s)return;oo(e.formValues,s,i);let n=Je({state:e,props:t}),a=ws(e.formValues,n.fields.map(l=>l.name));e.formValues=a},go=({state:e},t={})=>{let{x:r,y:s,content:i}=t;e.tooltipState={open:!0,x:r,y:s,content:i}},vo=({state:e})=>{e.tooltipState={...e.tooltipState,open:!1}};var xs={refs:{formContainer:{eventListeners:{keydown:{handler:"handleKeyDown"}}},"action*":{eventListeners:{click:{handler:"handleActionClick"}}},"tooltipIcon*":{eventListeners:{mouseenter:{handler:"handleTooltipMouseEnter"},mouseleave:{handler:"handleTooltipMouseLeave"}}},"field*":{eventListeners:{"value-input":{handler:"handleInputChange"},"value-change":{handler:"handleInputChange"},"add-option-click":{handler:"handleSelectAddOption"}}},"image*":{eventListeners:{click:{handler:"handleImageClick"},contextmenu:{handler:"handleImageClick"}}},"waveform*":{eventListeners:{click:{handler:"handleWaveformClick"},contextmenu:{handler:"handleWaveformClick"}}}},template:{type:9,items:[{type:8,properties:[{key:"rtgl-view#formContainer w=f p=md g=lg ${containerAttrString}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view g=sm w=f",value:{type:9,items:[{type:8,properties:[{key:"$if title",value:{type:6,conditions:[{type:1,path:"title"}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-text s=lg",value:{type:1,path:"title"}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:"$if description",value:{type:6,conditions:[{type:1,path:"description"}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-text c=mu-fg",value:{type:1,path:"description"}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}}],fast:!1},{type:8,properties:[{key:"rtgl-view g=lg w=f",value:{type:9,items:[{type:7,itemVar:"field",indexVar:"i",iterable:{type:1,path:"fields"},body:{type:9,items:[{type:8,properties:[{key:"rtgl-view g=md w=f",value:{type:9,items:[{type:8,properties:[{key:"$if field.label || field.description",value:{type:6,conditions:[{type:4,op:7,left:{type:1,path:"field.label"},right:{type:1,path:"field.description"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-view g=sm",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view d=h g=md av=c",value:{type:9,items:[{type:8,properties:[{key:"$if field.label",value:{type:6,conditions:[{type:1,path:"field.label"}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-text",value:{type:1,path:"field.label"}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:"$if field.label && field.tooltip",value:{type:6,conditions:[{type:4,op:6,left:{type:1,path:"field.label"},right:{type:1,path:"field.tooltip"}}],bodies:[{type:9,items:[{type:8,properties:[{key:'rtgl-svg#tooltipIcon${i} data-field-name=${field.name} svg="info" wh=16 c=mu-fg cur=help ml=xs',value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-svg#tooltipIcon",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"},' svg="info" wh=16 c=mu-fg cur=help ml=xs']}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}}],fast:!1},{type:8,properties:[{key:"$if field.description",value:{type:6,conditions:[{type:1,path:"field.description"}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-text s=sm c=mu-fg",value:{type:1,path:"field.description"}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}}],fast:!1}],fast:!1}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "read-only-text"',value:{type:6,conditions:[{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"read-only-text"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-text s=sm",value:{type:1,path:"field.defaultValue"}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "input-text"',value:{type:6,conditions:[{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"input-text"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-input#field${i} data-field-name=${field.name} w=f min=${field.min} max=${field.max} step=${field.step} data-testid=${field.testId}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-input#field",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"}," w=f min=",{type:1,path:"field.min"}," max=",{type:1,path:"field.max"}," step=",{type:1,path:"field.step"}," data-testid=",{type:1,path:"field.testId"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "input-number"',value:{type:6,conditions:[{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"input-number"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-input-number#field${i} data-field-name=${field.name} w=f data-testid=${field.testId}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-input-number#field",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"}," w=f data-testid=",{type:1,path:"field.testId"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "input-textarea"',value:{type:6,conditions:[{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"input-textarea"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-textarea#field${i} data-field-name=${field.name} w=f rows=${field.rows} data-testid=${field.testId}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-textarea#field",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"}," w=f rows=",{type:1,path:"field.rows"}," data-testid=",{type:1,path:"field.testId"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "popover-input"',value:{type:6,conditions:[{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"popover-input"}}],bodies:[{type:9,items:[{type:8,properties:[{key:'rtgl-popover-input#field${i} data-field-name=${field.name} label="${field.label}" data-testid=${field.testId}',value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-popover-input#field",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"},' label="',{type:1,path:"field.label"},'" data-testid=',{type:1,path:"field.testId"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "select"',value:{type:6,conditions:[{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"select"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-select#field${i} data-field-name=${field.name} key=${key} w=f :options=fields[${i}].options ?no-clear=fields[${i}].noClear :addOption=fields[${i}].addOption :selectedValue=#{field.selectedValue} :placeholder=#{field.placeholder} data-testid=${field.testId}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-select#field",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"}," key=",{type:1,path:"key"}," w=f :options=fields[",{type:1,path:"i"},"].options ?no-clear=fields[",{type:1,path:"i"},"].noClear :addOption=fields[",{type:1,path:"i"},"].addOption :selectedValue=",{type:11,path:"field.selectedValue"}," :placeholder=",{type:11,path:"field.placeholder"}," data-testid=",{type:1,path:"field.testId"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "color-picker"',value:{type:6,conditions:[{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"color-picker"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-color-picker#field${i} data-field-name=${field.name} key=${key} data-testid=${field.testId}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-color-picker#field",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"}," key=",{type:1,path:"key"}," data-testid=",{type:1,path:"field.testId"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "slider"',value:{type:6,conditions:[{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"slider"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-slider#field${i} data-field-name=${field.name} key=${key} w=f min=${field.min} max=${field.max} step=${field.step} data-testid=${field.testId}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-slider#field",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"}," key=",{type:1,path:"key"}," w=f min=",{type:1,path:"field.min"}," max=",{type:1,path:"field.max"}," step=",{type:1,path:"field.step"}," data-testid=",{type:1,path:"field.testId"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "slider-input"',value:{type:6,conditions:[{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"slider-input"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-slider-input#field${i} data-field-name=${field.name} w=f min=${field.min} max=${field.max} step=${field.step} data-testid=${field.testId}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-slider-input#field",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"}," w=f min=",{type:1,path:"field.min"}," max=",{type:1,path:"field.max"}," step=",{type:1,path:"field.step"}," data-testid=",{type:1,path:"field.testId"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "image" && field.imageSrc',value:{type:6,conditions:[{type:4,op:6,left:{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"image"}},right:{type:1,path:"field.imageSrc"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-image#image${i} data-field-name=${field.name} src=${field.imageSrc} w=${field.width} h=${field.height} cur=pointer data-testid=${field.testId}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-image#image",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"}," src=",{type:1,path:"field.imageSrc"}," w=",{type:1,path:"field.width"}," h=",{type:1,path:"field.height"}," cur=pointer data-testid=",{type:1,path:"field.testId"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "image" && !field.imageSrc',value:{type:6,conditions:[{type:4,op:6,left:{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"image"}},right:{type:5,op:0,operand:{type:1,path:"field.imageSrc"}}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-view#image${i} data-field-name=${field.name} w=${field.width} h=${field.height} bc=ac bw=sm ah=c av=c cur=pointer p=md data-testid=${field.testId}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text c=mu-fg ta=c",value:{type:1,path:"field.placeholderText"}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view#image",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"}," w=",{type:1,path:"field.width"}," h=",{type:1,path:"field.height"}," bc=ac bw=sm ah=c av=c cur=pointer p=md data-testid=",{type:1,path:"field.testId"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "waveform" && field.waveformData',value:{type:6,conditions:[{type:4,op:6,left:{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"waveform"}},right:{type:1,path:"field.waveformData"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-waveform#waveform${i} data-field-name=${field.name} :waveformData=fields[${i}].waveformData w=${field.width} h=${field.height} cur=pointer data-testid=${field.testId}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-waveform#waveform",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"}," :waveformData=fields[",{type:1,path:"i"},"].waveformData w=",{type:1,path:"field.width"}," h=",{type:1,path:"field.height"}," cur=pointer data-testid=",{type:1,path:"field.testId"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "waveform" && !field.waveformData',value:{type:6,conditions:[{type:4,op:6,left:{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"waveform"}},right:{type:5,op:0,operand:{type:1,path:"field.waveformData"}}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-view#waveform${i} data-field-name=${field.name} w=${field.width} h=${field.height} bc=ac bw=sm ah=c av=c cur=pointer p=md data-testid=${field.testId}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text c=mu-fg ta=c",value:{type:1,path:"field.placeholder"}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view#waveform",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"}," w=",{type:1,path:"field.width"}," h=",{type:1,path:"field.height"}," bc=ac bw=sm ah=c av=c cur=pointer p=md data-testid=",{type:1,path:"field.testId"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:'$if field.inputType == "slot"',value:{type:6,conditions:[{type:4,op:0,left:{type:1,path:"field.inputType"},right:{type:0,value:"slot"}}],bodies:[{type:9,items:[{type:8,properties:[{key:'slot#fieldSlot${i} data-field-name=${field.name} name=${field.slot} style="display: contents;"',value:{type:0,value:null},parsedKey:{type:2,parts:["slot#fieldSlot",{type:1,path:"i"}," data-field-name=",{type:1,path:"field.name"}," name=",{type:1,path:"field.slot"},' style="display: contents;"']}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}}],fast:!1}],fast:!1}}],fast:!1}}],fast:!1},{type:8,properties:[{key:"rtgl-view g=sm w=f",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view d=h ah=e g=sm w=f",value:{type:9,items:[{type:7,itemVar:"button",indexVar:"i",iterable:{type:1,path:"actions.buttons"},body:{type:9,items:[{type:8,properties:[{key:"rtgl-button#action${i} data-action-id=${button.id} data-testid=${button.testId}",value:{type:1,path:"button.content"},parsedKey:{type:2,parts:["rtgl-button#action",{type:1,path:"i"}," data-action-id=",{type:1,path:"button.id"}," data-testid=",{type:1,path:"button.testId"}]}}],fast:!0}],fast:!0}}],fast:!1}}],fast:!1}],fast:!1}}],fast:!1},{type:8,properties:[{key:'rtgl-tooltip ?open=${tooltipState.open} x=${tooltipState.x} y=${tooltipState.y} place="t" content="${tooltipState.content}"',value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-tooltip ?open=",{type:1,path:"tooltipState.open"}," x=",{type:1,path:"tooltipState.x"}," y=",{type:1,path:"tooltipState.y"},' place="t" content="',{type:1,path:"tooltipState.content"},'"']}}],fast:!0}],fast:!1},parsedKey:{type:2,parts:["rtgl-view#formContainer w=f p=md g=lg ",{type:1,path:"containerAttrString"}]}}],fast:!1}],fast:!1}};var zt={};R(zt,{closeAll:()=>So,handleCancel:()=>_o,handleConfirm:()=>wo,handleDialogClose:()=>bo,handleDropdownClose:()=>xo,handleDropdownItemClick:()=>Ao,showAlert:()=>Eo,showConfirm:()=>ko,showDropdownMenu:()=>$o});var bo=(e,t)=>{let{store:r,render:s}=e;r.closeAll(),s()},wo=(e,t)=>{let{store:r,render:s,globalUI:i}=e;r.closeAll(),s(),i.emit("event",!0)},_o=(e,t)=>{let{store:r,render:s,globalUI:i}=e;r.closeAll(),s(),i.emit("event",!1)},xo=(e,t)=>{let{store:r,render:s,globalUI:i}=e;r.closeAll(),s(),i.emit("event",null)},Ao=(e,t)=>{let{store:r,render:s,globalUI:i}=e,n=t._event,{index:a,item:l}=n.detail;r.closeAll(),s(),i.emit("event",{index:a,item:l})},Eo=(e,t)=>{let{store:r,render:s}=e,i=t;r.selectIsOpen()&&(r.closeAll(),s()),r.setAlertConfig(i),s()},ko=async(e,t)=>{let{store:r,render:s,globalUI:i}=e,n=t;return r.selectIsOpen()&&(r.closeAll(),s()),r.setConfirmConfig(n),s(),new Promise(a=>{i.once("event",l=>{a(l)})})},$o=async(e,t)=>{let{store:r,render:s,globalUI:i}=e,n=t;return r.selectIsOpen()&&(r.closeAll(),s()),r.setDropdownConfig(n),s(),new Promise(a=>{i.once("event",l=>{a(l)})})},So=e=>{let{store:t,render:r}=e;t.selectIsOpen()&&(t.closeAll(),r())};var As={componentName:"rtgl-global-ui",propsSchema:{type:"object",properties:{}},events:[],methods:{type:"object",properties:{}}};var Ft={};R(Ft,{closeAll:()=>Lo,createInitialState:()=>Co,selectConfig:()=>Ro,selectDropdownConfig:()=>No,selectIsOpen:()=>Vo,selectUiType:()=>Po,selectViewData:()=>Do,setAlertConfig:()=>Io,setConfirmConfig:()=>Oo,setDropdownConfig:()=>To});var Co=()=>Object.freeze({isOpen:!1,uiType:"dialog",config:{status:void 0,title:"",message:"",confirmText:"OK",cancelText:"Cancel",mode:"alert"},dropdownConfig:{items:[],x:0,y:0,place:"bs"}}),Io=({state:e},t={})=>{if(!t.message)throw new Error("message is required for showAlert");e.config={status:t.status||void 0,title:t.title||"",message:t.message,confirmText:t.confirmText||"OK",cancelText:"",mode:"alert"},e.uiType="dialog",e.isOpen=!0},Oo=({state:e},t={})=>{if(!t.message)throw new Error("message is required for showConfirm");e.config={status:t.status||void 0,title:t.title||"",message:t.message,confirmText:t.confirmText||"Yes",cancelText:t.cancelText||"Cancel",mode:"confirm"},e.uiType="dialog",e.isOpen=!0},To=({state:e},t={})=>{if(!t.items||!Array.isArray(t.items))throw new Error("items array is required for showDropdown");e.dropdownConfig={items:t.items,x:t.x||0,y:t.y||0,place:t.place||"bs"},e.uiType="dropdown",e.isOpen=!0},Lo=({state:e})=>{e.isOpen=!1,e.uiType="dialog"},Ro=({state:e})=>e.config,No=({state:e})=>e.dropdownConfig,Po=({state:e})=>e.uiType,Vo=({state:e})=>e.isOpen,Do=({state:e})=>({isOpen:e.isOpen,uiType:e.uiType,config:e.config,dropdownConfig:{items:e.dropdownConfig?.items||[],x:e.dropdownConfig?.x||0,y:e.dropdownConfig?.y||0,place:e.dropdownConfig?.place||"bs"},isDialogOpen:e.isOpen&&e.uiType==="dialog",isDropdownOpen:e.isOpen&&e.uiType==="dropdown"});var Es={refs:{dialog:{eventListeners:{close:{handler:"handleDialogClose"}}},confirmButton:{eventListeners:{click:{handler:"handleConfirm"}}},cancelButton:{eventListeners:{click:{handler:"handleCancel"}}},dropdownMenu:{eventListeners:{close:{handler:"handleDropdownClose"},"item-click":{handler:"handleDropdownItemClick"}}}},template:{type:9,items:[{type:8,properties:[{key:"rtgl-dialog#dialog ?open=${isDialogOpen} s=sm",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view slot=content g=lg p=lg",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view d=h g=md",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view d=h ah=c av=c g=md",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view g=md",value:{type:0,value:null}}],fast:!0},{type:8,properties:[{key:"rtgl-view h=24 av=c",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text s=lg",value:{type:1,path:"config.title"}}],fast:!0}],fast:!0}}],fast:!0},{type:8,properties:[{key:"rtgl-text",value:{type:1,path:"config.message"}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0}}],fast:!0},{type:8,properties:[{key:"rtgl-view d=h g=md mt=lg w=f ah=e",value:{type:9,items:[{type:8,properties:[{key:"$if config.mode == 'confirm'",value:{type:6,conditions:[{type:4,op:0,left:{type:1,path:"config.mode"},right:{type:0,value:"confirm"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-button#cancelButton v=se",value:{type:1,path:"config.cancelText"}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:"rtgl-button#confirmButton v=pr",value:{type:1,path:"config.confirmText"}}],fast:!0}],fast:!1}}],fast:!1}],fast:!1}}],fast:!1}],fast:!1},parsedKey:{type:2,parts:["rtgl-dialog#dialog ?open=",{type:1,path:"isDialogOpen"}," s=sm"]}}],fast:!1},{type:8,properties:[{key:"rtgl-dropdown-menu#dropdownMenu ?open=${isDropdownOpen} x=${dropdownConfig.x} y=${dropdownConfig.y} place=${dropdownConfig.place} :items=dropdownConfig.items key=dropdown-${isDropdownOpen}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-dropdown-menu#dropdownMenu ?open=",{type:1,path:"isDropdownOpen"}," x=",{type:1,path:"dropdownConfig.x"}," y=",{type:1,path:"dropdownConfig.y"}," place=",{type:1,path:"dropdownConfig.place"}," :items=dropdownConfig.items key=dropdown-",{type:1,path:"isDropdownOpen"}]}}],fast:!0}],fast:!1}};var Ut={};R(Ut,{handleClickStart:()=>jo});var jo=(e,t)=>{let{dispatchEvent:r,store:s}=e,i=t._event;console.log("handle click start",s.selectPath()),r(new CustomEvent("start-click",{detail:{path:s.selectPath()}}))};var ks={componentName:"rtgl-navbar",propsSchema:{type:"object",properties:{start:{type:"object",properties:{label:{type:"string"},href:{type:"string"},image:{type:"object",properties:{src:{type:"string"}}}}}}},events:{"start-click":{type:"object",properties:{path:{type:"string"}}}},methods:{type:"object",properties:{}}};var Kt={};R(Kt,{createInitialState:()=>Bo,selectPath:()=>Uo,selectViewData:()=>Fo,setState:()=>Ko});var Bo=()=>Object.freeze({}),Wo=["id","class","style","slot","start"],Mo=(e={})=>Object.entries(e).filter(([t])=>!Wo.includes(t)).map(([t,r])=>`${t}=${r}`).join(" "),zo=e=>{if(e!=null){if(typeof e=="object")return e;if(typeof e=="string")try{return JSON.parse(decodeURIComponent(e))}catch{try{return JSON.parse(e)}catch{return}}}},Fo=({props:e})=>{let t=zo(e.start)||e.start;return{containerAttrString:Mo(e),start:t||{label:"",image:{src:"",width:32,height:32,alt:""}}}},Uo=({props:e})=>e.start?.path,Ko=({state:e})=>{};var $s={refs:{start:{eventListeners:{click:{handler:"handleClickStart"}}}},anchors:[[{"rtgl-text s=lg":"${start.label}"},{"$if start.image && start.image.src":[{"rtgl-image w=${start.image.width} h=${start.image.height} src=${start.image.src} alt=${start.image.alt}":null}]}]],template:{type:9,items:[{type:8,properties:[{key:"rtgl-view bgc=bg d=h h=48 av=c w=f ${containerAttrString}",value:{type:9,items:[{type:8,properties:[{key:"$if start.href",value:{type:6,conditions:[{type:1,path:"start.href"},{type:1,path:"start.path"},null],bodies:[{type:9,items:[{type:8,properties:[{key:"a href=${start.href}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view d=h av=c g=md",value:{type:9,items:[{type:9,items:[{type:8,properties:[{key:"rtgl-text s=lg",value:{type:1,path:"start.label"}}],fast:!0},{type:8,properties:[{key:"$if start.image && start.image.src",value:{type:6,conditions:[{type:4,op:6,left:{type:1,path:"start.image"},right:{type:1,path:"start.image.src"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-image w=${start.image.width} h=${start.image.height} src=${start.image.src} alt=${start.image.alt}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-image w=",{type:1,path:"start.image.width"}," h=",{type:1,path:"start.image.height"}," src=",{type:1,path:"start.image.src"}," alt=",{type:1,path:"start.image.alt"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}],fast:!1}}],fast:!1}],fast:!1},parsedKey:{type:2,parts:["a href=",{type:1,path:"start.href"}]}}],fast:!1}],fast:!1},{type:9,items:[{type:8,properties:[{key:"rtgl-view#start d=h av=c g=md cur=pointer",value:{type:9,items:[{type:9,items:[{type:8,properties:[{key:"rtgl-text s=lg",value:{type:1,path:"start.label"}}],fast:!0},{type:8,properties:[{key:"$if start.image && start.image.src",value:{type:6,conditions:[{type:4,op:6,left:{type:1,path:"start.image"},right:{type:1,path:"start.image.src"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-image w=${start.image.width} h=${start.image.height} src=${start.image.src} alt=${start.image.alt}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-image w=",{type:1,path:"start.image.width"}," h=",{type:1,path:"start.image.height"}," src=",{type:1,path:"start.image.src"}," alt=",{type:1,path:"start.image.alt"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}],fast:!1}}],fast:!1}],fast:!1},{type:9,items:[{type:8,properties:[{key:"rtgl-view d=h av=c g=md",value:{type:9,items:[{type:9,items:[{type:8,properties:[{key:"rtgl-text s=lg",value:{type:1,path:"start.label"}}],fast:!0},{type:8,properties:[{key:"$if start.image && start.image.src",value:{type:6,conditions:[{type:4,op:6,left:{type:1,path:"start.image"},right:{type:1,path:"start.image.src"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-image w=${start.image.width} h=${start.image.height} src=${start.image.src} alt=${start.image.alt}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-image w=",{type:1,path:"start.image.width"}," h=",{type:1,path:"start.image.height"}," src=",{type:1,path:"start.image.src"}," alt=",{type:1,path:"start.image.alt"}]}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}],fast:!1}}],fast:!1}],fast:!1}],id:null}}],fast:!1},{type:8,properties:[{key:"rtgl-view w=1fg",value:{type:0,value:null}}],fast:!0},{type:8,properties:[{key:"rtgl-view d=h av=c g=lg",value:{type:9,items:[{type:8,properties:[{key:"slot name=right",value:{type:0,value:null}}],fast:!0}],fast:!0}}],fast:!0}],fast:!1},parsedKey:{type:2,parts:["rtgl-view bgc=bg d=h h=48 av=c w=f ",{type:1,path:"containerAttrString"}]}}],fast:!1}],fast:!1}};var Ht={};R(Ht,{handleBeforeMount:()=>Go});var Ss=(e,t,r)=>{let{store:s,render:i}=r,n,a=-1/0;if(e.forEach(l=>{let p=l.getBoundingClientRect();p.top<=t&&p.top>a&&(a=p.top,n=l.id)}),!n){let l=1/0;e.forEach(p=>{let o=p.getBoundingClientRect();o.top>t&&o.top<l&&(l=o.top,n=p.id)})}n&&n!==s.selectCurrentId()&&(s.setCurrentId({id:n}),i())},Ho=(e,t,r,s)=>{let{store:i,render:n}=s,a=e.querySelectorAll("h1[id], h2[id], h3[id], h4[id], rtgl-text[id]"),l=Array.from(a),p=l.map(c=>{let u=1,d=c.tagName.toLowerCase();return d==="h1"?u=1:d==="h2"?u=2:d==="h3"?u=3:d==="h4"?u=4:d==="rtgl-text"&&(u=parseInt(c.getAttribute("data-level")||"1",10)),{id:c.id,href:`#${c.id}`,title:c.textContent,level:u}});i.setItems({items:p}),Ss(l,r,s),n();let o=Ss.bind(void 0,l,r,s);return t.addEventListener("scroll",o,{passive:!0}),()=>{t.removeEventListener("scroll",o)}},Go=e=>{let{props:t}=e,r=()=>{};return requestAnimationFrame(()=>{let s=document.getElementById(t.targetId);if(!s)return;let i=window;t.scrollContainerId&&(i=document.getElementById(t.scrollContainerId)||window);let n=parseInt(t.offsetTop||"100",10);r=Ho(s,i,n,e)}),()=>{r()}};var Cs={componentName:"rtgl-page-outline",propsSchema:{type:"object",properties:{targetId:{type:"string"},scrollContainerId:{type:"string"},offsetTop:{type:"string"}}},events:{onItemClick:{type:"object"}},methods:{type:"object",properties:{}}};var Gt={};R(Gt,{createInitialState:()=>qo,selectCurrentId:()=>Xo,selectState:()=>Yo,selectViewData:()=>Jo,setContentContainer:()=>el,setCurrentId:()=>Qo,setItems:()=>Zo});var qo=()=>Object.freeze({items:[],currentId:null,contentContainer:null}),Jo=({state:e})=>{let r=((s,i)=>{let n=new Set,a=s.findIndex(p=>p.id===i);if(a===-1)return n;let l=s[a].level;for(let p=a-1;p>=0;p--)if(s[p].level<l){let o=s[p].level;n.add(s[p].id);for(let c=p-1;c>=0;c--)s[c].level<o&&(n.add(s[c].id),o=s[c].level);break}return n})(e.items,e.currentId);return{items:e.items.map(s=>{let i={1:"0",2:"12px",3:"24px",4:"32px"},n=s.id===e.currentId,a=r.has(s.id),l=n||a;return{...s,c:l?"fg":"mu-fg",ml:i[s.level]||"",bc:l?"fg":"mu-fg"}}),currentId:e.currentId}},Yo=({state:e})=>e,Xo=({state:e})=>e.currentId,Zo=({state:e},t={})=>{e.items=Array.isArray(t.items)?t.items:[]},Qo=({state:e},t={})=>{e.currentId=t.id},el=({state:e},t={})=>{e.contentContainer=t.container};var Is={refs:{},template:{type:9,items:[{type:8,properties:[{key:"rtgl-view h=f w=272 d=v pr=md",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view w=f h=1fg sv mt=xl",value:{type:9,items:[{type:7,itemVar:"item",indexVar:"i",iterable:{type:1,path:"items"},body:{type:9,items:[{type:8,properties:[{key:'rtgl-view d=h bwl=xs bc="${item.bc}" pv=sm av=c href=${item.href} pl=md',value:{type:9,items:[{type:8,properties:[{key:"rtgl-view w=${item.ml}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-view w=",{type:1,path:"item.ml"}]}}],fast:!0},{type:8,properties:[{key:"rtgl-text s=sm c=${item.c} h-c=fg",value:{type:1,path:"item.title"},parsedKey:{type:2,parts:["rtgl-text s=sm c=",{type:1,path:"item.c"}," h-c=fg"]}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:['rtgl-view d=h bwl=xs bc="',{type:1,path:"item.bc"},'" pv=sm av=c href=',{type:1,path:"item.href"}," pl=md"]}}],fast:!0}],fast:!0}}],fast:!1}}],fast:!1}],fast:!1}}],fast:!1}],fast:!1}};var qt={};R(qt,{handleBeforeMount:()=>tl,handleInputChange:()=>nl,handleInputKeydown:()=>ol,handleOnUpdate:()=>rl,handlePopoverClose:()=>il,handleSubmitClick:()=>al,handleTextClick:()=>sl});var tl=e=>{let{store:t,props:r}=e;r.value!==void 0&&t.setValue({value:r.value||""})},rl=(e,t)=>{let{oldProps:r,newProps:s}=t,{store:i,render:n}=e;if(r?.value!==s?.value){let a=s?.value??"";i.setValue({value:a})}n()},sl=(e,t)=>{let{store:r,render:s,refs:i,props:n}=e,a=t._event,l=r.selectValue();r.setTempValue({value:l}),r.openPopover({position:{x:a.currentTarget.getBoundingClientRect().left,y:a.currentTarget.getBoundingClientRect().bottom}});let{input:p}=i;p.value=l,s(),n.autoFocus&&setTimeout(()=>{p.focus()},50)},il=(e,t)=>{let{store:r,render:s}=e;r.closePopover({}),s()},nl=(e,t)=>{let{store:r,render:s,dispatchEvent:i}=e,a=t._event.detail.value;r.setTempValue({value:a}),i(new CustomEvent("value-input",{detail:{value:a},bubbles:!0})),s()},al=e=>{let{store:t,render:r,dispatchEvent:s,refs:i}=e,{input:n}=i,a=n.value;t.setValue({value:a}),t.closePopover({}),s(new CustomEvent("value-change",{detail:{value:a},bubbles:!0})),r()},ol=(e,t)=>{let{store:r,render:s,dispatchEvent:i,refs:n}=e,a=t._event;if(a.key==="Enter"){let{input:l}=n,p=l.value;r.closePopover({}),i(new CustomEvent("value-change",{detail:{value:p},bubbles:!0})),s()}else a.key==="Escape"&&(r.closePopover({}),s())};var Os={componentName:"rtgl-popover-input",propsSchema:{type:"object",properties:{value:{type:"string"},placeholder:{type:"string"},label:{type:"string"},autoFocus:{type:"boolean"}}},events:{"value-input":{},"value-change":{}},methods:{type:"object",properties:{}}};var Jt={};R(Jt,{closePopover:()=>dl,createInitialState:()=>ll,openPopover:()=>ul,selectValue:()=>hl,selectViewData:()=>pl,setTempValue:()=>cl,setValue:()=>fl});var ll=()=>Object.freeze({isOpen:!1,position:{x:0,y:0},value:"",tempValue:""}),pl=({props:e,state:t})=>{let r=t.value||"-";return{isOpen:t.isOpen,position:t.position,value:r,tempValue:t.tempValue,placeholder:e.placeholder??"",label:e.label}},cl=({state:e},t={})=>{e.tempValue=t.value},ul=({state:e},t={})=>{let{position:r}=t;e.position=r,e.isOpen=!0,e.hasUnsavedChanges=!1},dl=({state:e})=>{e.isOpen=!1,e.tempValue=""},fl=({state:e},t={})=>{e.value=t.value},hl=({state:e})=>e.value;var Ts={refs:{textDisplay:{eventListeners:{click:{handler:"handleTextClick"}}},popover:{eventListeners:{close:{handler:"handlePopoverClose"}}},input:{eventListeners:{"value-input":{handler:"handleInputChange"},keydown:{handler:"handleInputKeydown"}}},submit:{eventListeners:{click:{handler:"handleSubmitClick"}}}},template:{type:9,items:[{type:8,properties:[{key:"rtgl-view#textDisplay w=f cur=pointer",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text",value:{type:1,path:"value"}}],fast:!0}],fast:!0}}],fast:!0},{type:8,properties:[{key:"rtgl-popover#popover ?open=${isOpen} x=${position.x} y=${position.y}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view g=md w=240 slot=content bgc=bg br=md",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text",value:{type:1,path:"label"}}],fast:!0},{type:8,properties:[{key:"rtgl-input#input w=f placeholder=${placeholder}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-input#input w=f placeholder=",{type:1,path:"placeholder"}]}}],fast:!0},{type:8,properties:[{key:"rtgl-view w=f ah=e",value:{type:9,items:[{type:8,properties:[{key:"rtgl-button#submit",value:{type:0,value:"Submit"}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-popover#popover ?open=",{type:1,path:"isOpen"}," x=",{type:1,path:"position.x"}," y=",{type:1,path:"position.y"}]}}],fast:!0}],fast:!0}};var Yt={};R(Yt,{handleAddOptionClick:()=>Al,handleAddOptionMouseEnter:()=>El,handleAddOptionMouseLeave:()=>kl,handleBeforeMount:()=>ml,handleButtonClick:()=>gl,handleClearClick:()=>xl,handleClickOptionsPopoverOverlay:()=>vl,handleOnUpdate:()=>yl,handleOptionClick:()=>bl,handleOptionMouseEnter:()=>wl,handleOptionMouseLeave:()=>_l});var ml=e=>{let{store:t,props:r,render:s}=e;if(r.selectedValue!==null&&r.selectedValue!==void 0&&r.options){let i=r.options.find(n=>ce(n.value,r.selectedValue));i&&(t.updateSelectedValue({value:i?.value}),s())}},yl=(e,t)=>{let{oldProps:r,newProps:s}=t,{store:i,render:n}=e;if(r?.key!==s?.key&&s?.key){i.resetSelection({});let a=s?.selectedValue,l=s?.options||[];if(a!=null&&l){let p=l.find(o=>ce(o.value,a));p&&i.updateSelectedValue({value:p.value})}n()}else r.selectedValue!==s.selectedValue&&(i.updateSelectedValue({value:s.selectedValue}),n())},gl=(e,t)=>{let{store:r,render:s,refs:i,props:n}=e;t._event.stopPropagation();let l=i.selectButton,p=l.firstElementChild,o=p?p.getBoundingClientRect():l.getBoundingClientRect(),c=r.selectSelectedValue(),u=c!==null?c:n.selectedValue,d=null;u!=null&&n.options&&(d=n.options.findIndex(h=>ce(h.value,u)),d===-1&&(d=null)),r.openOptionsPopover({position:{y:o.bottom+12,x:o.left-24},selectedIndex:d}),s()},vl=e=>{let{store:t,render:r}=e;t.closeOptionsPopover({}),r()},bl=(e,t)=>{let{render:r,dispatchEvent:s,props:i,store:n}=e,a=t._event;a.stopPropagation();let l=a.currentTarget.id.slice(6),p=Number(l),o=i.options[l];n.updateSelectedValue({value:o?.value}),i.onChange&&typeof i.onChange=="function"&&i.onChange(o.value),s(new CustomEvent("value-change",{detail:{value:o.value,label:o.label,index:p,item:o},bubbles:!0})),r()},wl=(e,t)=>{let{store:r,render:s}=e,i=t._event,n=parseInt(i.currentTarget.id.slice(6),10);r.setHoveredOption({optionId:n}),s()},_l=(e,t)=>{let{store:r,render:s}=e;r.clearHoveredOption({}),s()},xl=(e,t)=>{let{store:r,render:s,dispatchEvent:i,props:n}=e;t._event.stopPropagation(),r.clearSelectedValue({}),n.onChange&&typeof n.onChange=="function"&&n.onChange(void 0),i(new CustomEvent("value-change",{detail:{value:void 0,label:void 0,index:null,item:void 0},bubbles:!0})),s()},Al=(e,t)=>{let{store:r,render:s,dispatchEvent:i}=e,{_event:n}=t;n.stopPropagation(),r.closeOptionsPopover({}),i(new CustomEvent("add-option-click",{bubbles:!0})),s()},El=(e,t)=>{let{store:r,render:s}=e;r.setHoveredAddOption({isHovered:!0}),s()},kl=(e,t)=>{let{store:r,render:s}=e;r.setHoveredAddOption({isHovered:!1}),s()};var Ls={componentName:"rtgl-select",propsSchema:{type:"object",properties:{placeholder:{type:"string"},options:{type:"array",items:{type:"object",properties:{label:{type:"string"},value:{type:"any"},testId:{type:"string"}}}},selectedValue:{type:"any"},onChange:{type:"function"},noClear:{type:"boolean"},addOption:{type:"object",properties:{label:{type:"string"}}},w:{type:"string"}}},events:{"value-change":{},"add-option-click":{}},methods:{type:"object",properties:{}}};var Xt={};R(Xt,{clearHoveredOption:()=>Dl,clearSelectedValue:()=>jl,closeOptionsPopover:()=>Rl,createInitialState:()=>Cl,openOptionsPopover:()=>Ll,resetSelection:()=>Pl,selectSelectedValue:()=>Tl,selectState:()=>Ol,selectViewData:()=>Il,setHoveredAddOption:()=>Bl,setHoveredOption:()=>Vl,updateSelectedValue:()=>Nl});var $l=["id","class","style","slot","placeholder","selectedValue","onChange","options","noClear","addOption"],Sl=(e={})=>Object.entries(e).filter(([t])=>!$l.includes(t)).map(([t,r])=>`${t}=${r}`).join(" "),Cl=()=>Object.freeze({isOpen:!1,position:{x:0,y:0},selectedValue:null,hoveredOptionId:null,hoveredAddOption:!1}),Il=({state:e,props:t})=>{let r=Sl(t),s=e.selectedValue!==null?e.selectedValue:t.selectedValue,i=t.placeholder||"Select an option",n=!0,a=t.options||[],l=a.find(o=>ce(o.value,s));l&&(i=l.label,n=!1);let p=a.map((o,c)=>{let u=ce(o.value,s),d=e.hoveredOptionId===c;return{...o,isSelected:u,bgc:d?"ac":u?"mu":""}});return{containerAttrString:r,isOpen:e.isOpen,position:e.position,options:p,selectedValue:s,selectedLabel:i,selectedLabelColor:n?"mu-fg":"fg",hasValue:s!=null,showClear:!t.noClear&&s!=null,showAddOption:!!t.addOption,addOptionLabel:t.addOption?.label?`+ ${t.addOption.label}`:"+ Add",addOptionBgc:e.hoveredAddOption?"ac":""}},Ol=({state:e})=>e,Tl=({state:e})=>e.selectedValue,Ll=({state:e},t={})=>{let{position:r,selectedIndex:s}=t;e.position=r,e.isOpen=!0,s!=null&&(e.hoveredOptionId=s)},Rl=({state:e})=>{e.isOpen=!1},Nl=({state:e},t={})=>{e.selectedValue=t.value,e.isOpen=!1},Pl=({state:e})=>{e.selectedValue=void 0},Vl=({state:e},t={})=>{e.hoveredOptionId=t.optionId},Dl=({state:e})=>{e.hoveredOptionId=null},jl=({state:e})=>{e.selectedValue=void 0},Bl=({state:e},t={})=>{e.hoveredAddOption=!!t.isHovered};var Rs={refs:{selectButton:{eventListeners:{click:{handler:"handleButtonClick"}}},clearButton:{eventListeners:{click:{handler:"handleClearClick"}}},popover:{eventListeners:{close:{handler:"handleClickOptionsPopoverOverlay"}}},"option*":{eventListeners:{click:{handler:"handleOptionClick"},mouseenter:{handler:"handleOptionMouseEnter"},mouseleave:{handler:"handleOptionMouseLeave"}}},optionAdd:{eventListeners:{click:{handler:"handleAddOptionClick"},mouseenter:{handler:"handleAddOptionMouseEnter"},mouseleave:{handler:"handleAddOptionMouseLeave"}}}},template:{type:9,items:[{type:8,properties:[{key:'rtgl-button#selectButton v=ol ${containerAttrString} data-testid="select-button"',value:{type:9,items:[{type:8,properties:[{key:"rtgl-view d=h av=c w=f",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text w=1fg c=${selectedLabelColor} ellipsis",value:{type:1,path:"selectedLabel"},parsedKey:{type:2,parts:["rtgl-text w=1fg c=",{type:1,path:"selectedLabelColor"}," ellipsis"]}}],fast:!0},{type:8,properties:[{key:"$if showClear",value:{type:6,conditions:[{type:1,path:"showClear"}],bodies:[{type:9,items:[{type:8,properties:[{key:'rtgl-svg#clearButton ml=md svg=x wh=16 c=mu-fg cur=pointer data-testid="select-clear-button"',value:{type:0,value:null}}],fast:!0}],fast:!0}],id:null}}],fast:!1},{type:8,properties:[{key:"rtgl-svg ml=md svg=chevronDown wh=16 c=mu-fg",value:{type:0,value:null}}],fast:!0}],fast:!1}}],fast:!1}],fast:!1},parsedKey:{type:2,parts:["rtgl-button#selectButton v=ol ",{type:1,path:"containerAttrString"},' data-testid="select-button"']}}],fast:!1},{type:8,properties:[{key:"rtgl-popover#popover ?open=${isOpen} x=${position.x} y=${position.y} place=rs",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view wh=300 g=xs slot=content bgc=mu br=md sv=true",value:{type:9,items:[{type:7,itemVar:"option",indexVar:"i",iterable:{type:1,path:"options"},body:{type:9,items:[{type:8,properties:[{key:"rtgl-view#option${i} w=f ph=lg pv=md cur=pointer br=md bgc=${option.bgc} data-testid=${option.testId}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text",value:{type:1,path:"option.label"}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view#option",{type:1,path:"i"}," w=f ph=lg pv=md cur=pointer br=md bgc=",{type:1,path:"option.bgc"}," data-testid=",{type:1,path:"option.testId"}]}}],fast:!0}],fast:!0}},{type:8,properties:[{key:"$if showAddOption",value:{type:6,conditions:[{type:1,path:"showAddOption"}],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-view w=f bw=xs bc=mu bwt=sm",value:{type:0,value:null}}],fast:!0},{type:8,properties:[{key:'rtgl-view#optionAdd w=f ph=lg pv=md cur=pointer br=md bgc=${addOptionBgc} data-testid="select-add-option"',value:{type:9,items:[{type:8,properties:[{key:"rtgl-text c=ac",value:{type:1,path:"addOptionLabel"}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view#optionAdd w=f ph=lg pv=md cur=pointer br=md bgc=",{type:1,path:"addOptionBgc"},' data-testid="select-add-option"']}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}}],fast:!1}],fast:!1},parsedKey:{type:2,parts:["rtgl-popover#popover ?open=",{type:1,path:"isOpen"}," x=",{type:1,path:"position.x"}," y=",{type:1,path:"position.y"}," place=rs"]}}],fast:!1}],fast:!1}};var Zt={};R(Zt,{handleHeaderClick:()=>Wl,handleItemClick:()=>Ml});var Wl=(e,t)=>{let{store:r,dispatchEvent:s}=e,i=t._event,n,a=r.selectHeader();i.currentTarget.id==="headerLabel"?n=a.labelPath:i.currentTarget.id==="headerImage"?n=a.image.path:i.currentTarget.id==="header"&&(n=a.path),s(new CustomEvent("header-click",{detail:{path:n},bubbles:!0,composed:!0}))},Ml=(e,t)=>{let{store:r,dispatchEvent:s}=e,i=t._event,n=i.currentTarget.dataset.itemId||i.currentTarget.id.slice(4),a=r.selectItem(n);s(new CustomEvent("item-click",{detail:{item:a},bubbles:!0,composed:!0}))};var Ns={componentName:"rtgl-sidebar",propsSchema:{type:"object",properties:{mode:{type:"string"},selectedItemId:{type:"string"},fullWidth:{type:"boolean"},hideHeader:{type:"boolean"},header:{type:"object",properties:{label:{type:"string"},href:{type:"string"},testId:{type:"string"},image:{type:"object",properties:{src:{type:"string"},width:{type:"number"},height:{type:"number"},alt:{type:"string"}}}}},items:{type:"array",items:{type:"object",properties:{title:{type:"string"},slug:{type:"string"},type:{type:"string"},items:{type:"array"},testId:{type:"string"}}}}}},events:{"header-click":{type:"object",properties:{path:{type:"string"}}},"item-click":{type:"object",properties:{item:{type:"object"}}}},methods:{type:"object",properties:{}}};var er={};R(er,{createInitialState:()=>zl,selectActiveItem:()=>Gl,selectHeader:()=>Hl,selectItem:()=>ql,selectViewData:()=>Kl,setState:()=>Jl});var zl=()=>Object.freeze({}),Fl=["id","class","style","slot","header","items","selectedItemId","mode","fullWidth","hideHeader"],Ul=(e={})=>Object.entries(e).filter(([t])=>!Fl.includes(t)).map(([t,r])=>`${t}=${r}`).join(" "),Pe=e=>{if(e!=null){if(typeof e=="object")return e;if(typeof e=="string")try{return JSON.parse(decodeURIComponent(e))}catch{try{return JSON.parse(e)}catch{return}}}},Ps=e=>e===!0||e==="true";function Qt(e,t=null){let r=[];for(let s of e){let i=s.id||s.href||s.path,n=t===i;if(r.push({id:i,title:s.title,href:s.href,type:s.type||"item",icon:s.icon,hrefAttr:s.href?`href=${s.href}`:"",isSelected:n,itemBgc:n?"ac":"bg",itemHoverBgc:n?"ac":"mu"}),s.items&&Array.isArray(s.items))for(let a of s.items){let l=a.id||a.href||a.path,p=t===l;r.push({id:l,title:a.title,href:a.href,type:a.type||"item",icon:a.icon,hrefAttr:a.href?`href=${a.href}`:"",isSelected:p,itemBgc:p?"ac":"bg",itemHoverBgc:p?"ac":"mu"})}}return r}var Kl=({props:e})=>{let t=Pe(e.header)||e.header,r=Pe(e.items)||e.items,s=e.selectedItemId,i=Ul(e),n=e.mode||"full",a=Ps(e.fullWidth),l=Ps(e.hideHeader),p=t||{label:"",path:"",image:{src:"",alt:"",width:0,height:0}},o=r?Qt(r,s):[],c=n==="full"?272:64,u=n==="full"?"fs":"c",d=n==="full"?"fs":"c",h=n==="full"?"lg":"sm",f=n==="full"?"md":"sm",m=n==="shrunk-lg"?48:40,g=n==="shrunk-lg"?28:20,y=n==="shrunk-lg"?"md":"sm",w=n==="full",_=n==="full",A=n==="full"?"fs":"c",x=n==="full"?"":`ah=${d}`,k=n==="full"?"f":m;return{containerAttrString:i,mode:n,header:p,items:o,sidebarWidth:c,headerAlign:u,itemAlign:d,headerPadding:h,itemPadding:f,itemHeight:m,iconSize:g,firstLetterSize:y,showLabels:w,showGroupLabels:_,itemContentAlign:A,itemAlignAttr:x,itemWidth:k,headerWidth:k,selectedItemId:s,ah:n==="shrunk-lg"||n==="shrunk-md"?"c":"",smWidthAttr:a?"sm-w=100%":"",smHeaderHideAttr:l?"sm-hide":""}},Hl=({props:e})=>Pe(e.header)||e.header,Gl=({state:e,props:t})=>{let r=Pe(t.items)||t.items;return(r?Qt(r):[]).find(i=>i.active)},ql=({props:e},t)=>{let r=Pe(e.items)||e.items;return(r?Qt(r):[]).find(i=>i.id===t)},Jl=({state:e})=>{};var Vs={refs:{headerImage:{eventListeners:{click:{handler:"handleHeaderClick"}}},headerLabel:{eventListeners:{click:{handler:"handleHeaderClick"}}},header:{eventListeners:{click:{handler:"handleHeaderClick"}}},"item*":{eventListeners:{click:{handler:"handleItemClick"}}}},styles:null,anchors:[[{"$if header.image && header.image.src":[{"$if header.image.href":[{"a href=${header.image.href}":[{'rtgl-image w=${header.image.width} h=${header.image.height} src=${header.image.src} alt="${header.image.alt}"':null}]}],"$elif header.image.path":[{"rtgl-view#headerImage cur=pointer":[{'rtgl-image w=${header.image.width} h=${header.image.height} src=${header.image.src} alt="${header.image.alt}"':null}]}],$else:[{'rtgl-image w=${header.image.width} h=${header.image.height} src=${header.image.src} alt="${header.image.alt}"':null}]}]},{"$if header.label && showLabels":[{"$if header.labelHref":[{"rtgl-text href=${header.labelHref} s=lg":"${header.label}"}],"$elif header.labelPath":[{"rtgl-view#headerLabel cur=pointer":[{"rtgl-text s=lg":"${header.label}"}]}],$else:[{"rtgl-text s=lg":"${header.label}"}]}]}]],template:{type:9,items:[{type:8,properties:[{key:"rtgl-view h=f w=${sidebarWidth} ${smWidthAttr} d=v bwr=xs ah=${ah} ${containerAttrString}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view ph=${headerPadding} pv=lg ${smHeaderHideAttr}",value:{type:9,items:[{type:8,properties:[{key:"$if header.href",value:{type:6,conditions:[{type:1,path:"header.href"},null],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-view href=${header.href} d=h av=c ah=${headerAlign} g=lg w=${headerWidth}",value:{type:9,items:[{type:9,items:[{type:8,properties:[{key:"$if header.image && header.image.src",value:{type:6,conditions:[{type:4,op:6,left:{type:1,path:"header.image"},right:{type:1,path:"header.image.src"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"$if header.image.href",value:{type:6,conditions:[{type:1,path:"header.image.href"},{type:1,path:"header.image.path"},null],bodies:[{type:9,items:[{type:8,properties:[{key:"a href=${header.image.href}",value:{type:9,items:[{type:8,properties:[{key:'rtgl-image w=${header.image.width} h=${header.image.height} src=${header.image.src} alt="${header.image.alt}"',value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-image w=",{type:1,path:"header.image.width"}," h=",{type:1,path:"header.image.height"}," src=",{type:1,path:"header.image.src"},' alt="',{type:1,path:"header.image.alt"},'"']}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["a href=",{type:1,path:"header.image.href"}]}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-view#headerImage cur=pointer",value:{type:9,items:[{type:8,properties:[{key:'rtgl-image w=${header.image.width} h=${header.image.height} src=${header.image.src} alt="${header.image.alt}"',value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-image w=",{type:1,path:"header.image.width"}," h=",{type:1,path:"header.image.height"}," src=",{type:1,path:"header.image.src"},' alt="',{type:1,path:"header.image.alt"},'"']}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:'rtgl-image w=${header.image.width} h=${header.image.height} src=${header.image.src} alt="${header.image.alt}"',value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-image w=",{type:1,path:"header.image.width"}," h=",{type:1,path:"header.image.height"}," src=",{type:1,path:"header.image.src"},' alt="',{type:1,path:"header.image.alt"},'"']}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}],id:null}}],fast:!1},{type:8,properties:[{key:"$if header.label && showLabels",value:{type:6,conditions:[{type:4,op:6,left:{type:1,path:"header.label"},right:{type:1,path:"showLabels"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"$if header.labelHref",value:{type:6,conditions:[{type:1,path:"header.labelHref"},{type:1,path:"header.labelPath"},null],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-text href=${header.labelHref} s=lg",value:{type:1,path:"header.label"},parsedKey:{type:2,parts:["rtgl-text href=",{type:1,path:"header.labelHref"}," s=lg"]}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-view#headerLabel cur=pointer",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text s=lg",value:{type:1,path:"header.label"}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-text s=lg",value:{type:1,path:"header.label"}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}],id:null}}],fast:!1}],fast:!1}],fast:!1},parsedKey:{type:2,parts:["rtgl-view href=",{type:1,path:"header.href"}," d=h av=c ah=",{type:1,path:"headerAlign"}," g=lg w=",{type:1,path:"headerWidth"}]}}],fast:!1}],fast:!1},{type:9,items:[{type:8,properties:[{key:"rtgl-view#header d=h av=c ah=${headerAlign} g=lg w=${headerWidth} cur=pointer data-testid=${header.testId}",value:{type:9,items:[{type:9,items:[{type:8,properties:[{key:"$if header.image && header.image.src",value:{type:6,conditions:[{type:4,op:6,left:{type:1,path:"header.image"},right:{type:1,path:"header.image.src"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"$if header.image.href",value:{type:6,conditions:[{type:1,path:"header.image.href"},{type:1,path:"header.image.path"},null],bodies:[{type:9,items:[{type:8,properties:[{key:"a href=${header.image.href}",value:{type:9,items:[{type:8,properties:[{key:'rtgl-image w=${header.image.width} h=${header.image.height} src=${header.image.src} alt="${header.image.alt}"',value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-image w=",{type:1,path:"header.image.width"}," h=",{type:1,path:"header.image.height"}," src=",{type:1,path:"header.image.src"},' alt="',{type:1,path:"header.image.alt"},'"']}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["a href=",{type:1,path:"header.image.href"}]}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-view#headerImage cur=pointer",value:{type:9,items:[{type:8,properties:[{key:'rtgl-image w=${header.image.width} h=${header.image.height} src=${header.image.src} alt="${header.image.alt}"',value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-image w=",{type:1,path:"header.image.width"}," h=",{type:1,path:"header.image.height"}," src=",{type:1,path:"header.image.src"},' alt="',{type:1,path:"header.image.alt"},'"']}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:'rtgl-image w=${header.image.width} h=${header.image.height} src=${header.image.src} alt="${header.image.alt}"',value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-image w=",{type:1,path:"header.image.width"}," h=",{type:1,path:"header.image.height"}," src=",{type:1,path:"header.image.src"},' alt="',{type:1,path:"header.image.alt"},'"']}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}],id:null}}],fast:!1},{type:8,properties:[{key:"$if header.label && showLabels",value:{type:6,conditions:[{type:4,op:6,left:{type:1,path:"header.label"},right:{type:1,path:"showLabels"}}],bodies:[{type:9,items:[{type:8,properties:[{key:"$if header.labelHref",value:{type:6,conditions:[{type:1,path:"header.labelHref"},{type:1,path:"header.labelPath"},null],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-text href=${header.labelHref} s=lg",value:{type:1,path:"header.label"},parsedKey:{type:2,parts:["rtgl-text href=",{type:1,path:"header.labelHref"}," s=lg"]}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-view#headerLabel cur=pointer",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text s=lg",value:{type:1,path:"header.label"}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-text s=lg",value:{type:1,path:"header.label"}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}],id:null}}],fast:!1}],fast:!1}],fast:!1},parsedKey:{type:2,parts:["rtgl-view#header d=h av=c ah=",{type:1,path:"headerAlign"}," g=lg w=",{type:1,path:"headerWidth"}," cur=pointer data-testid=",{type:1,path:"header.testId"}]}}],fast:!1}],fast:!1}],id:null}}],fast:!1}],fast:!1},parsedKey:{type:2,parts:["rtgl-view ph=",{type:1,path:"headerPadding"}," pv=lg ",{type:1,path:"smHeaderHideAttr"}]}}],fast:!1},{type:8,properties:[{key:"rtgl-view w=f h=1fg sv ph=${headerPadding} pb=lg g=xs ah=${ah}",value:{type:9,items:[{type:7,itemVar:"item",indexVar:"i",iterable:{type:1,path:"items"},body:{type:9,items:[{type:8,properties:[{key:'$if item.type == "groupLabel"',value:{type:6,conditions:[{type:4,op:0,left:{type:1,path:"item.type"},right:{type:0,value:"groupLabel"}},null],bodies:[{type:9,items:[{type:8,properties:[{key:"$if showGroupLabels",value:{type:6,conditions:[{type:1,path:"showGroupLabels"},null],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-view mt=md h=32 av=c ph=md",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text s=xs c=mu-fg",value:{type:1,path:"item.title"}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-view mt=md h=1 bgc=mu",value:{type:0,value:null}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1},{type:9,items:[{type:8,properties:[{key:"rtgl-view#item${i} data-item-id=${item.id} ${item.hrefAttr} h=${itemHeight} av=c ${itemAlignAttr} ph=${itemPadding} w=${itemWidth} h-bgc=${item.itemHoverBgc} br=lg bgc=${item.itemBgc} cur=pointer data-testid=${item.testId}",value:{type:9,items:[{type:8,properties:[{key:"$if item.icon",value:{type:6,conditions:[{type:1,path:"item.icon"},null],bodies:[{type:9,items:[{type:8,properties:[{key:"$if showLabels",value:{type:6,conditions:[{type:1,path:"showLabels"},null],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-view d=h ah=${itemContentAlign} g=sm",value:{type:9,items:[{type:8,properties:[{key:"rtgl-svg wh=16 svg=${item.icon} c=fg",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-svg wh=16 svg=",{type:1,path:"item.icon"}," c=fg"]}}],fast:!0},{type:8,properties:[{key:"rtgl-text s=sm",value:{type:1,path:"item.title"}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view d=h ah=",{type:1,path:"itemContentAlign"}," g=sm"]}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-svg wh=${iconSize} svg=${item.icon} c=fg",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-svg wh=",{type:1,path:"iconSize"}," svg=",{type:1,path:"item.icon"}," c=fg"]}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1},{type:9,items:[{type:8,properties:[{key:"$if showLabels",value:{type:6,conditions:[{type:1,path:"showLabels"},null],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-text s=sm",value:{type:1,path:"item.title"}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:"rtgl-view wh=${iconSize} br=f bgc=mu av=c ah=c",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text s=${firstLetterSize} c=fg",value:{type:1,path:"item.title.charAt(0).toUpperCase()"},parsedKey:{type:2,parts:["rtgl-text s=",{type:1,path:"firstLetterSize"}," c=fg"]}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view wh=",{type:1,path:"iconSize"}," br=f bgc=mu av=c ah=c"]}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1}],id:null}}],fast:!1}],fast:!1},parsedKey:{type:2,parts:["rtgl-view#item",{type:1,path:"i"}," data-item-id=",{type:1,path:"item.id"}," ",{type:1,path:"item.hrefAttr"}," h=",{type:1,path:"itemHeight"}," av=c ",{type:1,path:"itemAlignAttr"}," ph=",{type:1,path:"itemPadding"}," w=",{type:1,path:"itemWidth"}," h-bgc=",{type:1,path:"item.itemHoverBgc"}," br=lg bgc=",{type:1,path:"item.itemBgc"}," cur=pointer data-testid=",{type:1,path:"item.testId"}]}}],fast:!1}],fast:!1}],id:null}}],fast:!1}],fast:!1}}],fast:!1},parsedKey:{type:2,parts:["rtgl-view w=f h=1fg sv ph=",{type:1,path:"headerPadding"}," pb=lg g=xs ah=",{type:1,path:"ah"}]}}],fast:!1}],fast:!1},parsedKey:{type:2,parts:["rtgl-view h=f w=",{type:1,path:"sidebarWidth"}," ",{type:1,path:"smWidthAttr"}," d=v bwr=xs ah=",{type:1,path:"ah"}," ",{type:1,path:"containerAttrString"}]}}],fast:!1}],fast:!1}};var tr={};R(tr,{handleBeforeMount:()=>Yl,handleOnUpdate:()=>Xl,handleValueChange:()=>Zl,handleValueInput:()=>Ql});var Yl=e=>{let{store:t,props:r}=e;t.setValue({value:r.value??0})},Xl=(e,t)=>{let{oldProps:r,newProps:s}=t,{store:i,render:n}=e;if(r?.value!==s?.value){let a=s?.value??0;i.setValue({value:a}),n()}},Zl=(e,t)=>{let{store:r,render:s,dispatchEvent:i}=e,n=t._event,a=Number(n.detail.value);r.setValue({value:a}),s(),i(new CustomEvent("value-change",{detail:{value:a},bubbles:!0}))},Ql=(e,t)=>{let{store:r,render:s,dispatchEvent:i}=e,n=t._event,a=Number(n.detail.value);r.setValue({value:a}),s(),i(new CustomEvent("value-input",{detail:{value:a},bubbles:!0}))};var Ds={componentName:"rtgl-slider-input",propsSchema:{type:"object",properties:{key:{type:"string"},value:{type:"string",default:"0"},w:{type:"string",default:""},min:{type:"string",default:"0"},max:{type:"string",default:"100"},step:{type:"string",default:"1"}}},events:{"value-input":{},"value-change":{}},methods:{type:"object",properties:{}}};var rr={};R(rr,{createInitialState:()=>ep,selectViewData:()=>tp,setValue:()=>rp});var ep=()=>Object.freeze({value:0}),tp=({state:e,props:t})=>({key:t.key,value:e.value,w:t.w||"",min:t.min||0,max:t.max||100,step:t.step||1}),rp=({state:e},t={})=>{e.value=t.value};var js={refs:{input:{eventListeners:{"value-input":{handler:"handleValueInput"},"value-change":{handler:"handleValueChange"}}},slider:{eventListeners:{"value-change":{handler:"handleValueChange"},"value-input":{handler:"handleValueInput"}}}},template:{type:9,items:[{type:8,properties:[{key:"rtgl-view d=h av=c g=md w=${w}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-slider#slider key=${key} w=f type=range min=${min} max=${max} step=${step} value=${value}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-slider#slider key=",{type:1,path:"key"}," w=f type=range min=",{type:1,path:"min"}," max=",{type:1,path:"max"}," step=",{type:1,path:"step"}," value=",{type:1,path:"value"}]}}],fast:!0},{type:8,properties:[{key:"rtgl-view w=84",value:{type:9,items:[{type:8,properties:[{key:"rtgl-input#input key=${key} w=f type=number min=${min} max=${max} step=${step} value=${value}",value:{type:0,value:null},parsedKey:{type:2,parts:["rtgl-input#input key=",{type:1,path:"key"}," w=f type=number min=",{type:1,path:"min"}," max=",{type:1,path:"max"}," step=",{type:1,path:"step"}," value=",{type:1,path:"value"}]}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view d=h av=c g=md w=",{type:1,path:"w"}]}}],fast:!0}],fast:!0}};var sr={};R(sr,{handleBeforeMount:()=>sp,handleHeaderClick:()=>np,handleRowClick:()=>ip});var sp=e=>{},ip=(e,t)=>{let{dispatchEvent:r,props:s}=e,i=t._event,n=parseInt(i.currentTarget.id.slice(3),10),a=s.data?.rows?.[n];a&&r(new CustomEvent("row-click",{detail:{rowIndex:n,rowData:a}}))},np=(e,t)=>{let{store:r,render:s,dispatchEvent:i}=e,a=t._event.currentTarget.dataset.columnKey,l=r.selectSortInfo(),p="asc";l.column===a&&(l.direction==="asc"?p="desc":l.direction==="desc"&&(p=null)),p?r.setSortColumn({column:a,direction:p}):r.clearSort(),s(),i(new CustomEvent("header-click",{detail:{column:a,direction:p,sortInfo:p?{column:a,direction:p}:null}}))};var Bs={componentName:"rtgl-table",propsSchema:{type:"object",properties:{data:{type:"object",properties:{columns:{type:"array",items:{type:"object",properties:{key:{type:"string"},label:{type:"string"}}}},rows:{type:"array",items:{type:"object"}}}},responsive:{type:"boolean",default:!0}}},events:{},methods:{type:"object",properties:{}}};var ir={};R(ir,{clearSort:()=>hp,createInitialState:()=>ap,selectSortInfo:()=>dp,selectState:()=>up,selectViewData:()=>cp,setSortColumn:()=>fp});var ap=()=>Object.freeze({sortColumn:null,sortDirection:null}),op=["id","class","style","slot","data"],lp=(e={})=>Object.entries(e).filter(([t])=>!op.includes(t)).map(([t,r])=>`${t}=${r}`).join(" "),pp=(e,t)=>{let r=t.split("."),s=e;for(let i of r){if(s==null)return null;s=s[i]}return s},cp=({state:e,props:t})=>{let r=lp(t),s=t.data||{columns:[],rows:[]},i=s.rows.map((n,a)=>{let l=s.columns.map(p=>{let o=pp(n,p.key);return{key:p.key,value:o!=null?String(o):""}});return{index:a,cells:l}});return{containerAttrString:r,columns:s.columns||[],rows:i||[]}},up=({state:e})=>e,dp=({state:e})=>({column:e.sortColumn,direction:e.sortDirection}),fp=({state:e},{column:t,direction:r}={})=>{e.sortColumn=t,e.sortDirection=r},hp=({state:e})=>{e.sortColumn=null,e.sortDirection=null};var Ws={refs:{"row*":{eventListeners:{click:{handler:"handleRowClick"}}},"header*":{eventListeners:{click:{handler:"handleHeaderClick"}}}},styles:{table:{width:"100%","border-collapse":"collapse","border-spacing":0},thead:{"border-bottom":"2px solid var(--border)"},th:{padding:"12px","text-align":"left","font-weight":500,color:"var(--foreground)","background-color":"var(--muted)",cursor:"pointer",position:"sticky",top:0,"z-index":1},"tbody tr":{"border-bottom":"1px solid var(--border)"},"tbody tr:last-child":{"border-bottom":"none"},td:{padding:"12px",color:"var(--foreground)"},".table-container":{width:"100%",height:"100%",overflow:"auto"},".empty-state":{"text-align":"center",padding:"24px",color:"var(--muted-foreground)"}},template:{type:9,items:[{type:8,properties:[{key:"rtgl-view.table-container ${containerAttrString}",value:{type:9,items:[{type:8,properties:[{key:"$if rows.length > 0",value:{type:6,conditions:[{type:4,op:2,left:{type:1,path:"rows.length"},right:{type:0,value:0}},null],bodies:[{type:9,items:[{type:8,properties:[{key:"table",value:{type:9,items:[{type:8,properties:[{key:"thead",value:{type:9,items:[{type:8,properties:[{key:"tr",value:{type:9,items:[{type:7,itemVar:"column",indexVar:"i",iterable:{type:1,path:"columns"},body:{type:9,items:[{type:8,properties:[{key:"th#header${i} data-column-key=${column.key}",value:{type:1,path:"column.label"},parsedKey:{type:2,parts:["th#header",{type:1,path:"i"}," data-column-key=",{type:1,path:"column.key"}]}}],fast:!0}],fast:!0}}],fast:!1}}],fast:!1}],fast:!1}}],fast:!1},{type:8,properties:[{key:"tbody",value:{type:9,items:[{type:7,itemVar:"row",indexVar:"rowIndex",iterable:{type:1,path:"rows"},body:{type:9,items:[{type:8,properties:[{key:"tr#row${rowIndex}",value:{type:9,items:[{type:7,itemVar:"cell",indexVar:"cellIndex",iterable:{type:1,path:"row.cells"},body:{type:9,items:[{type:8,properties:[{key:"td",value:{type:1,path:"cell.value"}}],fast:!0}],fast:!0}}],fast:!1},parsedKey:{type:2,parts:["tr#row",{type:1,path:"rowIndex"}]}}],fast:!1}],fast:!1}}],fast:!1}}],fast:!1}],fast:!1}}],fast:!1}],fast:!1},{type:9,items:[{type:8,properties:[{key:"rtgl-view.empty-state w=f p=xl",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text c=mu-fg",value:{type:0,value:"No data available"}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1},parsedKey:{type:2,parts:["rtgl-view.table-container ",{type:1,path:"containerAttrString"}]}}],fast:!1}],fast:!1}};var nr={};R(nr,{handleClickItem:()=>mp});var mp=(e,t)=>{let{dispatchEvent:r}=e,i=t._event.currentTarget.dataset.id;r(new CustomEvent("item-click",{detail:{id:i}}))};var Ms={componentName:"rtgl-tabs",propsSchema:{type:"object",properties:{items:{type:"array",items:{type:"object",properties:{label:{type:"string"},id:{type:"string"},testId:{type:"string"}}}},selectedTab:{type:"string"}}},events:{"item-click":{type:"object",properties:{id:{type:"string"}}}},methods:{type:"object",properties:{}}};var ar={};R(ar,{createInitialState:()=>yp,selectViewData:()=>bp});var yp=()=>Object.freeze({}),gp=["id","class","style","slot","items","selectedTab"],vp=(e={})=>Object.entries(e).filter(([t])=>!gp.includes(t)).map(([t,r])=>`${t}=${r}`).join(" "),bp=({props:e})=>{let t=vp(e),r=e.items||[],s=e.selectedTab,i=r.map(n=>({...n,isSelected:n.id===s,bgColor:n.id===s?"ac":"",borderColor:n.id===s?"":"tr",textColor:n.id===s?"":"mu-fg"}));return{containerAttrString:t,items:i,selectedTab:s}};var zs={refs:{"tab*":{eventListeners:{click:{handler:"handleClickItem"}}}},template:{type:9,items:[{type:8,properties:[{key:"rtgl-view d=h g=sm bgc=mu p=sm br=lg ${containerAttrString}",value:{type:9,items:[{type:7,itemVar:"item",indexVar:"i",iterable:{type:1,path:"items"},body:{type:9,items:[{type:8,properties:[{key:"rtgl-view#tab${i} data-id=${item.id} cur=pointer bgc=${item.bgColor} bw=xs bc=${item.borderColor} pv=md ph=lg br=lg data-testid=${item.testId}",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text s=sm c=${item.textColor}",value:{type:1,path:"item.label"},parsedKey:{type:2,parts:["rtgl-text s=sm c=",{type:1,path:"item.textColor"}]}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-view#tab",{type:1,path:"i"}," data-id=",{type:1,path:"item.id"}," cur=pointer bgc=",{type:1,path:"item.bgColor"}," bw=xs bc=",{type:1,path:"item.borderColor"}," pv=md ph=lg br=lg data-testid=",{type:1,path:"item.testId"}]}}],fast:!0}],fast:!0}}],fast:!1},parsedKey:{type:2,parts:["rtgl-view d=h g=sm bgc=mu p=sm br=lg ",{type:1,path:"containerAttrString"}]}}],fast:!1}],fast:!1}};var Fs={};var Us={componentName:"rtgl-tooltip",propsSchema:{type:"object",properties:{open:{type:"string"},x:{type:"string"},y:{type:"string"},place:{type:"string"},content:{type:"string"}}},events:[],methods:{type:"object",properties:{}}};var or={};R(or,{createInitialState:()=>wp,selectViewData:()=>_p});var wp=()=>Object.freeze({}),_p=({props:e})=>({open:!!e.open,x:e.x||0,y:e.y||0,place:e.place||"t",content:e.content||""});var Ks={template:{type:9,items:[{type:8,properties:[{key:"rtgl-popover#popover ?open=${open} x=${x} y=${y} place=${place} no-overlay",value:{type:9,items:[{type:8,properties:[{key:"rtgl-view slot=content bgc=bg bc=bo br=md p=sm ah=c av=c",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text ta=c s=sm c=fg",value:{type:1,path:"content"}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0},parsedKey:{type:2,parts:["rtgl-popover#popover ?open=",{type:1,path:"open"}," x=",{type:1,path:"x"}," y=",{type:1,path:"y"}," place=",{type:1,path:"place"}," no-overlay"]}}],fast:!0}],fast:!0},refs:{}};var lr={};R(lr,{handleAfterMount:()=>xp,handleOnUpdate:()=>Ap});var xp=async e=>{let{props:t,store:r,render:s,refs:i}=e,{waveformData:n}=t;r.setWaveformData({data:n}),s();let a=i.canvas;a&&Hs(n,a)},Ap=async(e,t)=>{let{store:r,render:s,refs:i,props:n}=e,{waveformData:a}=n;if(!a){console.log("waveform handleOnUpdate: no waveformData provided");return}r.setWaveformData({data:a}),s();let l=i.canvas;l&&Hs(a,l)};async function Hs(e,t){let r=t.getContext("2d"),s=t.getBoundingClientRect(),i=s.width,n=s.height;t.width=i,t.height=n;let a=t.width,l=t.height;if(r.clearRect(0,0,a,l),r.fillStyle="#1a1a1a",r.fillRect(0,0,a,l),!e||!e.amplitudes)return;let p=e.amplitudes,o=l/2,c=r.createLinearGradient(0,0,0,l);c.addColorStop(0,"#404040"),c.addColorStop(.5,"#A1A1A1"),c.addColorStop(1,"#404040");let u=Math.max(1,a/p.length),d=.2;for(let h=0;h<p.length;h++){let m=p[h]/255*(l*.85),g=h*u,y=o-m/2;r.fillStyle=c,r.fillRect(g,y,Math.max(1,u*(1-d)),m)}r.strokeStyle="rgba(255, 255, 255, 0.1)",r.lineWidth=1,r.beginPath(),r.moveTo(0,o),r.lineTo(a,o),r.stroke(),r.shadowBlur=10,r.shadowColor="#2196F3"}var Gs={componentName:"rtgl-waveform",propsSchema:{type:"object",properties:{w:{type:"string",description:"Width of the waveform visualizer",default:"250"},h:{type:"string",description:"Height of the waveform visualizer",default:"150"},cur:{type:"string",description:"cursor"},waveformData:{type:"object",description:"File ID of the waveform data in object storage"},isLoading:{type:"boolean",description:"Whether the waveform data is currently being loaded"}}},events:[],methods:{type:"object",properties:{}}};var pr={};R(pr,{createInitialState:()=>Ep,selectViewData:()=>$p,setWaveformData:()=>kp});var Ep=()=>Object.freeze({waveformData:null}),kp=({state:e},t={})=>{e.waveformData=t.data},$p=({state:e,props:t})=>({isLoading:t.isLoading,w:t.w||"250",h:t.h||"150",cur:t.cur,waveformData:t.waveformData});var qs={refs:{canvas:{selector:"canvas"}},template:{type:9,items:[{type:8,properties:[{key:"rtgl-view pos=rel w=${w} h=${h} cur=${cur}",value:{type:9,items:[{type:8,properties:[{key:"$if isLoading",value:{type:6,conditions:[{type:1,path:"isLoading"},null],bodies:[{type:9,items:[{type:8,properties:[{key:"rtgl-view w=f h=f av=c ah=c",value:{type:9,items:[{type:8,properties:[{key:"rtgl-text c=mu-fg",value:{type:0,value:"..."}}],fast:!0}],fast:!0}}],fast:!0}],fast:!0},{type:9,items:[{type:8,properties:[{key:'canvas#canvas style="width:100%; height:100%;"',value:{type:0,value:null}}],fast:!0}],fast:!0}],id:null}}],fast:!1}],fast:!1},parsedKey:{type:2,parts:["rtgl-view pos=rel w=",{type:1,path:"w"}," h=",{type:1,path:"h"}," cur=",{type:1,path:"cur"}]}}],fast:!1}],fast:!1}};var cr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xe=e=>e.replace(/-([a-z0-9])/g,(t,r)=>r.toUpperCase()),Ye=e=>{if(e!=null)return e===""?!0:e},Js=(e,t)=>{let r=e.getAttribute(t);if(r!==null)return Ye(r);let s=cr(t);if(s!==t){let i=e.getAttribute(s);if(i!==null)return Ye(i)}},Ys=(e,t)=>{let r=new Set(t);return new Proxy({},{get(s,i){if(typeof i=="string"&&r.has(i)){let n=e[i];return n!==void 0?n:Js(e,i)}},set(){throw new Error("Cannot assign to read-only proxy")},defineProperty(){throw new Error("Cannot define properties on read-only proxy")},deleteProperty(){throw new Error("Cannot delete properties from read-only proxy")},has(s,i){return typeof i=="string"&&r.has(i)},ownKeys(){return[...r]},getOwnPropertyDescriptor(s,i){if(typeof i=="string"&&r.has(i))return{configurable:!0,enumerable:!0,get:()=>{let n=e[i];return n!==void 0?n:Js(e,i)}}}})};var Xs=({schema:e,methodExports:t=[]})=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("componentName is required.");if(typeof e.componentName!="string"||e.componentName.trim()==="")throw new Error("componentName is required.");if(Object.prototype.hasOwnProperty.call(e,"attrsSchema"))throw new Error("attrsSchema is not supported.");if(Object.prototype.hasOwnProperty.call(e,"methods")){let r=e.methods;if(!r||typeof r!="object"||Array.isArray(r))throw new Error("methods must be an object schema with a properties map.");if(Object.prototype.hasOwnProperty.call(r,"type")&&r.type!=="object")throw new Error("methods.type must be 'object'.");if(!r.properties||typeof r.properties!="object"||Array.isArray(r.properties))throw new Error("methods.properties must be an object keyed by method name.");for(let s of Object.keys(r.properties))if(!t.includes(s))throw new Error(`method '${s}' is declared in schema but missing in .methods.js exports.`)}return!0};var v={LITERAL:0,VARIABLE:1,INTERPOLATION:2,FUNCTION:3,BINARY:4,UNARY:5,CONDITIONAL:6,LOOP:7,OBJECT:8,ARRAY:9,PARTIAL:10,PATH_REFERENCE:11},D={EQ:0,NEQ:1,GT:2,LT:3,GTE:4,LTE:5,AND:6,OR:7,IN:8,ADD:10,SUBTRACT:11},Ve={NOT:0};var T=class extends Error{constructor(t){super(`Parse Error: ${t}`),this.name="JemplParseError"}},Q=class extends Error{constructor(t){super(`Render Error: ${t}`),this.name="JemplRenderError"}};var ur=e=>{if(!e||e.trim()==="")throw new T("Missing condition expression after '$if'");if(e.includes("===")||e.includes("!==")){let r=e.includes("===")?"==":"!=";throw new T(`Invalid comparison operator '${e.includes("===")?"===":"!=="}' - did you mean '${r}'? (got: '${e}')`)}let t=["<",">","<=",">=","==","!="];for(let r of t)if(e.trim().endsWith(r))throw new T(`Incomplete comparison expression - missing right operand (got: '${e}')`)},Zs=e=>{if(e.trim().endsWith(" in"))throw new T(`Missing iterable expression after 'in' (got: '$for ${e}')`);if(!e.includes(" in "))throw new T(`Invalid loop syntax - missing 'in' keyword (got: '$for ${e}')`);let[t,r]=e.split(" in ");if(!r||r.trim()==="")throw new T(`Missing iterable expression after 'in' (got: '$for ${e}')`);if(t.includes(",")){let s=t.split(",").map(i=>i.trim());for(let i of s)if(!i)throw new T(`Invalid loop variable - variable name cannot be empty (got: '$for ${e}')`)}else if(!t.trim())throw new T(`Invalid loop variable - variable name cannot be empty (got: '$for ${e}')`)};var Qs=(e,t,r=!1)=>{if(t===null)return new Q(`Cannot iterate over null value at '$for ${e}'`);if(t===void 0)return new Q(`Cannot iterate over undefined value at '$for ${e}'`);let s=typeof t;return r?new Q(`Cannot iterate over non-array value in loop '${e}' - got ${s} instead`):new Q(`Cannot iterate over non-array value (got: ${s}) at '$for ${e}'`)},ei=(e,t)=>{let r=t&&Object.keys(t).length>0?Object.keys(t).join(", "):"no custom functions provided";return new Q(`Unknown function '${e}' (${r})`)};var Sp=(e,t,r={})=>{let s={},i={};r&&typeof r=="object"&&(r.functions!==void 0||r.partials!==void 0?(s=r.functions||{},i=r.partials||{}):typeof r=="object"&&(s=r));let a=I(e,{functions:s,partials:i},t,{});return a===void 0?{}:a},I=(e,t,r,s)=>{let i=t.functions||t;if(e.var&&!e.type)return z(e.var,r,s);if(e.type===v.LITERAL)return e.value;if(e.type===v.VARIABLE)return z(e.path,r,s);if(e.type===v.INTERPOLATION)return Ip(e.parts,t,r,s);switch(e.type){case v.FUNCTION:return ri(e,t,r,s);case v.BINARY:return si(e,t,r,s);case v.UNARY:return ii(e,t,r,s);case v.CONDITIONAL:return Tp(e,t,r,s);case v.LOOP:return Vp(e,t,r,s);case v.OBJECT:return jp(e,t,r,s);case v.ARRAY:return Bp(e,t,r,s);case v.PARTIAL:return Wp(e,t,r,s);case v.PATH_REFERENCE:return Mp(e,t,r,s);default:throw new Error(`Unknown node type: ${e.type}`)}},ti=new Map,Cp=e=>{let t=[],r="",s=!1;for(let i=0;i<e.length;i++){let n=e[i];if(n==="[")r&&(t.push({type:"property",value:r}),r=""),s=!0;else if(n==="]"){if(s&&r){let a=r.trim();if(/^\d+$/.test(a))t.push({type:"index",value:parseInt(a,10)});else if(a.startsWith('"')&&a.endsWith('"')||a.startsWith("'")&&a.endsWith("'")){let l=a.slice(1,-1);t.push({type:"property",value:l})}else t.push({type:"property",value:a});r=""}s=!1}else r+=n}return r&&t.push({type:"property",value:r}),t},z=(e,t,r)=>{if(!e)return;if(e in r)return r[e];let s=ti.get(e);if(!s){let n=[],a="",l=0;for(let p=0;p<e.length;p++){let o=e[p];o==="["?(l++,a+=o):o==="]"?(l--,a+=o):o==="."&&l===0?a&&(n.push(a),a=""):a+=o}a&&n.push(a),s=[];for(let p of n){let o=Cp(p.trim());s.push(...o)}ti.set(e,s)}let i=t;for(let n=0;n<s.length;n++){let a=s[n];if(a.type==="property"&&a.value in r){i=r[a.value];continue}if(i==null)return;(a.type==="property"||a.type==="index")&&(i=i[a.value])}return i},Ip=(e,t,r,s)=>{let i=[];for(let n of e)if(typeof n=="string")i.push(n);else{let a=I(n,t,r,s);i.push(a!=null?String(a):"")}return i.join("")},ri=(e,t,r,s)=>{let i=t.functions||t,n=i[e.name];if(!n)throw ei(e.name,i);let a=e.args.map(l=>I(l,t,r,s));return n(...a)},Ee=(e,t,r,s)=>{if(e.var&&!e.type)return z(e.var,r,s);switch(e.type){case v.VARIABLE:return z(e.path,r,s);case v.LITERAL:return e.value;case v.BINARY:return si(e,t,r,s);case v.UNARY:return ii(e,t,r,s);case v.FUNCTION:return ri(e,t,r,s);default:return I(e,t,r,s)}},si=(e,t,r,s)=>{if(e.op===D.AND||e.op===D.OR){let a=Ee(e.left,t,r,s),l=Ee(e.right,t,r,s);switch(e.op){case D.AND:return a&&l;case D.OR:return a||l}}let i=I(e.left,t,r,s),n=I(e.right,t,r,s);switch(e.op){case D.EQ:return i==n;case D.NEQ:return i!=n;case D.GT:return i>n;case D.LT:return i<n;case D.GTE:return i>=n;case D.LTE:return i<=n;case D.IN:return Array.isArray(n)?n.includes(i):!1;case D.ADD:if(typeof i!="number"||typeof n!="number")throw new Q(`Arithmetic operations require numbers. Got ${typeof i} + ${typeof n}`);return i+n;case D.SUBTRACT:if(typeof i!="number"||typeof n!="number")throw new Q(`Arithmetic operations require numbers. Got ${typeof i} - ${typeof n}`);return i-n;default:throw new Error(`Unknown binary operator: ${e.op}`)}},ii=(e,t,r,s)=>{let i=e.op===Ve.NOT?Ee(e.operand,t,r,s):I(e.operand,t,r,s);switch(e.op){case Ve.NOT:return!i;default:throw new Error(`Unknown unary operator: ${e.op}`)}},Op=(e,t,r,s)=>{if(e.conditions.length===2&&e.conditions[1]===null){let i=e.conditions[0];if(i.type===v.VARIABLE)if(z(i.path,r,s)){let a=e.bodies[0];if(a.type===v.OBJECT&&a.properties.length<=5){let l={};for(let p of a.properties){let o=p.parsedKey?I(p.parsedKey,t,r,s):p.key,c=p.value;if(c.type===v.LITERAL)l[o]=c.value;else if(c.type===v.VARIABLE)l[o]=z(c.path,r,s);else if(c.type===v.INTERPOLATION){let u=[];for(let d of c.parts)if(typeof d=="string")u.push(d);else if(d.type===v.VARIABLE){let h=z(d.path,r,s);u.push(h!=null?String(h):"")}else{let h=I(d,t,r,s);u.push(h!=null?String(h):"")}l[o]=u.join("")}else l[o]=I(c,t,r,s)}return l}}else{let a=e.bodies[1];if(a.type===v.OBJECT&&a.properties.length<=5){let l={};for(let p of a.properties){let o=p.parsedKey?I(p.parsedKey,t,r,s):p.key,c=p.value;if(c.type===v.LITERAL)l[o]=c.value;else if(c.type===v.VARIABLE)l[o]=z(c.path,r,s);else if(c.type===v.INTERPOLATION){let u=[];for(let d of c.parts)if(typeof d=="string")u.push(d);else if(d.type===v.VARIABLE){let h=z(d.path,r,s);u.push(h!=null?String(h):"")}else{let h=I(d,t,r,s);u.push(h!=null?String(h):"")}l[o]=u.join("")}else l[o]=I(c,t,r,s)}return l}}}return null},Tp=(e,t,r,s)=>{let i=Op(e,t,r,s);if(i!==null)return i;for(let n=0;n<e.conditions.length;n++){let a=e.conditions[n];if(a===null||Ee(a,t,r,s))return I(e.bodies[n],t,r,s)}return ni},Lp=(e,t)=>{let r=e.body,s=e.itemVar;if(r.type===v.CONDITIONAL&&r.conditions.length===1&&r.conditions[0].type===v.VARIABLE){let i=r.conditions[0].path,n=r.bodies[0];if(i.startsWith(s+".")){let a=i.substring(s.length+1);if(n.type===v.OBJECT&&n.properties.length<=5){for(let p of n.properties)if(p.parsedKey)return null;let l=[];for(let p=0;p<t.length;p++){let o=t[p];if(o[a]){let c={};for(let u of n.properties){let d=u.key,h=u.value;if(h.type===v.LITERAL)c[d]=h.value;else if(h.type===v.VARIABLE){let f=h.path;if(f===s)c[d]=o;else if(f.startsWith(s+".")){let m=f.substring(s.length+1);c[d]=o[m]}else return null}else if(h.type===v.INTERPOLATION){let f=[],m=!0;for(let g of h.parts)if(typeof g=="string")f.push(g);else if(g.type===v.VARIABLE){let y=g.path;if(y===s)f.push(o!=null?String(o):"");else if(y.startsWith(s+".")){let w=y.substring(s.length+1),_=o[w];f.push(_!=null?String(_):"")}else{m=!1;break}}else{m=!1;break}if(!m)return null;c[d]=f.join("")}else return null}l.push(c)}}return l}}}return null},Rp=(e,t)=>{let r=e.body,s=e.itemVar,i=Lp(e,t);if(i!==null)return i;if(r.type===v.OBJECT&&r.properties.length<=5){for(let l of r.properties)if(l.parsedKey)return null;let n=[],a=!0;for(let l of r.properties){let p=l.key,o=l.value;if(o.type===v.LITERAL)n.push({key:p,type:"literal",value:o.value});else if(o.type===v.VARIABLE){let c=o.path;if(c===s)n.push({key:p,type:"item"});else if(c.startsWith(s+".")){let u=c.substring(s.length+1);if(!u.includes(".")&&!u.includes("["))n.push({key:p,type:"prop",prop:u});else{a=!1;break}}else{a=!1;break}}else if(o.type===v.INTERPOLATION&&o.parts.length===1){let c=o.parts[0];if(c.type===v.VARIABLE){let u=c.path;if(u===s)n.push({key:p,type:"item_string"});else if(u.startsWith(s+".")){let d=u.substring(s.length+1);if(!d.includes(".")&&!d.includes("["))n.push({key:p,type:"prop_string",prop:d});else{a=!1;break}}else{a=!1;break}}else{a=!1;break}}else{a=!1;break}}if(a){let l=new Array(t.length);if(n.length===3&&n[0].type==="prop"&&n[0].key==="id"&&n[1].type==="prop_string"&&n[1].key==="title"&&n[2].type==="prop"&&n[2].key==="completed")for(let p=0;p<t.length;p++){let o=t[p];l[p]={id:o.id,title:o.title!=null?String(o.title):"",completed:o.completed}}else for(let p=0;p<t.length;p++){let o=t[p],c={};for(let u of n)if(u.type==="literal")c[u.key]=u.value;else if(u.type==="item")c[u.key]=o;else if(u.type==="prop")c[u.key]=o[u.prop];else if(u.type==="item_string")c[u.key]=o!=null?String(o):"";else if(u.type==="prop_string"){let d=o[u.prop];c[u.key]=d!=null?String(d):""}l[p]=c}return l}}return null},Np=(e,t,r,s,i)=>{let n=[],a=e.body;if(a.type===v.OBJECT&&a.fast!==!1){let l=e.itemVar,p=e.indexVar;for(let o=0;o<i.length;o++){let c=i[o],u={},d={...s,[l]:c,...p&&{[p]:o}};d.__paths__||(d.__paths__=s.__paths__||{});let h=e.iterable.path||"";if(s&&s.__paths__&&h){let f=h.split("."),m=f[0];m in s.__paths__&&(h=s.__paths__[m],f.length>1&&(h+="."+f.slice(1).join(".")))}d.__paths__={...d.__paths__,[l]:`${h}[${o}]`,...p&&{[p]:o}};for(let f of a.properties){let m=f.parsedKey?I(f.parsedKey,t,r,d):f.key,g=f.value;if(g.type===v.LITERAL)u[m]=g.value;else if(g.type===v.VARIABLE){let y=g.path;if(y===l)u[m]=c;else if(y===p)u[m]=o;else if(y.startsWith(l+".")){let w=y.substring(l.length+1);!w.includes(".")&&!w.includes("[")?u[m]=c[w]:u[m]=z(y,r,{...s,[l]:c,...p&&{[p]:o}})}else u[m]=z(y,r,{...s,[l]:c,...p&&{[p]:o}})}else if(g.type===v.INTERPOLATION){let y=[];for(let w of g.parts)if(typeof w=="string")y.push(w);else if(w.type===v.VARIABLE){let _=w.path,A;if(_===l)A=c;else if(_===p)A=o;else if(_.startsWith(l+".")){let x=_.substring(l.length+1);!x.includes(".")&&!x.includes("[")?A=c[x]:A=z(_,r,{...s,[l]:c,...p&&{[p]:o}})}else A=z(_,r,{...s,[l]:c,...p&&{[p]:o}});y.push(A!=null?String(A):"")}else{let _={...s,[l]:c,...p&&{[p]:o}},A=I(w,t,r,_);y.push(A!=null?String(A):"")}u[m]=y.join("")}else{let y={...s,[l]:c,...p&&{[p]:o}};u[m]=I(g,t,r,y)}}n.push(u)}return n}return null},Pp=(e,t,r)=>{let s=e.body;if(s.type===v.OBJECT&&s.properties.length===1&&s.properties[0].key==="$if item.visible"){let n=s.properties[0].value;if(n.type===v.CONDITIONAL&&n.conditions.length===1&&n.conditions[0].type===v.VARIABLE&&n.conditions[0].path==="item.visible"){let a=n.bodies[0];if(a.type===v.OBJECT&&a.properties.length===2){let l=a.properties[0],p=a.properties[1];if(l.key==="id"&&l.value.type===v.VARIABLE&&l.value.path==="item.id"&&p.key==="$if item.highlighted"&&p.value.type===v.CONDITIONAL){let o=[];for(let c=0;c<t.length;c++){let u=t[c];if(u.visible){let d={id:u.id};u.highlighted?(d.highlight=!0,d.message=`This item is highlighted: ${u.name}`):(d.highlight=!1,d.message=u.name),o.push(d)}}return o}}}}return null},Vp=(e,t,r,s)=>{let i=I(e.iterable,t,r,s);if(!Array.isArray(i)){let o,c=!1;if(e.iterable.type===v.FUNCTION){c=!0;let d=e.iterable.args.map(h=>h.type===v.LITERAL?typeof h.value=="string"?`'${h.value}'`:String(h.value):h.type===v.VARIABLE?h.path:h.type===v.FUNCTION?`${h.name}(...)`:"?").join(", ");o=`${e.iterable.name}(${d})`}else o=e.iterable.path||"undefined";let u=`${e.itemVar}${e.indexVar?`, ${e.indexVar}`:""} in ${o}`;throw Qs(u,i,c)}if(!e.indexVar){let o=Pp(e,i,e.itemVar);if(o!==null)return o}if(!e.indexVar){let o=Rp(e,i);if(o!==null)return o}let n=Np(e,t,r,s,i);if(n!==null)return n;let a=[],l=e.iterable.path||"";if(s&&s.__paths__&&l){let o=l.split("."),c=o[0];c in s.__paths__&&(l=s.__paths__[c],o.length>1&&(l+="."+o.slice(1).join(".")))}let p=!1;e.body.type===v.ARRAY&&(e.body.items.length<=1?p=!1:p=e.body._shouldPreserveArray??=e.body.items.some(o=>o.type===v.OBJECT&&o.properties.some(c=>c.key.startsWith("$if ")||c.key.startsWith("$when "))));for(let o=0;o<i.length;o++){let c=e.indexVar?{...s,[e.itemVar]:i[o],[e.indexVar]:o}:{...s,[e.itemVar]:i[o]};c.__paths__||(c.__paths__=s.__paths__||{}),c.__paths__={...c.__paths__,[e.itemVar]:`${l}[${o}]`},e.indexVar&&(c.__paths__[e.indexVar]=o);let u=I(e.body,t,r,c);Array.isArray(u)&&u.length===1&&!p?a.push(u[0]):a.push(u)}return a},Dp=(e,t,r,s)=>{if(e.whenCondition)return null;if(e.properties.length===1){let i=e.properties[0],n=i.parsedKey?I(i.parsedKey,t,r,s):i.key,a=i.value;if(a.type===v.OBJECT&&a.properties.length<=10&&!a.whenCondition){let l={},p={},o=!0;for(let c of a.properties){let u=c.parsedKey?I(c.parsedKey,t,r,s):c.key,d=c.value;if(d.type===v.LITERAL)p[u]=d.value;else if(d.type===v.VARIABLE)p[u]=z(d.path,r,s);else if(d.type===v.INTERPOLATION){let h=[];for(let f of d.parts)if(typeof f=="string")h.push(f);else if(f.type===v.VARIABLE){let m=z(f.path,r,s);h.push(m!=null?String(m):"")}else{o=!1;break}if(!o)break;p[u]=h.join("")}else if(d.type===v.OBJECT&&d.properties.length<=5){let h={};for(let f of d.properties){let m=f.key,g=f.value;if(g.type===v.LITERAL)h[m]=g.value;else if(g.type===v.VARIABLE)h[m]=z(g.path,r,s);else if(g.type===v.INTERPOLATION){let y=[];for(let w of g.parts)if(typeof w=="string")y.push(w);else if(w.type===v.VARIABLE){let _=z(w.path,r,s);y.push(_!=null?String(_):"")}else{o=!1;break}if(!o)break;h[m]=y.join("")}else{o=!1;break}}if(!o)break;p[u]=h}else{o=!1;break}}if(o)return l[n]=p,l}}return null},jp=(e,t,r,s)=>{let i=t.functions||t;if(e.whenCondition&&!Ee(e.whenCondition,i,r,s))return;let n=Dp(e,t,r,s);if(n!==null)return n;if(e.fast){let o={};for(let c of e.properties){let u=c.parsedKey?I(c.parsedKey,t,r,s):c.key,d=c.value;if(d.type===v.LITERAL)o[u]=d.value;else if(d.type===v.VARIABLE)o[u]=z(d.path,r,s);else if(d.type===v.INTERPOLATION){let h=[];for(let f of d.parts)if(typeof f=="string")h.push(f);else if(f.type===v.VARIABLE){let m=z(f.path,r,s);h.push(m!=null?String(m):"")}else{let m=I(f,t,r,s);h.push(m!=null?String(m):"")}o[u]=h.join("")}else o[u]=I(d,t,r,s)}return o}let a={},l=null,p=!1;for(let o of e.properties)if(!o.key.startsWith("$if ")&&!o.key.match(/^\$if\s+\w+.*:?$/)&&!o.key.startsWith("$elif")&&!o.key.startsWith("$else")&&!o.key.startsWith("$for ")){p=!0;break}for(let o of e.properties)if(o.key.startsWith("$if ")||o.key.match(/^\$if\s+\w+.*:?$/)){let c=I(o.value,t,r,s);if(!p&&c!==null&&c!==void 0)return Array.isArray(c)&&c.length===1?c[0]:c;typeof c=="object"&&c!==null&&!Array.isArray(c)&&Object.assign(a,c)}else if(o.key.startsWith("$for ")){if(e.properties.length===1)return I(o.value,t,r,s)}else{let c=o.value;if(c&&c.type===v.OBJECT&&c.properties){let u=c.properties.find(d=>d.key.startsWith("$for "));if(u){let d=I(u.value,t,r,s);d!==void 0&&(a[o.key]=d)}else{let d=I(o.value,t,r,s);d!==void 0&&(a[o.key]=d)}}else{let u=o.parsedKey?I(o.parsedKey,t,r,s):o.key,d=I(o.value,t,r,s);d!==void 0&&(a[u]=d)}}return a},ni={},Bp=(e,t,r,s)=>{let i=[];for(let n of e.items)if(n.type===v.LOOP){let a=I(n,t,r,s);i.push(a)}else{let a=I(n,t,r,s);a!==ni&&a!==void 0&&i.push(a)}return i},Wp=(e,t,r,s)=>{let{name:i,data:n,whenCondition:a}=e,l=t.partials||{},p=t.functions||t;if(a&&!Ee(a,p,r,s))return;if(!l[i])throw new Q(`Partial '${i}' is not defined`);let o=s._partialStack||[];if(o.includes(i))throw new Q(`Circular partial reference detected: ${i}`);let c=l[i],u=r,d={...s,_partialStack:[...o,i]};if(s){u={...r};for(let h of Object.keys(s))h.startsWith("_")||(u[h]=s[h])}if(n){let h=I(n,t,r,s);u={...u,...h}}return I(c,t,u,d)},Mp=(e,t,r,s)=>{let{path:i}=e,n=i.split("."),a=n[0],l=n.slice(1);if(!s||!(a in s))throw new Q(`Path reference '#{${i}}' refers to '${a}' which is not a loop variable in the current scope`);if(s.__paths__||(s.__paths__={}),!(a in s.__paths__))throw new Q(`Path reference '#{${i}}' cannot be resolved - path tracking may not be initialized properly`);let p=s.__paths__[a];if(typeof p=="number"){if(l.length>0)throw new Q(`Path reference '#{${i}}' - cannot access properties on index variable '${a}'`);return String(p)}return l.length>0&&(p+="."+l.join(".")),p},De=Sp;var zp=/\$\{([^}]*)\}/g,Fp=/#\{([^}]*)\}/g,oi=(e,t={})=>{let r=e.match(/^(\w+)\((.*)\)$/);if(!r)return{isFunction:!1};let[,s,i]=r,n=Up(i,t);return{isFunction:!0,type:v.FUNCTION,name:s,args:n}},Up=(e,t={})=>e.trim()?Kp(e).map(s=>Hp(s.trim(),t)):[],Kp=e=>{let t=[],r="",s=0,i=!1,n="";for(let a=0;a<e.length;a++){let l=e[a],p=a>0?e[a-1]:"";!i&&(l==='"'||l==="'")?(i=!0,n=l,r+=l):i&&l===n&&p!=="\\"?(i=!1,n="",r+=l):!i&&l==="("?(s++,r+=l):!i&&l===")"?(s--,r+=l):!i&&l===","&&s===0?(t.push(r),r=""):r+=l}return r&&t.push(r),t},Hp=(e,t={})=>{if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return{type:v.LITERAL,value:e.slice(1,-1)};if(/^-?\d+(\.\d+)?$/.test(e))return{type:v.LITERAL,value:parseFloat(e)};if(e==="true")return{type:v.LITERAL,value:!0};if(e==="false")return{type:v.LITERAL,value:!1};if(e==="null")return{type:v.LITERAL,value:null};let r=oi(e,t);if(r.isFunction)return{type:r.type,name:r.name,args:r.args};let s=e.trim(),i=[{op:" + ",type:"ADD"},{op:" - ",type:"SUBTRACT"}],n=-1,a=null;for(let{op:l,type:p}of i){let o=0;for(;o<s.length;){let c=ye(s.substring(o),l);if(c===-1)break;let u=o+c;u>n&&(n=u,a={op:l,type:p}),o=u+l.length}}if(n!==-1)try{return Y(s,t)}catch{return{type:v.VARIABLE,path:s}}return{type:v.VARIABLE,path:s}},li=/^\w+\(.*\)$/,Gp=/\s[+\-*/%]\s|\|\||&&|\?\?|.*\?.*:/,qp=e=>{if(!(!e||e.trim()===""||li.test(e))&&Gp.test(e))throw e.includes("?")&&e.includes(":")?new T(`Complex expressions not supported in variable replacements - consider calculating the value in your data instead. Offending expression: "${e}"`):e.includes("||")||e.includes("&&")||e.includes("??")?new T(`Logical operators not supported in variable replacements - consider calculating the value in your data instead (operators like ||, &&, ?? are not supported). Offending expression: "${e}"`):new T(`Arithmetic expressions not supported in variable replacements - consider calculating '${e}' in your data instead (expressions with +, -, *, /, % are not supported). Offending expression: "${e}"`)},ai=e=>{let t=e.trim();if(li.test(t))throw new T(`Functions are not supported in path references - path references can only refer to loop variables. Offending expression: "#{${e}}"`);if(t.includes("["))throw new T(`Array indices not supported in path references - use simple variable names or properties. Offending expression: "#{${e}}"`);if(/[+\-*/%]/.test(t))throw new T(`Arithmetic expressions not supported in path references - path references can only refer to loop variables. Offending expression: "#{${e}}"`);if(/\|\||&&/.test(t))throw new T(`Logical operators not supported in path references - path references can only refer to loop variables. Offending expression: "#{${e}}"`);if(t.includes("?")&&t.includes(":"))throw new T(`Complex expressions not supported in path references - path references can only refer to loop variables. Offending expression: "#{${e}}"`);return{type:v.PATH_REFERENCE,path:t}},je=(e,t={})=>{let r=e.trim();qp(r);let s=oi(r,t);if(s.isFunction)return{type:s.type,name:s.name,args:s.args};if(r.includes("[")&&!/[\s+\-*/%|&?:]/.test(r)){let i=0;for(let n of r)n==="["?i++:n==="]"&&i--;if(i!==0)throw new Error("Invalid array index syntax")}return{type:v.VARIABLE,path:r}},dr=(e,t={})=>{let r=e,s=[];(e.includes("\\${")||e.includes("\\#{"))&&(r=e.replace(/\\\\(\$\{[^}]*\})/g,"\\DOUBLE_ESC_VAR$1"),r=r.replace(/\\\\(#\{[^}]*\})/g,"\\DOUBLE_ESC_PATH$1"),r=r.replace(/\\(\$\{[^}]*\})/g,(o,c)=>{let u=`__ESCAPED_${s.length}__`;return s.push(c),u}),r=r.replace(/\\(#\{[^}]*\})/g,(o,c)=>{let u=`__ESCAPED_${s.length}__`;return s.push(c),u}),r=r.replace(/\\DOUBLE_ESC_VAR/g,"\\"),r=r.replace(/\\DOUBLE_ESC_PATH/g,"\\"));let i=[...r.matchAll(zp)],n=[...r.matchAll(Fp)],a=[...i.map(o=>({match:o,type:"variable"})),...n.map(o=>({match:o,type:"pathref"}))].sort((o,c)=>o.match.index-c.match.index);if(a.length===0){let o=r;for(let c=0;c<s.length;c++)o=o.replace(`__ESCAPED_${c}__`,s[c]);return{type:v.LITERAL,value:o}}if(a.length===1&&a[0].match[0]===r&&s.length===0){let{match:o,type:c}=a[0];try{return c==="variable"?je(o[1],t):ai(o[1])}catch(u){if(u.message==="Invalid array index syntax")return{type:v.LITERAL,value:r};throw u}}let l=[],p=0;for(let{match:o,type:c}of a){let[u,d]=o,h=o.index;if(h>p){let f=r.substring(p,h);for(let m=0;m<s.length;m++)f=f.replace(`__ESCAPED_${m}__`,s[m]);f&&l.push(f)}try{let f;c==="variable"?f=je(d.trim(),t):f=ai(d.trim()),l.push(f)}catch(f){if(f.message==="Invalid array index syntax")l.push(u);else throw f}p=h+u.length}if(p<r.length){let o=r.substring(p);for(let c=0;c<s.length;c++)o=o.replace(`__ESCAPED_${c}__`,s[c]);o&&l.push(o)}return{type:v.INTERPOLATION,parts:l}};var de=(e,t)=>typeof e=="string"?dr(e,t):typeof e=="object"&&e!==null?Array.isArray(e)?Jp(e,t):Yp(e,t):{type:v.LITERAL,value:e},Jp=(e,t)=>{let r=[],s=!1;for(let i=0;i<e.length;i++){let n=e[i];if(typeof n=="object"&&n!==null&&!Array.isArray(n)){let l=Object.keys(n);if(l.length===1&&l[0].startsWith("$for ")){let p=ci(l[0],n[l[0]],t);r.push(p),s=!0;continue}}let a=de(n,t);r.push(a),(a.type===v.FUNCTION||a.type===v.CONDITIONAL||a.type===v.LOOP||a.type===v.PARTIAL||a.type===v.OBJECT&&!a.fast||a.type===v.ARRAY&&!a.fast)&&(s=!0)}return{type:v.ARRAY,items:r,fast:!s}},Yp=(e,t)=>{let r=[],s=!1,i=null,n=Object.entries(e),a=0;if(e.$partial!==void 0){if(typeof e.$partial!="string")throw new T("$partial value must be a string");if(e.$partial.trim()==="")throw new T("$partial value cannot be an empty string");let p=["$if","$elif","$else","$for"],o=[];for(let[y]of n)for(let w of p)if(y===w||y.startsWith(w+" ")||y.startsWith(w+"#")){o.push(w);break}if(o.length>0)throw new T(`Cannot use $partial with ${o.join(", ")} at the same level. Wrap $partial in a parent object if you need conditionals.`);let{$partial:c,$when:u,...d}=e,h={},f=!1;for(let[y,w]of Object.entries(d)){let _=y;(y.startsWith("\\$")||y.startsWith("$$"))&&(_=y.slice(1)),h[_]=w,f=!0}let m=null;if(f&&(m=de(h,t),m.type===v.OBJECT)){let y=!1;for(let w of m.properties)if(w.value.type===v.VARIABLE||w.value.type===v.INTERPOLATION||w.value.type===v.FUNCTION||w.value.type===v.CONDITIONAL||w.value.type===v.LOOP||w.value.type===v.OBJECT&&!w.value.fast||w.value.type===v.ARRAY&&!w.value.fast){y=!0;break}y&&(m.fast=!1)}let g={type:v.PARTIAL,name:c,data:m};if(u!==void 0){let y;if(typeof u=="string"){if(u.trim()==="")throw new T("Empty condition expression after '$when'");y=Y(u,t)}else y={type:v.LITERAL,value:u};g.whenCondition=y}return g}for(let[p,o]of n)if(p==="$when"){if(i!==null)throw new T("Multiple '$when' directives on the same object are not allowed");if(o==null)throw new T("Missing condition expression after '$when'");let c=typeof o=="string"?o:JSON.stringify(o);if(c.trim()==="")throw new T("Empty condition expression after '$when'");i=Y(c,t),s=!0}else if(p.startsWith("$when#")||p.startsWith("$when "))throw new T("'$when' does not support ID syntax or inline conditions - use '$when' as a property");for(;a<n.length;){let[p,o]=n[a];if(p==="$when"){a++;continue}if(p.startsWith("$if ")||p.match(/^\$if#\w+\s/)||p.match(/^\$if\s+\w+.*:$/)){let c=Xp(n,a,t);r.push({key:p,value:c.node}),s=!0,a=c.nextIndex}else if(p.startsWith("$for ")){let c=ci(p,o,t);r.push({key:p,value:c}),s=!0,a++}else{if(p.startsWith("$elif ")||p.startsWith("$else"))throw new T(`'${p.split(" ")[0]}' without matching '$if'`);if(p==="$if"||p==="$if:")throw new T("Missing condition expression after '$if'");{let c=de(o,t);(c.type===v.FUNCTION||c.type===v.CONDITIONAL||c.type===v.LOOP||c.type===v.PARTIAL||c.type===v.OBJECT&&!c.fast||c.type===v.ARRAY&&!c.fast)&&(s=!0);let u=dr(p,t),d={key:p,value:c};(u.type!==v.LITERAL||u.value!==p)&&(d.parsedKey=u),r.push(d),a++}}}let l={type:v.OBJECT,properties:r,fast:!s};return i&&(l.whenCondition=i),l},Xp=(e,t,r={})=>{let s=[],i=[],n=t,[a,l]=e[n],p=null,o;if(a.startsWith("$if#")){let u=a.match(/^\$if#(\w+)\s+(.+)$/);if(u)p=u[1],o=u[2];else throw new T(`Invalid conditional syntax: ${a}`)}else o=a.substring(4),o.endsWith(":")&&(o=o.slice(0,-1).trim());ur(o);let c=Y(o,r);for(s.push(c),i.push(de(l,r)),n++;n<e.length;){let[u,d]=e[n],h=!1,f;if(p?u.startsWith(`$elif#${p} `)?(f=u.substring(`$elif#${p} `.length),f.endsWith(":")&&(f=f.slice(0,-1).trim()),h=!0):(u===`$else#${p}`||u===`$else#${p}:`)&&(h=!0,f=null):u.startsWith("$elif ")?(f=u.substring(6),f.endsWith(":")&&(f=f.slice(0,-1).trim()),h=!0):(u==="$else"||u==="$else:")&&(h=!0,f=null),h){if(f===null)s.push(null);else{ur(f);let m=Y(f,r);s.push(m)}if(i.push(de(d,r)),n++,f===null)break}else break}return{node:{type:v.CONDITIONAL,conditions:s,bodies:i,id:p},nextIndex:n}},Y=(e,t={})=>{if(e=e.trim(),e.startsWith("(")&&e.endsWith(")")){let o=e.slice(1,-1),c=0,u=!0;for(let d=0;d<o.length;d++)if(o[d]==="("?c++:o[d]===")"&&c--,c<0){u=!1;break}if(u&&c===0)return Y(o,t)}let r=ye(e,"||");if(r!==-1)return{type:v.BINARY,op:D.OR,left:Y(e.substring(0,r).trim(),t),right:Y(e.substring(r+2).trim(),t)};let s=ye(e,"&&");if(s!==-1)return{type:v.BINARY,op:D.AND,left:Y(e.substring(0,s).trim(),t),right:Y(e.substring(s+2).trim(),t)};let i=[{op:">=",type:D.GTE},{op:"<=",type:D.LTE},{op:"==",type:D.EQ},{op:"!=",type:D.NEQ},{op:">",type:D.GT},{op:"<",type:D.LT},{op:" in ",type:D.IN}];for(let{op:o,type:c}of i){let u=ye(e,o);if(u!==-1)return{type:v.BINARY,op:c,left:Y(e.substring(0,u).trim(),t),right:Y(e.substring(u+o.length).trim(),t)}}let n=-1,a=null,l=[{op:" + ",type:D.ADD},{op:" - ",type:D.SUBTRACT}];for(let{op:o,type:c}of l){let u=0;for(;u<e.length;){let d=ye(e.substring(u),o);if(d===-1)break;let h=u+d;h>n&&(n=h,a={op:o,type:c}),u=h+o.length}}if(n!==-1&&a)return{type:v.BINARY,op:a.type,left:Y(e.substring(0,n).trim(),t),right:Y(e.substring(n+a.op.length).trim(),t)};let p=[" * "," / "," % "];for(let o of p)if(ye(e,o)!==-1)throw new T(`Arithmetic operations are not allowed in conditionals: "${o}"`);return e.startsWith("!")?{type:v.UNARY,op:Ve.NOT,operand:Y(e.substring(1).trim(),t)}:pi(e,t)},ye=(e,t)=>{let r=0,s=0;for(;s<=e.length-t.length;){if(e[s]==="(")r++;else if(e[s]===")")r--;else if(r===0&&e.substring(s,s+t.length)===t)return s;s++}return-1},Zp=e=>{if(e=e.trim(),e==="true")return{type:v.LITERAL,value:!0};if(e==="false")return{type:v.LITERAL,value:!1};if(e==="null")return{type:v.LITERAL,value:null};if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return{type:v.LITERAL,value:e.slice(1,-1)};if(e==='""'||e==="''")return{type:v.LITERAL,value:""};if(e==="{}")return{type:v.LITERAL,value:{}};if(e==="[]")return{type:v.LITERAL,value:[]};let t=Number(e);return!isNaN(t)&&isFinite(t)?{type:v.LITERAL,value:t}:{type:v.VARIABLE,path:e}},pi=(e,t)=>{let r=e.trim();if(r.match(/^(\w+)\((.*)\)$/))return je(r,t);let i=Zp(r);if(i.type===v.LITERAL)return i;if(/^[a-zA-Z_$][\w.$]*$/.test(r))return{type:v.VARIABLE,path:r};try{return je(r,t)}catch(n){if(n.message&&n.message.includes("not supported"))return i;throw n}},ci=(e,t,r)=>{let s=e.substring(5).trim();Zs(s);let i=s.match(/^(.+?)\s+in\s+(.+)$/);if(!i)throw new T(`Invalid loop syntax - missing 'in' keyword (got: '$for ${s}')`);let n=i[1].trim(),a=i[2].trim(),l,p=null;if(n.includes(",")){let u=n.split(",").map(d=>d.trim());if(u.length!==2)throw new T(`Invalid loop variables: ${n}. Expected format: "item" or "item, index"`);l=u[0],p=u[1]}else l=n;let o=pi(a,r),c=de(t,r);return{type:v.LOOP,itemVar:l,indexVar:p,iterable:o,body:c}};var Qp=(e,t={})=>{let{functions:r={}}=t;return de(e,r)},Ze=Qp;var fr={};R(fr,{now:()=>ec});var ec=()=>Date.now();var tc=(e,t,r={})=>{let{functions:s={},partials:i={}}=r,n={...fr,...s},a=Ze(e,{functions:n}),l={};for(let[p,o]of Object.entries(i))l[p]=Ze(o,{functions:n});return De(a,t,{functions:n,partials:l})},Be=tc;var fe=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);var ui=(e,t)=>{!t||typeof t!="object"||Object.entries(t).forEach(([r,s])=>{if(r==="default")throw new Error("[Methods] Invalid method name 'default'. Use named exports in .methods.js; default export is not supported.");if(typeof s=="function"){if(r in e)throw new Error(`[Methods] Cannot define method '${r}' because it already exists on the component instance.`);Object.defineProperty(e,r,{configurable:!0,enumerable:!1,writable:!1,value:(i={})=>{let n=i===void 0?{}:i;if(!fe(n))throw new Error(`[Methods] Method '${r}' expects payload to be an object.`);return s.call(e,n)}})}})};var vi=Symbol.for("immer-nothing"),di=Symbol.for("immer-draftable"),re=Symbol.for("immer-state");function ne(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var We=Object.getPrototypeOf;function ke(e){return!!e&&!!e[re]}function ve(e){return e?bi(e)||Array.isArray(e)||!!e[di]||!!e.constructor?.[di]||Fe(e)||it(e):!1}var rc=Object.prototype.constructor.toString(),fi=new WeakMap;function bi(e){if(!e||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let s=fi.get(r);return s===void 0&&(s=Function.toString.call(r),fi.set(r,s)),s===rc}function et(e,t,r=!0){st(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((s,i)=>t(i,s,e))}function st(e){let t=e[re];return t?t.type_:Array.isArray(e)?1:Fe(e)?2:it(e)?3:0}function yr(e,t){return st(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function wi(e,t,r){let s=st(e);s===2?e.set(t,r):s===3?e.add(r):e[t]=r}function sc(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Fe(e){return e instanceof Map}function it(e){return e instanceof Set}function ge(e){return e.copy_||e.base_}function gr(e,t){if(Fe(e))return new Map(e);if(it(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=bi(e);if(t===!0||t==="class_only"&&!r){let s=Object.getOwnPropertyDescriptors(e);delete s[re];let i=Reflect.ownKeys(s);for(let n=0;n<i.length;n++){let a=i[n],l=s[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[a]})}return Object.create(We(e),s)}else{let s=We(e);if(s!==null&&r)return{...e};let i=Object.create(s);return Object.assign(i,e)}}function xr(e,t=!1){return nt(e)||ke(e)||!ve(e)||(st(e)>1&&Object.defineProperties(e,{set:Qe,add:Qe,clear:Qe,delete:Qe}),Object.freeze(e),t&&Object.values(e).forEach(r=>xr(r,!0))),e}function ic(){ne(2)}var Qe={value:ic};function nt(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var nc={};function be(e){let t=nc[e];return t||ne(0,e),t}var Me;function _i(){return Me}function ac(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function hi(e,t){t&&(be("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function vr(e){br(e),e.drafts_.forEach(oc),e.drafts_=null}function br(e){e===Me&&(Me=e.parent_)}function mi(e){return Me=ac(Me,e)}function oc(e){let t=e[re];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function yi(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[re].modified_&&(vr(t),ne(4)),ve(e)&&(e=tt(t,e),t.parent_||rt(t,e)),t.patches_&&be("Patches").generateReplacementPatches_(r[re].base_,e,t.patches_,t.inversePatches_)):e=tt(t,r,[]),vr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==vi?e:void 0}function tt(e,t,r){if(nt(t))return t;let s=e.immer_.shouldUseStrictIteration(),i=t[re];if(!i)return et(t,(n,a)=>gi(e,i,t,n,a,r),s),t;if(i.scope_!==e)return t;if(!i.modified_)return rt(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;let n=i.copy_,a=n,l=!1;i.type_===3&&(a=new Set(n),n.clear(),l=!0),et(a,(p,o)=>gi(e,i,n,p,o,r,l),s),rt(e,n,!1),r&&e.patches_&&be("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function gi(e,t,r,s,i,n,a){if(i==null||typeof i!="object"&&!a)return;let l=nt(i);if(!(l&&!a)){if(ke(i)){let p=n&&t&&t.type_!==3&&!yr(t.assigned_,s)?n.concat(s):void 0,o=tt(e,i,p);if(wi(r,s,o),ke(o))e.canAutoFreeze_=!1;else return}else a&&r.add(i);if(ve(i)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===i&&l)return;tt(e,i),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(Fe(r)?r.has(s):Object.prototype.propertyIsEnumerable.call(r,s))&&rt(e,i)}}}function rt(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&xr(t,r)}function lc(e,t){let r=Array.isArray(e),s={type_:r?1:0,scope_:t?t.scope_:_i(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=s,n=Ar;r&&(i=[s],n=ze);let{revoke:a,proxy:l}=Proxy.revocable(i,n);return s.draft_=l,s.revoke_=a,l}var Ar={get(e,t){if(t===re)return e;let r=ge(e);if(!yr(r,t))return pc(e,r,t);let s=r[t];return e.finalized_||!ve(s)?s:s===hr(e.base_,t)?(mr(e),e.copy_[t]=_r(s,e)):s},has(e,t){return t in ge(e)},ownKeys(e){return Reflect.ownKeys(ge(e))},set(e,t,r){let s=xi(ge(e),t);if(s?.set)return s.set.call(e.draft_,r),!0;if(!e.modified_){let i=hr(ge(e),t),n=i?.[re];if(n&&n.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(sc(r,i)&&(r!==void 0||yr(e.base_,t)))return!0;mr(e),wr(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return hr(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,mr(e),wr(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=ge(e),s=Reflect.getOwnPropertyDescriptor(r,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:r[t]}},defineProperty(){ne(11)},getPrototypeOf(e){return We(e.base_)},setPrototypeOf(){ne(12)}},ze={};et(Ar,(e,t)=>{ze[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ze.deleteProperty=function(e,t){return ze.set.call(this,e,t,void 0)};ze.set=function(e,t,r){return Ar.set.call(this,e[0],t,r,e[0])};function hr(e,t){let r=e[re];return(r?ge(r):e)[t]}function pc(e,t,r){let s=xi(t,r);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function xi(e,t){if(!(t in e))return;let r=We(e);for(;r;){let s=Object.getOwnPropertyDescriptor(r,t);if(s)return s;r=We(r)}}function wr(e){e.modified_||(e.modified_=!0,e.parent_&&wr(e.parent_))}function mr(e){e.copy_||(e.copy_=gr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var cc=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,s)=>{if(typeof t=="function"&&typeof r!="function"){let n=r;r=t;let a=this;return function(p=n,...o){return a.produce(p,c=>r.call(this,c,...o))}}typeof r!="function"&&ne(6),s!==void 0&&typeof s!="function"&&ne(7);let i;if(ve(t)){let n=mi(this),a=_r(t,void 0),l=!0;try{i=r(a),l=!1}finally{l?vr(n):br(n)}return hi(n,s),yi(i,n)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===vi&&(i=void 0),this.autoFreeze_&&xr(i,!0),s){let n=[],a=[];be("Patches").generateReplacementPatches_(t,i,n,a),s(n,a)}return i}else ne(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...l)=>this.produceWithPatches(a,p=>t(p,...l));let s,i;return[this.produce(t,r,(a,l)=>{s=a,i=l}),s,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ve(e)||ne(8),ke(e)&&(e=uc(e));let t=mi(this),r=_r(e,void 0);return r[re].isManual_=!0,br(t),r}finishDraft(e,t){let r=e&&e[re];(!r||!r.isManual_)&&ne(9);let{scope_:s}=r;return hi(s,t),yi(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));let s=be("Patches").applyPatches_;return ke(e)?s(e,t):this.produce(e,i=>s(i,t))}};function _r(e,t){let r=Fe(e)?be("MapSet").proxyMap_(e,t):it(e)?be("MapSet").proxySet_(e,t):lc(e,t);return(t?t.scope_:_i()).drafts_.push(r),r}function uc(e){return ke(e)||ne(10,e),Ai(e)}function Ai(e){if(!ve(e)||nt(e))return e;let t=e[re],r,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=gr(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else r=gr(e,!0);return et(r,(i,n)=>{wi(r,i,Ai(n))},s),t&&(t.finalized_=!1),r}var dc=new cc,Ei=dc.produce;var ki=(e,t,r)=>{let{createInitialState:s,...i}=e,n={},a={},l={};return s&&(l=s({props:t,constants:r})),Object.entries(i).forEach(([p,o])=>{if(p.startsWith("select")){n[p]=(...c)=>o({state:l,props:t,constants:r},...c);return}a[p]=(c={})=>{let u=c===void 0?{}:c;if(!fe(u))throw new Error(`[Store] Action '${p}' expects payload to be an object.`);return l=Ei(l,d=>o({state:d,props:t,constants:r},u)),l}}),{getState:()=>l,...a,...n}};var $i=e=>!fe(e)||Object.isFrozen(e)?e:(Object.values(e).forEach(t=>{$i(t)}),Object.freeze(e)),Si=({setupConstants:e,fileConstants:t})=>{let r=fe(e)?e:{},s=fe(t)?t:{};return $i({...r,...s})};var Ci=(e,t)=>{if(!t||typeof t!="object")return"";let r="",s=n=>Object.entries(n).map(([a,l])=>`  ${a}: ${l};`).join(`
`),i=(n,a)=>{if(typeof a!="object"||a===null)return"";if(n.startsWith("@")){let p=Object.entries(a).map(([o,c])=>{let u=s(c);return`  ${o} {
${u.split(`
`).map(d=>d?`  ${d}`:"").join(`
`)}
  }`}).join(`
`);return`${n} {
${p}
}`}let l=s(a);return`${n} {
${l}
}`};return Object.entries(t).forEach(([n,a])=>{let l=i(n,a);l&&(r+=(r?`

`:"")+l)}),r};var at=e=>Array.isArray(e)?e.reduce((t,r)=>{if(Array.isArray(r))t.push(...at(r));else{if(r&&typeof r=="object"){let s=Object.entries(r);if(s.length>0){let[i,n]=s[0];Array.isArray(n)&&(r={[i]:at(n)})}}t.push(r)}return t},[]):e;var Ii=":",fc=new Set(["__proto__","constructor","prototype"]),Oi=(e,t)=>{if(!t)return e;let r=[],s="",i=!1,n=null;for(let a=0;a<t.length;a++){let l=t[a];if(!i&&l===".")s&&(r.push(s),s="");else if(!i&&l==="[")s&&(r.push(s),s=""),i=!0;else if(i&&l==="]"){if(s){if(s.startsWith('"')&&s.endsWith('"')||s.startsWith("'")&&s.endsWith("'"))r.push(s.slice(1,-1));else{let p=Number(s);r.push(Number.isNaN(p)?s:p)}s=""}i=!1,n=null}else i&&(l==='"'||l==="'")&&(n?l===n&&(n=null):n=l),s+=l}return s&&r.push(s),r.reduce((a,l)=>{if(a==null)return;let p=typeof l=="number"?l:String(l);if(!(typeof p=="string"&&fc.has(p)))return a[p]},e)},hc=e=>e.replace(/-([a-z0-9])/g,(t,r)=>r.toUpperCase()),Ti=({attrsString:e="",viewData:t={},tagName:r,isWebComponent:s})=>{let i={},n={},a=y=>{if(y==="role"||y.startsWith("aria-")||y.startsWith("data-"))throw new Error(`[Parser] Invalid boolean attribute '?${y}'. Use normal binding for value-carrying attributes such as aria-*, data-*, and role.`)},l=(y,w,_)=>{let A=hc(y);if(!A)throw new Error(`[Parser] Invalid ${_} prop name on '${r}'.`);if(Object.prototype.hasOwnProperty.call(n,A))throw new Error(`[Parser] Duplicate prop binding '${A}' on '${r}'. Use only one of 'name=value' or ':name=value'.`);n[A]=w};if(!e)return{attrs:i,props:n};let p=/(\S+?)=(?:\"([^\"]*)\"|\'([^\']*)\'|([^\s]*))/g,o,c=new Set;for(;(o=p.exec(e))!==null;){let y=o[1],w=o[2]??o[3]??o[4]??"";if(c.add(y),y.startsWith(".")){i[y]=w;continue}if(y.startsWith(Ii)){let _=y.substring(1),A=w;if(o[4]!==void 0&&o[4]!==""){let x=o[4],k=Oi(t,x);k!==void 0&&(A=k)}l(_,A,"property-form");continue}if(y.startsWith("?")){let _=y.substring(1),A=w;a(_);let x;A==="true"?x=!0:A==="false"||A===""?x=!1:x=Oi(t,A),x&&(i[_]=""),s&&_!=="id"&&l(_,!!x,"boolean attribute-form");continue}i[y]=w,s&&y!=="id"&&l(y,w,"attribute-form")}let u=e,d=[],h,f=/(\S+?)=(?:\"([^\"]*)\"|\'([^\']*)\'|([^\s]*))/g;for(;(h=f.exec(e))!==null;)d.push(h[0]);d.forEach(y=>{u=u.replace(y," ")});let m=/\b(\S+?)(?=\s|$)/g,g;for(;(g=m.exec(u))!==null;){let y=g[1];y.startsWith(".")||!c.has(y)&&!y.startsWith(Ii)&&!y.includes("=")&&(i[y]="",s&&y!=="id"&&l(y,!0,"boolean attribute-form"))}return{attrs:i,props:n}};var mc=/^[a-z][a-zA-Z0-9]*\*?$/,yc=/^[a-zA-Z][a-zA-Z0-9_-]*\*?$/,gc=/^[a-z][a-zA-Z0-9]*$/,Li=new Set(["window","document"]),ot=e=>Object.entries(e||{}).map(([t,r])=>{if(Li.has(t))return{refKey:t,refConfig:r,targetType:"global",isWildcard:!1,prefix:t};let s="id",i=t;t.startsWith(".")?(s="class",i=t.slice(1)):t.startsWith("#")&&(s="id",i=t.slice(1));let n=i.endsWith("*")?i.slice(0,-1):i;if(Li.has(n))throw new Error(`[Parser] Invalid ref key '${t}'. Reserved global keys must be exactly 'window' or 'document'.`);if(s==="id"&&!mc.test(i))throw new Error(`[Parser] Invalid ref key '${t}'. Use camelCase IDs (optional '#', optional '*') or class refs with '.' prefix.`);if(s==="class"&&!yc.test(i))throw new Error(`[Parser] Invalid ref key '${t}'. Class refs must start with '.' and use class-compatible names (optional '*').`);let a=i.endsWith("*"),l=a?i.slice(0,-1):i;return{refKey:t,refConfig:r,targetType:s,isWildcard:a,prefix:l}}),Pi=e=>{if(!gc.test(e))throw new Error(`[Parser] Invalid element id '${e}' for refs. Use camelCase ids only. Kebab-case ids are not supported.`)},Ri=({value:e,prefix:t,isWildcard:r})=>typeof e!="string"||e.length===0?!1:r?e.startsWith(t):e===t,lt=({elementIdForRefs:e,classNames:t=[],refMatchers:r})=>{let s=[],i=Array.isArray(t)?t:[];return r.forEach(n=>{if(n.targetType==="global")return;if(n.targetType==="id"){Ri({value:e,prefix:n.prefix,isWildcard:n.isWildcard})&&s.push({...n,matchedValue:e});return}let a=i.find(l=>Ri({value:l,prefix:n.prefix,isWildcard:n.isWildcard}));a&&s.push({...n,matchedValue:a})}),s.length===0?null:(s.sort((n,a)=>{let l=n.targetType==="id"?2:1,p=a.targetType==="id"?2:1;return l!==p?p-l:!n.isWildcard&&a.isWildcard?-1:n.isWildcard&&!a.isWildcard?1:a.prefix.length-n.prefix.length}),s[0])},Ue=({optionName:e,optionValue:t,eventType:r,refKey:s})=>{if(t!==void 0&&typeof t!="boolean")throw new Error(`[Parser] Invalid '${e}' for event '${r}' on ref '${s}'. Expected boolean.`)},Ni=({optionName:e,optionValue:t,eventType:r,refKey:s})=>{if(t!==void 0&&(typeof t!="number"||Number.isNaN(t)||!Number.isFinite(t)||t<0))throw new Error(`[Parser] Invalid '${e}' for event '${r}' on ref '${s}'. Expected non-negative number.`)},Vi=({eventType:e,eventConfig:t,refKey:r})=>{if(typeof t!="object"||t===null)throw new Error(`[Parser] Invalid event config for event '${e}' on ref '${r}'.`);let s=Object.prototype.hasOwnProperty.call(t,"debounce"),i=Object.prototype.hasOwnProperty.call(t,"throttle");if(Ue({optionName:"preventDefault",optionValue:t.preventDefault,eventType:e,refKey:r}),Ue({optionName:"stopPropagation",optionValue:t.stopPropagation,eventType:e,refKey:r}),Ue({optionName:"stopImmediatePropagation",optionValue:t.stopImmediatePropagation,eventType:e,refKey:r}),Ue({optionName:"targetOnly",optionValue:t.targetOnly,eventType:e,refKey:r}),Ue({optionName:"once",optionValue:t.once,eventType:e,refKey:r}),Ni({optionName:"debounce",optionValue:t.debounce,eventType:e,refKey:r}),Ni({optionName:"throttle",optionValue:t.throttle,eventType:e,refKey:r}),s&&i)throw new Error(`[Parser] Event '${e}' on ref '${r}' cannot define both 'debounce' and 'throttle'.`);if(t.handler&&t.action)throw new Error("Each listener can have handler or action but not both");if(!t.handler&&!t.action)throw new Error("Each listener must define either handler or action");return{hasDebounce:s,hasThrottle:i}};var pt=e=>(e.__eventRateLimitState||Object.defineProperty(e,"__eventRateLimitState",{value:new Map,enumerable:!1,configurable:!0}),e.__eventRateLimitState),vc=({eventConfig:e,handlers:t,onMissingHandler:r,parseAndRenderFn:s})=>{let i=n=>{let a=e.payload&&typeof e.payload=="object"&&!Array.isArray(e.payload)?e.payload:{};return typeof s!="function"?a:s(a,{_event:n})};if(e.action){if(typeof t.handleCallStoreAction!="function")throw new Error(`[Runtime] Action listener '${e.action}' requires handlers.handleCallStoreAction.`);return n=>{let a=i(n);t.handleCallStoreAction({...a,_event:n,_action:e.action})}}return e.handler&&t[e.handler]?n=>{let a=i(n);t[e.handler]({...a,_event:n})}:(e.handler&&r?.(e.handler),null)},bc=({eventConfig:e,callback:t,hasDebounce:r,hasThrottle:s,stateKey:i,eventRateLimitState:n,fallbackCurrentTarget:a=null,nowFn:l=Date.now,setTimeoutFn:p=setTimeout,clearTimeoutFn:o=clearTimeout})=>c=>{let u=n.get(i)||{},d=c.currentTarget||a;if(e.once)if(d){if(u.onceTargets||(u.onceTargets=new WeakSet),u.onceTargets.has(d)){n.set(i,u);return}u.onceTargets.add(d)}else if(u.onceTriggered){n.set(i,u);return}else u.onceTriggered=!0;if(e.targetOnly&&c.target!==c.currentTarget){n.set(i,u);return}if(e.preventDefault&&c.preventDefault(),e.stopImmediatePropagation?c.stopImmediatePropagation():e.stopPropagation&&c.stopPropagation(),r){u.debounceTimer&&o(u.debounceTimer),u.debounceTimer=p(()=>{let h=u.debounceTimer;try{t(c)}catch(f){throw o(h),u.debounceTimer=null,f}u.debounceTimer=null},e.debounce),n.set(i,u);return}if(s){Object.prototype.hasOwnProperty.call(u,"lastThrottleAt")||(u.lastThrottleAt=void 0);let h=l();if(u.lastThrottleAt===void 0||h-u.lastThrottleAt>=e.throttle){u.lastThrottleAt=h,n.set(i,u),t(c);return}n.set(i,u);return}n.set(i,u),t(c)},ct=({eventType:e,eventConfig:t,refKey:r,handlers:s,eventRateLimitState:i,stateKey:n,fallbackCurrentTarget:a=null,parseAndRenderFn:l,onMissingHandler:p,nowFn:o=Date.now,setTimeoutFn:c=setTimeout,clearTimeoutFn:u=clearTimeout})=>{let{hasDebounce:d,hasThrottle:h}=Vi({eventType:e,eventConfig:t,refKey:r}),f=vc({eventConfig:t,handlers:s,onMissingHandler:p,parseAndRenderFn:l});return f?bc({eventConfig:t,callback:f,hasDebounce:d,hasThrottle:h,stateKey:n,eventRateLimitState:i,fallbackCurrentTarget:a,nowFn:o,setTimeoutFn:c,clearTimeoutFn:u}):null};var Di=({h:e,template:t,viewData:r,refs:s,handlers:i,createComponentUpdateHook:n})=>{let a=De(t,r,{}),l=at(a),p=wc({h:e,items:l,refs:s,handlers:i,viewData:r,createComponentUpdateHook:n});return e("div",{style:{display:"contents"}},p)},wc=({h:e,items:t,refs:r={},handlers:s={},viewData:i={},createComponentUpdateHook:n})=>{if(!Array.isArray(t))throw new Error("[Parser] Input to createVirtualDom must be an array, got "+typeof t);let a=ot(r),l=a.some(o=>o.targetType==="id");function p(o,c=""){return o.map((u,d)=>{if(typeof u=="string"||typeof u=="number")return String(u);if(typeof u!="object"||u===null)return console.warn("Skipping invalid item in DOM structure:",u),null;let h=Object.entries(u);if(h.length===0)return null;let[f,m]=h[0];if(!isNaN(Number(f)))return Array.isArray(m)?p(m,`${c}.${f}`):typeof m=="object"&&m!==null&&Object.entries(m).length>0?p([m],`${c}.${f}`):String(m);h.length>1&&console.warn("Item has multiple keys, processing only the first:",f);let g,y,w=f.indexOf(" ");w===-1?(g=f,y=""):(g=f.substring(0,w),y=f.substring(w+1).trim());let _=g.split(/[.#]/)[0],A=_.includes("-"),x,k;try{({attrs:x,props:k}=Ti({attrsString:y,viewData:i,tagName:_,isWebComponent:A}))}catch(W){throw new Error(`[Parser] Failed to parse bindings for selector '${g}' with attrs '${y}': ${W.message}`)}let N=g.match(/#([^.#\s]+)/);N&&!Object.prototype.hasOwnProperty.call(x,"id")&&(x.id=N[1]);let $=null;x.id&&($=x.id);let j=(g.match(/\.([^.#]+)/g)||[]).map(W=>W.substring(1)),B=typeof x.class=="string"?x.class.split(/\s+/).filter(Boolean):[],U=[...new Set([...j,...B])],X=Object.create(null),xe=null;if(!A){j.forEach(oe=>{X[oe]=!0});let W=g.match(/#([^.#\s]+)/);W&&(xe=W[1])}let he;typeof m=="string"||typeof m=="number"?he=String(m):Array.isArray(m)?he=p(m,`${c}.${f}`):he=[],xe&&!A&&(x.id=xe);let ae=Object.create(null);if(a.length>0){l&&$&&Pi($);let W=lt({elementIdForRefs:$,classNames:U,refMatchers:a});if(W){let oe=W.refKey,Ir=W.matchedValue||$||oe;if(W.refConfig&&W.refConfig.eventListeners){let En=W.refConfig.eventListeners,kn=pt(s);Object.entries(En).forEach(([dt,$n])=>{let Sn=`${oe}:${Ir}:${dt}`,Or=ct({eventType:dt,eventConfig:$n,refKey:oe,handlers:s,eventRateLimitState:kn,stateKey:Sn,parseAndRenderFn:Be,onMissingHandler:Cn=>{console.warn(`[Parser] Handler '${Cn}' for refKey '${oe}' (matching '${Ir}') is referenced but not found in available handlers.`)}});Or&&(ae[dt]=Or)})}}}let se={};if($)se.key=$;else if(g){let W=c?`${c}.${d}`:String(d);se.key=`${g}-${W}`;let oe=Object.keys(k);oe.length>0&&(se.key+=`-p:${oe.join(",")}`)}if(Object.keys(x).length>0&&(se.attrs=x),Object.keys(X).length>0&&(se.class=X),Object.keys(ae).length>0&&(se.on=ae),Object.keys(k).length>0&&(se.props=k),A&&typeof n=="function"){let W=n({selector:g,tagName:_});W&&(se.hook=W)}try{return e(_,se,he)}catch(W){throw new Error(`[Parser] Error creating virtual node for '${_}': ${W.message}`)}}).filter(Boolean)}return p(t)};var ji=({baseDeps:e,refs:t,dispatchEvent:r,store:s,render:i})=>({...e,refs:t,dispatchEvent:r,store:s,render:i}),_c=({store:e,render:t,parseAndRenderFn:r})=>s=>{let{_event:i,_action:n}=s,a=r(s,{_event:i});if(!e[n])throw new Error(`[Store] Action 'store.${n}' is not defined.`);e[n](a),t()},Bi=({handlers:e,deps:t,parseAndRenderFn:r})=>{let s={handleCallStoreAction:_c({store:t.store,render:t.render,parseAndRenderFn:r})};return Object.keys(e||{}).forEach(i=>{s[i]=n=>e[i](t,n)}),s},xc=e=>{if(e&&typeof e.then=="function")throw new Error("handleBeforeMount must be synchronous and cannot return a Promise.");return e},Wi=({handlers:e,deps:t})=>{if(!e?.handleBeforeMount)return;let r=e.handleBeforeMount(t);return xc(r)},Mi=({handlers:e,deps:t})=>{e?.handleAfterMount&&e.handleAfterMount(t)},zi=({attributeName:e,oldValue:t,newValue:r,deps:s,propsSchemaKeys:i,toCamelCase:n,normalizeAttributeValue:a})=>{let l=n(e),p={};i.forEach(d=>{let h=s.props[d];h!==void 0&&(p[d]=h)});let o={...p},c=a(t),u=a(r);return c===void 0?delete o[l]:o[l]=c,u===void 0?delete p[l]:p[l]=u,{changedProp:l,oldProps:o,newProps:p}};var Ac=({refKey:e,targets:t})=>e==="window"?t.window:e==="document"?t.document:null,Fi=({refs:e={},handlers:t={},targets:r={window:globalThis.window,document:globalThis.document},parseAndRenderFn:s,timing:i={nowFn:Date.now,setTimeoutFn:setTimeout,clearTimeoutFn:clearTimeout},warnFn:n=console.warn})=>{let a=[],l=new Set,p=pt(t);return Object.entries(e).forEach(([o,c])=>{if(o!=="window"&&o!=="document")return;let u=Ac({refKey:o,targets:r});!u||!c?.eventListeners||Object.entries(c.eventListeners).forEach(([d,h])=>{let f=`${o}:${d}`;l.add(f);let m=ct({eventType:d,eventConfig:h,refKey:o,handlers:t,eventRateLimitState:p,stateKey:f,fallbackCurrentTarget:u,parseAndRenderFn:s,nowFn:i.nowFn,setTimeoutFn:i.setTimeoutFn,clearTimeoutFn:i.clearTimeoutFn,onMissingHandler:g=>{n(`[Runtime] Handler '${g}' for global ref '${o}' is referenced but not found in available handlers.`)}});m&&(u.addEventListener(d,m),a.push(()=>{u.removeEventListener(d,m)}))})}),()=>{a.forEach(o=>o()),l.forEach(o=>{let c=p.get(o);c&&c.debounceTimer&&i.clearTimeoutFn(c.debounceTimer),p.delete(o)})}};var Ec=e=>ot(e),kc=e=>{let t=[],r=e?.data?.class;r&&typeof r=="object"&&Object.entries(r).forEach(([i,n])=>{n&&t.push(i)});let s=e?.data?.attrs?.class;return typeof s=="string"&&s.split(/\s+/).filter(Boolean).forEach(i=>t.push(i)),[...new Set(t)]};var Ui=({rootVNode:e,refs:t})=>{let r={},s=Ec(t),i=n=>{if(!n||typeof n!="object")return;let a=n?.data?.attrs?.id,l=kc(n),p=lt({elementIdForRefs:a,classNames:l,refMatchers:s});if(n.elm&&p){let o=a||p.refKey;r[o]=n.elm}Array.isArray(n.children)&&n.children.forEach(i)};return i(e),r};var Ki=({propsSchemaKeys:e=[],toKebabCase:t})=>{let r=new Set(["key"]);return e.forEach(s=>{r.add(s),r.add(t(s))}),[...r]},Hi=({baseDeps:e,refs:t,dispatchEvent:r,store:s,render:i})=>ji({baseDeps:e,refs:t,dispatchEvent:r,store:s,render:i}),Gi=({refIds:e,nextRefIds:t={}})=>(Object.keys(e).forEach(r=>{delete e[r]}),Object.assign(e,t),e),qi=({transformedHandlers:e,clearTimerFn:t=clearTimeout})=>{let r=e?.__eventRateLimitState;if(!(r instanceof Map))return 0;let s=0;return r.forEach(i=>{i&&i.debounceTimer&&(t(i.debounceTimer),s+=1)}),r.clear(),s};var Ji=({instance:e})=>Hi({baseDeps:e.deps,refs:e.refIds,dispatchEvent:e.dispatchEvent.bind(e),store:e.store,render:e.render.bind(e)}),Yi=({instance:e,parseAndRenderFn:t,renderFn:r,createTransformedHandlersFn:s=Bi,runBeforeMountFn:i=Wi,attachGlobalRefListenersFn:n=Fi,runAfterMountFn:a=Mi})=>{let l=Ji({instance:e});return e.transformedHandlers=s({handlers:e.handlers,deps:l,parseAndRenderFn:t}),e._unmountCallback=i({handlers:e.handlers,deps:l}),e._globalListenersCleanup=n({refs:e.refs,handlers:e.transformedHandlers,parseAndRenderFn:t}),r(),a({handlers:e.handlers,deps:l}),l},Xi=({instance:e,clearTimerFn:t=clearTimeout})=>(e._unmountCallback&&e._unmountCallback(),e._globalListenersCleanup&&e._globalListenersCleanup(),qi({transformedHandlers:e.transformedHandlers,clearTimerFn:t})),Zi=({instance:e,attributeName:t,oldValue:r,newValue:s,scheduleFrameFn:i})=>{if(!(r===s||!e.render)){if(e.handlers?.handleOnUpdate){let n=Ji({instance:e}),a=zi({attributeName:t,oldValue:r,newValue:s,deps:n,propsSchemaKeys:e._propsSchemaKeys,toCamelCase:Xe,normalizeAttributeValue:Ye});e.handlers.handleOnUpdate(n,a);return}i(()=>{e.render()})}},Qi=({instance:e,createComponentUpdateHookFn:t,parseViewFn:r=Di,collectRefElementsFn:s=Ui,onError:i=n=>{console.error("Error during render:",n)}})=>{if(!e.patch)return console.error("Patch function is not defined!"),null;if(!e.template)return console.error("Template is not defined!"),null;try{let n=r({h:e._snabbdomH,template:e.template,viewData:e.viewData,refs:e.refs,handlers:e.transformedHandlers,createComponentUpdateHook:t});e._oldVNode?e._oldVNode=e.patch(e._oldVNode,n):e._oldVNode=e.patch(e.renderTarget,n);let a=s({rootVNode:e._oldVNode,refs:e.refs});return Gi({refIds:e.refIds,nextRefIds:a}),e._oldVNode}catch(n){return i(n),e._oldVNode||null}};var $c=`
  a, a:link, a:visited, a:hover, a:active {
    display: contents;
    color: inherit;
    text-decoration: none;
    background: none;
    border: none;
    padding: 0;
    margin: 0;
    font: inherit;
    cursor: pointer;
  }
`,en=({host:e,cssText:t,createStyleSheet:r=()=>new CSSStyleSheet,createElement:s=i=>document.createElement(i)})=>{let i=e.attachShadow({mode:"open"}),n=r();n.replaceSync($c);let a=[n];if(t){let p=r();p.replaceSync(t),a.push(p)}i.adoptedStyleSheets=a;let l=s("div");return l.style.cssText="display: contents;",i.appendChild(l),l.parentNode||e.appendChild(l),e.style.display="contents",{shadow:i,renderTarget:l,adoptedStyleSheets:a}};var ut=(e,t=requestAnimationFrame)=>t(e);var tn=({scheduleFrameFn:e=ut}={})=>({update:(t,r)=>{let s=t.data?.props||{},i=r.data?.props||{};if(!(JSON.stringify(s)!==JSON.stringify(i)))return;let a=r.elm;!a||typeof a.render!="function"||(a.setAttribute("isDirty","true"),e(()=>{if(a.render(),a.removeAttribute("isDirty"),a.handlers&&a.handlers.handleOnUpdate){let l={...a.deps,store:a.store,render:a.render.bind(a),handlers:a.handlers,dispatchEvent:a.dispatchEvent.bind(a),refs:a.refIds||{}};a.handlers.handleOnUpdate(l,{oldProps:s,newProps:i})}}))}});var rn=({elementName:e,propsSchema:t,propsSchemaKeys:r,template:s,refs:i,styles:n,handlers:a,methods:l,constants:p,store:o,patch:c,h:u,deps:d})=>{class h extends HTMLElement{elementName;styles;_snabbdomH;store;props;propsSchema;template;handlers;methods;constants;transformedHandlers={};refs;refIds={};patch;_unmountCallback;_globalListenersCleanup;_oldVNode;deps;_propsSchemaKeys=[];cssText;static get observedAttributes(){return["key"]}get viewData(){let g={};return this.store.selectViewData&&(g=this.store.selectViewData()),g}connectedCallback(){let g=en({host:this,cssText:this.cssText});this.shadow=g.shadow,this.renderTarget=g.renderTarget,Yi({instance:this,parseAndRenderFn:Be,renderFn:this.render})}disconnectedCallback(){Xi({instance:this,clearTimerFn:clearTimeout})}attributeChangedCallback(g,y,w){Zi({instance:this,attributeName:g,oldValue:y,newValue:w,scheduleFrameFn:ut})}render=()=>{Qi({instance:this,createComponentUpdateHookFn:tn})}}class f extends h{static get observedAttributes(){return Ki({propsSchemaKeys:r,toKebabCase:cr})}constructor(){super(),this.constants=Si({setupConstants:d?.constants,fileConstants:p}),this.propsSchema=t,this.props=t?Ys(this,r):{},this._propsSchemaKeys=r,this.elementName=e,this.styles=n,this.store=ki(o,this.props,this.constants),this.template=s,this.handlers=a,this.methods=l,this.refs=i,this.patch=c,this.deps={...d,store:this.store,render:this.render,handlers:a,props:this.props,constants:this.constants},ui(this,this.methods),this._snabbdomH=u,this.cssText=Ci(e,n)}}return f};function we(e,t,r,s,i){let n=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:s,elm:i,key:n}}var $e=Array.isArray;function Se(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function Sc(e,t){return document.createElement(e,t)}function Cc(e,t,r){return document.createElementNS(e,t,r)}function Ic(){return _e(document.createDocumentFragment())}function Oc(e){return document.createTextNode(e)}function Tc(e){return document.createComment(e)}function Lc(e,t,r){if(le(e)){let s=e;for(;s&&le(s);)s=_e(s).parent;e=s??e}le(t)&&(t=_e(t,e)),r&&le(r)&&(r=_e(r).firstChildNode),e.insertBefore(t,r)}function Rc(e,t){e.removeChild(t)}function Nc(e,t){le(t)&&(t=_e(t,e)),e.appendChild(t)}function nn(e){if(le(e)){for(;e&&le(e);)e=_e(e).parent;return e??null}return e.parentNode}function Pc(e){var t;if(le(e)){let r=_e(e),s=nn(r);if(s&&r.lastChildNode){let i=Array.from(s.childNodes),n=i.indexOf(r.lastChildNode);return(t=i[n+1])!==null&&t!==void 0?t:null}return null}return e.nextSibling}function Vc(e){return e.tagName}function Dc(e,t){e.textContent=t}function jc(e){return e.textContent}function Bc(e){return e.nodeType===1}function Wc(e){return e.nodeType===3}function Mc(e){return e.nodeType===8}function le(e){return e.nodeType===11}function _e(e,t){var r,s,i;let n=e;return(r=n.parent)!==null&&r!==void 0||(n.parent=t??null),(s=n.firstChildNode)!==null&&s!==void 0||(n.firstChildNode=e.firstChild),(i=n.lastChildNode)!==null&&i!==void 0||(n.lastChildNode=e.lastChild),n}var an={createElement:Sc,createElementNS:Cc,createTextNode:Oc,createDocumentFragment:Ic,createComment:Tc,insertBefore:Lc,removeChild:Rc,appendChild:Nc,parentNode:nn,nextSibling:Pc,tagName:Vc,setTextContent:Dc,getTextContent:jc,isElement:Bc,isText:Wc,isComment:Mc,isDocumentFragment:le};var Er=we("",{},[],void 0,void 0);function Ke(e,t){var r,s;let i=e.key===t.key,n=((r=e.data)===null||r===void 0?void 0:r.is)===((s=t.data)===null||s===void 0?void 0:s.is),a=e.sel===t.sel,l=!e.sel&&e.sel===t.sel?typeof e.text==typeof t.text:!0;return a&&i&&n&&l}function zc(){throw new Error("The document fragment is not supported on this platform.")}function Fc(e,t){return e.isElement(t)}function Uc(e,t){return e.isDocumentFragment(t)}function Kc(e,t,r){var s;let i={};for(let n=t;n<=r;++n){let a=(s=e[n])===null||s===void 0?void 0:s.key;a!==void 0&&(i[a]=n)}return i}var Hc=["create","update","remove","destroy","pre","post"];function on(e,t,r){let s={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},i=t!==void 0?t:an;for(let f of Hc)for(let m of e){let g=m[f];g!==void 0&&s[f].push(g)}function n(f){let m=f.id?"#"+f.id:"",g=f.getAttribute("class"),y=g?"."+g.split(" ").join("."):"";return we(i.tagName(f).toLowerCase()+m+y,{},[],void 0,f)}function a(f){return we(void 0,{},[],void 0,f)}function l(f,m){return function(){if(--m===0){let y=i.parentNode(f);y!==null&&i.removeChild(y,f)}}}function p(f,m){var g,y,w,_,A;let x,k=f.data,N=k?.hook;(g=N?.init)===null||g===void 0||g.call(N,f);let $=f.children,O=f.sel;if(O==="!")(y=f.text)!==null&&y!==void 0||(f.text=""),f.elm=i.createComment(f.text);else if(O==="")f.elm=i.createTextNode(f.text);else if(O!==void 0){let j=O.indexOf("#"),B=O.indexOf(".",j),U=j>0?j:O.length,X=B>0?B:O.length,xe=j!==-1||B!==-1?O.slice(0,Math.min(U,X)):O,he=k?.ns,ae=he===void 0?i.createElement(xe,k):i.createElementNS(he,xe,k);for(f.elm=ae,U<X&&ae.setAttribute("id",O.slice(U+1,X)),B>0&&ae.setAttribute("class",O.slice(X+1).replace(/\./g," ")),x=0;x<s.create.length;++x)s.create[x](Er,f);if(Se(f.text)&&(!$e($)||$.length===0)&&i.appendChild(ae,i.createTextNode(f.text)),$e($))for(x=0;x<$.length;++x){let se=$[x];se!=null&&i.appendChild(ae,p(se,m))}N!==void 0&&((w=N.create)===null||w===void 0||w.call(N,Er,f),N.insert!==void 0&&m.push(f))}else if(!((_=r?.experimental)===null||_===void 0)&&_.fragments&&f.children){for(f.elm=((A=i.createDocumentFragment)!==null&&A!==void 0?A:zc)(),x=0;x<s.create.length;++x)s.create[x](Er,f);for(x=0;x<f.children.length;++x){let j=f.children[x];j!=null&&i.appendChild(f.elm,p(j,m))}}else f.elm=i.createTextNode(f.text);return f.elm}function o(f,m,g,y,w,_){for(;y<=w;++y){let A=g[y];A!=null&&i.insertBefore(f,p(A,_),m)}}function c(f){var m,g;let y=f.data;if(y!==void 0){(g=(m=y?.hook)===null||m===void 0?void 0:m.destroy)===null||g===void 0||g.call(m,f);for(let w=0;w<s.destroy.length;++w)s.destroy[w](f);if(f.children!==void 0)for(let w=0;w<f.children.length;++w){let _=f.children[w];_!=null&&typeof _!="string"&&c(_)}}}function u(f,m,g,y){for(var w,_;g<=y;++g){let A,x=m[g];if(x!=null)if(x.sel!==void 0){c(x),A=s.remove.length+1;let k=l(x.elm,A);for(let $=0;$<s.remove.length;++$)s.remove[$](x,k);let N=(_=(w=x?.data)===null||w===void 0?void 0:w.hook)===null||_===void 0?void 0:_.remove;N!==void 0?N(x,k):k()}else x.children?(c(x),u(f,x.children,0,x.children.length-1)):i.removeChild(f,x.elm)}}function d(f,m,g,y){let w=0,_=0,A=m.length-1,x=m[0],k=m[A],N=g.length-1,$=g[0],O=g[N],j,B,U,X;for(;w<=A&&_<=N;)x==null?x=m[++w]:k==null?k=m[--A]:$==null?$=g[++_]:O==null?O=g[--N]:Ke(x,$)?(h(x,$,y),x=m[++w],$=g[++_]):Ke(k,O)?(h(k,O,y),k=m[--A],O=g[--N]):Ke(x,O)?(h(x,O,y),i.insertBefore(f,x.elm,i.nextSibling(k.elm)),x=m[++w],O=g[--N]):Ke(k,$)?(h(k,$,y),i.insertBefore(f,k.elm,x.elm),k=m[--A],$=g[++_]):(j===void 0&&(j=Kc(m,w,A)),B=j[$.key],B===void 0?(i.insertBefore(f,p($,y),x.elm),$=g[++_]):j[O.key]===void 0?(i.insertBefore(f,p(O,y),i.nextSibling(k.elm)),O=g[--N]):(U=m[B],U.sel!==$.sel?i.insertBefore(f,p($,y),x.elm):(h(U,$,y),m[B]=void 0,i.insertBefore(f,U.elm,x.elm)),$=g[++_]));_<=N&&(X=g[N+1]==null?null:g[N+1].elm,o(f,X,g,_,N,y)),w<=A&&u(f,m,w,A)}function h(f,m,g){var y,w,_,A,x,k,N,$;let O=(y=m.data)===null||y===void 0?void 0:y.hook;(w=O?.prepatch)===null||w===void 0||w.call(O,f,m);let j=m.elm=f.elm;if(f===m)return;if(m.data!==void 0||m.text!==void 0&&m.text!==f.text){(_=m.data)!==null&&_!==void 0||(m.data={}),(A=f.data)!==null&&A!==void 0||(f.data={});for(let X=0;X<s.update.length;++X)s.update[X](f,m);(N=(k=(x=m.data)===null||x===void 0?void 0:x.hook)===null||k===void 0?void 0:k.update)===null||N===void 0||N.call(k,f,m)}let B=f.children,U=m.children;m.text===void 0?B!==void 0&&U!==void 0?B!==U&&d(j,B,U,g):U!==void 0?(f.text!==void 0&&i.setTextContent(j,""),o(j,null,U,0,U.length-1,g)):B!==void 0?u(j,B,0,B.length-1):f.text!==void 0&&i.setTextContent(j,""):f.text!==m.text&&(B!==void 0&&u(j,B,0,B.length-1),i.setTextContent(j,m.text)),($=O?.postpatch)===null||$===void 0||$.call(O,f,m)}return function(m,g){let y,w,_,A=[];for(y=0;y<s.pre.length;++y)s.pre[y]();for(Fc(i,m)?m=n(m):Uc(i,m)&&(m=a(m)),Ke(m,g)?h(m,g,A):(w=m.elm,_=i.parentNode(w),p(g,A),_!==null&&(i.insertBefore(_,g.elm,i.nextSibling(w)),u(_,[m],0,0))),y=0;y<A.length;++y)A[y].data.hook.insert(A[y]);for(y=0;y<s.post.length;++y)s.post[y]();return g}}function ln(e,t){let r,s,i=t.elm,n=e.data.class,a=t.data.class;if(!(!n&&!a)&&n!==a){n=n||{},a=a||{};for(s in n)n[s]&&!Object.prototype.hasOwnProperty.call(a,s)&&i.classList.remove(s);for(s in a)r=a[s],r!==n[s]&&i.classList[r?"add":"remove"](s)}}var pn={create:ln,update:ln};function cn(e,t){let r,s,i,n=t.elm,a=e.data.props,l=t.data.props;if(!(!a&&!l)&&a!==l){a=a||{},l=l||{};for(r in l)s=l[r],i=a[r],i!==s&&(r!=="value"||n[r]!==s)&&(n[r]=s)}}var un={create:cn,update:cn};var Gc="http://www.w3.org/1999/xlink",qc="http://www.w3.org/2000/xmlns/",Jc="http://www.w3.org/XML/1998/namespace";function dn(e,t){let r,s=t.elm,i=e.data.attrs,n=t.data.attrs;if(!(!i&&!n)&&i!==n){i=i||{},n=n||{};for(r in n){let a=n[r];i[r]!==a&&(a===!0?s.setAttribute(r,""):a===!1?s.removeAttribute(r):r.charCodeAt(0)!==120?s.setAttribute(r,a):r.charCodeAt(3)===58?s.setAttributeNS(Jc,r,a):r.charCodeAt(5)===58?r.charCodeAt(1)===109?s.setAttributeNS(qc,r,a):s.setAttributeNS(Gc,r,a):s.setAttribute(r,a))}for(r in i)r in n||s.removeAttribute(r)}}var fn={create:dn,update:dn};var hn=typeof window?.requestAnimationFrame=="function"?window.requestAnimationFrame.bind(window):setTimeout,Yc=e=>{hn(()=>{hn(e)})},kr=!1;function Xc(e,t,r){Yc(()=>{e[t]=r})}function mn(e,t){let r,s,i=t.elm,n=e.data.style,a=t.data.style;if(!n&&!a||n===a)return;n=n||{},a=a||{};let l="delayed"in n;for(s in n)s in a||(s[0]==="-"&&s[1]==="-"?i.style.removeProperty(s):i.style[s]="");for(s in a)if(r=a[s],s==="delayed"&&a.delayed)for(let p in a.delayed)r=a.delayed[p],(!l||r!==n.delayed[p])&&Xc(i.style,p,r);else s!=="remove"&&r!==n[s]&&(s[0]==="-"&&s[1]==="-"?i.style.setProperty(s,r):i.style[s]=r)}function Zc(e){let t,r,s=e.elm,i=e.data.style;if(!(!i||!(t=i.destroy)))for(r in t)s.style[r]=t[r]}function Qc(e,t){let r=e.data.style;if(!r||!r.remove){t();return}kr||(e.elm.offsetLeft,kr=!0);let s,i=e.elm,n=0,a=r.remove,l=0,p=[];for(s in a)p.push(s),i.style[s]=a[s];let c=getComputedStyle(i)["transition-property"].split(", ");for(;n<c.length;++n)p.indexOf(c[n])!==-1&&l++;i.addEventListener("transitionend",u=>{u.target===i&&--l,l===0&&t()})}function eu(){kr=!1}var yn={pre:eu,create:mn,update:mn,destroy:Zc,remove:Qc};function gn(e,t,r){if(typeof e=="function")e.call(t,r,t);else if(typeof e=="object")for(let s=0;s<e.length;s++)gn(e[s],t,r)}function tu(e,t){let r=e.type,s=t.data.on;s&&s[r]&&gn(s[r],t,e)}function ru(){return function e(t){tu(t,e.vnode)}}function $r(e,t){let r=e.data.on,s=e.listener,i=e.elm,n=t&&t.data.on,a=t&&t.elm,l;if(r!==n){if(r&&s)if(n)for(l in r)n[l]||i.removeEventListener(l,s,!1);else for(l in r)i.removeEventListener(l,s,!1);if(n){let p=t.listener=e.listener||ru();if(p.vnode=t,r)for(l in n)r[l]||a.addEventListener(l,p,!1);else for(l in n)a.addEventListener(l,p,!1)}}}var vn={create:$r,update:$r,destroy:$r};var su=()=>on([pn,un,fn,yn,vn]),bn=su;function wn(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let s=0;s<t.length;++s){let i=t[s];if(typeof i=="string")continue;let n=i.data;n!==void 0&&wn(n,i.children,i.sel)}}function _n(e,t,r){let s={},i,n,a;if(r!==void 0?(t!==null&&(s=t),$e(r)?i=r:Se(r)?n=r.toString():r&&r.sel&&(i=[r])):t!=null&&($e(t)?i=t:Se(t)?n=t.toString():t&&t.sel?i=[t]:s=t),i!==void 0)for(a=0;a<i.length;++a)Se(i[a])&&(i[a]=we(void 0,void 0,void 0,i[a],void 0));return e.startsWith("svg")&&(e.length===3||e[3]==="."||e[3]==="#")&&wn(s,i,e),we(e,s,i,n,void 0)}var iu=bn(),nu=({handlers:e,methods:t,constants:r,schema:s,view:i,store:n},a)=>{if(!i)throw new Error("view is not defined");if(!s||typeof s!="object"||Array.isArray(s))throw new Error("schema is required. Define component metadata in .schema.yaml.");let l=s,{template:p,refs:o,styles:c}=i;Xs({schema:l,methodExports:Object.keys(t||{})});let u=l.componentName,d=l.propsSchema,h=d?.properties?[...new Set(Object.keys(d.properties).map(f=>Xe(f)))]:[];return rn({elementName:u,propsSchema:d,propsSchemaKeys:h,template:p,refs:o,styles:c,handlers:e,methods:t,constants:r,store:n,patch:iu,h:_n,deps:a})},Sr=nu;var au=e=>{let t={};return{once:(r,s)=>{t[r]||(t[r]=[]);let i=(...n)=>{s(...n),t[r]=t[r].filter(a=>a!==i)};t[r].push(i)},emit:(r,...s)=>{t[r]&&t[r].forEach(i=>{i(...s)})},showAlert:async r=>{if(!e)throw new Error("globalUIElement is not set. Make sure to initialize the global UI component and pass it to createGlobalUIManager.");e.transformedHandlers.showAlert(r)},showConfirm:async r=>{if(!e)throw new Error("globalUIElement is not set. Make sure to initialize the global UI component and pass it to createGlobalUIManager.");return e.transformedHandlers.showConfirm(r)},showDropdownMenu:async r=>{if(!e)throw new Error("globalUIElement is not set. Make sure to initialize the global UI component and pass it to createGlobalUIManager.");return e.transformedHandlers.showDropdownMenu(r)},closeAll:async()=>{if(!e)throw new Error("globalUIElement is not set. Make sure to initialize the global UI component and pass it to createGlobalUIManager.");return e.transformedHandlers.closeAll()}}},xn=au;var ou=xn(),lu={globalUI:ou},An={components:lu};var Cr={components:{accordionItem:{handlers:It,schema:Qr,store:Ot,view:es},breadcrumb:{handlers:Tt,schema:ts,store:Lt,view:rs},dropdownMenu:{handlers:Rt,schema:ss,store:Nt,view:is},form:{handlers:Pt,schema:as,store:Mt,view:xs},globalUi:{handlers:zt,schema:As,store:Ft,view:Es},navbar:{handlers:Ut,schema:ks,store:Kt,view:$s},pageOutline:{handlers:Ht,schema:Cs,store:Gt,view:Is},popoverInput:{handlers:qt,schema:Os,store:Jt,view:Ts},select:{handlers:Yt,schema:Ls,store:Xt,view:Rs},sidebar:{handlers:Zt,schema:Ns,store:er,view:Vs},sliderInput:{handlers:tr,schema:Ds,store:rr,view:js},table:{handlers:sr,schema:Bs,store:ir,view:Ws},tabs:{handlers:nr,schema:Ms,store:ar,view:zs},tooltip:{handlers:Fs,schema:Us,store:or,view:Ks},waveform:{handlers:lr,schema:Gs,store:pr,view:qs}}};Object.keys(Cr).forEach(e=>{Object.keys(Cr[e]).forEach(t=>{let r=Cr[e][t],s=Sr({...r},An[e]),i=r.schema?.componentName;if(!i)throw new Error(`[Build] Missing schema.componentName for ${e}/${t}. Define it in .schema.yaml.`);customElements.define(i,s)})});customElements.define("rtgl-button",Nr({}));customElements.define("rtgl-view",jr({}));customElements.define("rtgl-text",Wr({}));customElements.define("rtgl-image",Fr({}));customElements.define("rtgl-svg",Kr({}));customElements.define("rtgl-input",Hr({}));customElements.define("rtgl-input-number",Gr({}));customElements.define("rtgl-textarea",qr({}));customElements.define("rtgl-color-picker",Jr({}));customElements.define("rtgl-slider",Yr({}));customElements.define("rtgl-dialog",Xr({}));customElements.define("rtgl-popover",Zr({}));})();
