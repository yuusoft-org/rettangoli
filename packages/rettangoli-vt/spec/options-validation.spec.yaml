file: "../src/cli/generate-options.js"
group: generate-options
---
suite: resolveGenerateOptions
exportName: resolveGenerateOptions
---
case: resolves minimal user options with internal defaults
in:
  - {}
  - path: ./vt-custom
    skipScreenshots: false
    port: 4100
    url: https://example.com/root
out:
  vtPath: ./vt-custom
  skipScreenshots: false
  port: 4100
  headless: true
  configUrl: https://example.com/root
  screenshotWaitTime: 0
  waitStrategy: load
  isolationMode: fast
  navigationTimeout: 30000
  readyTimeout: 30000
  screenshotTimeout: 30000
  maxRetries: 1
  recycleEvery: 25
  metricsPath: .rettangoli/vt/metrics.json
---
case: applies cli overrides for minimal public surface
in:
  - vtPath: ./vt-cli
    skipScreenshots: true
    port: 3300
    headless: false
    url: http://localhost:9000/render
  - path: ./vt-config
    skipScreenshots: false
    port: 4400
    url: https://example.com/config
out:
  vtPath: ./vt-cli
  skipScreenshots: true
  port: 3300
  headless: false
  configUrl: http://localhost:9000/render
  screenshotWaitTime: 0
  waitStrategy: load
  isolationMode: fast
  navigationTimeout: 30000
  readyTimeout: 30000
  screenshotTimeout: 30000
  maxRetries: 1
  recycleEvery: 25
  metricsPath: .rettangoli/vt/metrics.json
---
case: rejects invalid url
in:
  - url: ""
  - {}
throws: Invalid url
