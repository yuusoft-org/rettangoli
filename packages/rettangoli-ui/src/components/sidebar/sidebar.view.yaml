elementName: rtgl-sidebar

viewDataSchema:
  type: object
  properties:
    containerAttrString:
      type: string
    header:
      type: object
      properties:
        label:
          type: string
        href:
          type: string
        image:
          type: object
          properties:
            src:
              type: string
            width:
              type: number
            height:
              type: number
            alt:
              type: string
    items:
      type: array
      items:
        type: object
        properties:
          title:
            type: string
          slug:
            type: string
          type:
            type: string
          active:
            type: boolean
          icon:
            type: string

propsSchema:
  type: object
  properties:
    header:
      type: object
      properties:
        label:
          type: string
        href:
          type: string
        image:
          type: object
          properties:
            src:
              type: string
            width:
              type: number
            height:
              type: number
            alt:
              type: string
    items:
      type: array
      items:
        type: object
        properties:
          title:
            type: string
          slug:
            type: string
          type:
            type: string
          items:
            type: array

refs:
  header-image:
    eventListeners:
      click:
        handler: handleHeaderClick
  header-label:
    eventListeners:
      click:
        handler: handleHeaderClick
  header:
    eventListeners:
      click:
        handler: handleHeaderClick
  item-*:
    eventListeners:
      click:
        handler: handleItemClick

events:
  headerClick:
    type: object
    properties:
      path:
        type: string

anchors:
  - &headerContent
    - $if header.image && header.image.src:
      - $if header.image.href:
          - a href=${header.image.href}:
            - rtgl-image w=${header.image.width} h=${header.image.height} src=${header.image.src} alt="${header.image.alt}":
        $elif header.image.path:
          - rtgl-view#header-image cur=p:
            - rtgl-image w=${header.image.width} h=${header.image.height} src=${header.image.src} alt="${header.image.alt}":
        $else:
          - rtgl-image w=${header.image.width} h=${header.image.height} src=${header.image.src} alt="${header.image.alt}":
    - $if header.label:
      - $if header.labelHref:
          - rtgl-text href=${header.labelHref} s=lg: "${header.label}"
        $elif header.labelPath:
          - rtgl-view#header-label cur=p:
            - rtgl-text s=lg: "${header.label}"
        $else:
          - rtgl-text s=lg: "${header.label}"

template:
  - rtgl-view h=f w=272 bwr=xs ${containerAttrString}:
    - rtgl-view p=lg:
      - $if header.href:
          - rtgl-view href=${header.href} d=h av=c g=lg:
            - *headerContent
        $else:
            - rtgl-view#header d=h av=c g=lg cur=p:
              - *headerContent

    - rtgl-view w=f ph=lg pb=lg g=xs:
      - $for item, i in items:
        - $if item.type == "groupLabel":
            - rtgl-view mt=md h=32 av=c ph=md:
              - rtgl-text s=xs c=mu-fg: "${item.title}"
          $else:
            - rtgl-view#item-${item.id} ${item.hrefAttr} h=32 av=c ph=md w=f h-bgc=mu br=lg bgc=bg cur=p:
              - $if item.icon:
                  - rtgl-view d=h ah=c g=sm:
                    - rtgl-svg wh=16 svg=${item.icon} c=fg:
                    - rtgl-text s=sm: "${item.title}"
                $else:
                  - rtgl-text s=sm: "${item.title}"
