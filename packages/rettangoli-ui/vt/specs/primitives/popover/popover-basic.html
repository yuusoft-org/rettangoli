---
title: Popover - Basic - Open and Close
description: Verifies manual popover open flow and close handling through content action and close event.
specs:
  - Trigger button opens popover at click coordinates.
  - Content area renders title, body text, and close action.
  - Close handling clears open and position attributes.
steps:
  - action: select
    testId: open-popover
    steps:
      - action: click
  - action: waitFor
    selector: '#popover[open]'
    state: visible
    timeoutMs: 1200
  - action: assert
    type: text
    selector: '#popover'
    value: Popover Content
  - action: screenshot
---
<rtgl-view g="lg" p="lg" wh="f" wrap>
  <rtgl-button id="button" data-testid="open-popover">Open Popover</rtgl-button>
  <rtgl-popover id="popover">
    <rtgl-view slot="content" g="md">
      <rtgl-text s="lg">Popover Content</rtgl-text>
      <rtgl-text c="mu">This is a basic popover example.</rtgl-text>
      <rtgl-button id="close-button" variant="secondary">Close</rtgl-button>
    </rtgl-view>
  </rtgl-popover>
</rtgl-view>

<script>
  const button = document.getElementById('button');
  const popover = document.getElementById('popover');
  const closeButton = document.getElementById('close-button');
  
  button.addEventListener('click', (e) => {
    popover.setAttribute('open', '');
    popover.setAttribute('x', e.clientX);
    popover.setAttribute('y', e.clientY);
  });
  
  closeButton.addEventListener('click', () => {
    popover.removeAttribute('open');
    popover.removeAttribute('x');
    popover.removeAttribute('y');
  });
  
  // Listen for popover close events (click outside or ESC key)
  popover.addEventListener('close', () => {
    popover.removeAttribute('open');
    popover.removeAttribute('x');
    popover.removeAttribute('y');
  });
</script>
