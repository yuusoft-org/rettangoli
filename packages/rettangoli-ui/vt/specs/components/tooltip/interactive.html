---
title: Tooltip • Interaction • Hover Trigger
description: Verifies hover-based tooltip behavior using mouseenter and mouseleave interactions.
specs:
  - Hover opens tooltip near trigger anchor coordinates.
  - Leaving trigger closes tooltip.
  - Hover interaction remains deterministic for VT capture.
steps:
  - wait 150
  - select tooltip-hover-target:
    - hover
  - 'waitFor #tooltip[open] attached 1200'
  - 'assert exists #tooltip[open]'
  - screenshot
---
<rtgl-view h="100vh" w="100vw" ah="c" av="c">
  <rtgl-button id="button" data-testid="tooltip-hover-target">Hover for Tooltip</rtgl-button>

  <rtgl-tooltip id="tooltip" content="This is a tooltip!" place="t"></rtgl-tooltip>
</rtgl-view>

<script>
  setTimeout(() => {
    const button = document.getElementById('button');
    const tooltip = document.getElementById('tooltip');
    
    if (!button) {
      console.error('Button element not found');
      return;
    }
    
    console.log('Button element:', button);
    console.log('Initial button rect:', button.getBoundingClientRect());

    button.addEventListener('mouseenter', (e) => {
      console.log('mouseenter event fired');
      // Use the button's public getBoundingClientRect method
      const rect = button.getBoundingClientRect();
      console.log('button rect:', rect);
      tooltip.setAttribute('open', '');
      tooltip.setAttribute('x', rect.left + rect.width / 2);
      tooltip.setAttribute('y', rect.top - 2);  // Small offset to prevent overlap
      console.log('tooltip opened at:', rect.left + rect.width / 2, rect.top - 2);
    });

    button.addEventListener('mouseleave', (e) => {
      console.log('mouseleave event fired');
      tooltip.removeAttribute('open');
      console.log('tooltip closed');
    });
  }, 100);
</script>
