---
title: "Global UI - Promise-based API"
---
<rtgl-view g="lg" h="100vh" w="f" fw="w">
  <rtgl-view d="h" g="lg">
    <rtgl-button id="sequential-btn">Sequential Dialogs</rtgl-button>
    <rtgl-button id="conditional-btn">Conditional Flow</rtgl-button>
  </rtgl-view>
  
  <rtgl-view mt="lg" p="lg" bgc="mu" br="md">
    <rtgl-text id="log">Log output:</rtgl-text>
  </rtgl-view>
</rtgl-view>

<script>
  // Create a local globalUI helper
  const createGlobalUI = () => {
    let element = document.querySelector('rtgl-global-ui');
    if (!element) {
      element = document.createElement('rtgl-global-ui');
      document.body.appendChild(element);
    }
    return {
      showAlert: (options) => element.transformedHandlers.showAlert(options),
      showConfirm: (options) => element.transformedHandlers.showConfirm(options)
    };
  };
  
  const globalUI = createGlobalUI();

  const log = document.getElementById('log');
  const addLog = (message) => {
    log.textContent += '\n' + message;
  };

  document.getElementById('sequential-btn').addEventListener('click', async () => {
    log.textContent = 'Log output:';
    
    await globalUI.showAlert({
      status: 'info',
      message: 'This is the first dialog'
    });
    addLog('First dialog closed');
    
    const confirmed = await globalUI.showConfirm({
      message: 'Do you want to see another dialog?'
    });
    addLog(`User choice: ${confirmed}`);
    
    if (confirmed) {
      await globalUI.showAlert({
        status: 'success',
        message: 'Great! Here is the final dialog'
      });
      addLog('Final dialog shown');
    } else {
      addLog('Skipped final dialog');
    }
  });

  document.getElementById('conditional-btn').addEventListener('click', async () => {
    log.textContent = 'Log output:';
    
    const deleteConfirmed = await globalUI.showConfirm({
      status: 'warning',
      title: 'Delete Item',
      message: 'Are you sure you want to delete this item? This action cannot be undone.',
      confirmText: 'Delete',
      cancelText: 'Keep'
    });
    
    if (deleteConfirmed) {
      addLog('Deleting item...');
      // Simulate deletion
      await new Promise(resolve => setTimeout(resolve, 500));
      
      await globalUI.showAlert({
        status: 'success',
        message: 'Item deleted successfully!'
      });
      addLog('Item deleted');
    } else {
      addLog('Deletion cancelled');
    }
  });
</script>