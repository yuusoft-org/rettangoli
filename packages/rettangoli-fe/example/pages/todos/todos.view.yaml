elementName: custom-todos

viewDataSchema:
  type: object
  properties:
    title: { type: string }
    placeholderText: { type: string }
    todos: { type: array }
    filteredTodos: { type: array }
    activeCount: { type: number }
    completedCount: { type: number }
    allCompleted: { type: boolean }
    filter: { type: string }

refs:
  todo-input:
    eventListeners:
      keydown:
        handler: handleNewTodoKeyDown
  toggle-all:
    eventListeners:
      click:
        handler: handleToggleAllClick
  clear-completed:
    eventListeners:
      click:
        handler: handleClearCompletedClick
  todo-*:
    eventListeners:
      click:
        handler: handleTodoClick
  delete-*:
    eventListeners:
      click:
        handler: handleDeleteClick
  filter-*:
    eventListeners:
      click:
        handler: handleFilterClick

styles: {}

template:
  - rtgl-view#root h=100vh w=100vw d=v ah=c av=c bgc=#f5f5f5:
      - rtgl-view#app w=550 ah=c bgc=white:
        - rtgl-view#header ph=lg pv=xl bwb=1 bgc=white:
          - rtgl-text s=h1 ta=c c=rgba(175,47,47,0.15) mb=0: "${title}"
          - rtgl-view d=h ai=c:
            - rtgl-button#toggle-all mr=sm:
            - input#todo-input ph=xl fs=24px fw=200 w=100% border=none outline=none placeholder="${placeholderText}":

        - rtgl-view#main ah=c:
          - rtgl-view#todo-list:
              - $map: { $eval: filteredTodos }
                each(todo):
                  - rtgl-view d=r ai=c pv=md ph=lg bwb=1:
                    - rtgl-button#todo-${todo.id}:
                    - $if: todo.completed
                      then:
                        - rtgl-text c=#d9d9d9 ml=md: "${todo.title}"
                      else:
                        - rtgl-text ml=md: "${todo.title}"
                    - rtgl-button#delete-${todo.id}: "Ã—"

        - rtgl-view#footer d=h jc=space-between p=md c=#777 fs=14px:
          - rtgl-text: "${activeCount} ${itemText} left"
          - $if: isAllFilter
            then:
              - rtgl-button#filter-all v=pr: "All"
            else:
              - rtgl-button#filter-all v=lk: "All"
          - $if: isActiveFilter
            then:
              - rtgl-button#filter-active v=pr: "Active"
            else:
              - rtgl-button#filter-active v=lk: "Active"
          - $if: isCompletedFilter
            then:
              - rtgl-button#filter-completed v=pr: "Completed"
            else:
              - rtgl-button#filter-completed v=lk: "Completed"
          - $if: showClearCompleted
            then:
              - rtgl-button#clear-completed v=lk: "Clear completed (${completedCount})"