refs:
  addInput:
    eventListeners:
      keydown:
        handler: handleAddKeydown
  addBtn:
    eventListeners:
      click:
        handler: handleAddCard
  move*:
    eventListeners:
      click:
        handler: handleMoveCard
  del*:
    eventListeners:
      click:
        handler: handleDeleteCard

template:
  - 'div#root style="display:flex;flex-direction:column;gap:8px;padding:16px;font-family:monospace;width:480px"':
    - 'div style="display:flex;gap:4px"':
      - 'input#addInput data-testid=kanban-input style="flex:1;height:28px" placeholder="New card"':
      - 'button#addBtn data-testid=kanban-add style="height:28px"': "Add"
    - 'div style="display:flex;gap:6px"':
      - 'div style="flex:1;background:#f5f5f5;padding:8px;border-radius:4px;min-height:140px"':
        - 'div style="font-size:11px;font-weight:bold;margin-bottom:6px"': "Todo (${todoCount})"
        - $for card, ci in todoCards:
          - 'div style="display:flex;gap:2px;margin-bottom:3px"':
            - 'div style="flex:1;height:24px;background:${card.color};border-radius:2px;padding:0 4px;display:flex;align-items:center;font-size:9px;color:white"': "${card.label}"
            - 'button#move${card.id} data-testid=move-${card.id} data-card-id=${card.id} style="width:18px;height:24px;font-size:9px;cursor:pointer"': ">"
            - 'button#del${card.id} data-testid=del-${card.id} data-card-id=${card.id} style="width:18px;height:24px;font-size:9px;cursor:pointer"': "x"
      - 'div style="flex:1;background:#fff8e1;padding:8px;border-radius:4px;min-height:140px"':
        - 'div style="font-size:11px;font-weight:bold;margin-bottom:6px"': "Doing (${doingCount})"
        - $for card, ci in doingCards:
          - 'div style="display:flex;gap:2px;margin-bottom:3px"':
            - 'div style="flex:1;height:24px;background:${card.color};border-radius:2px;padding:0 4px;display:flex;align-items:center;font-size:9px;color:white"': "${card.label}"
            - 'button#move${card.id} data-testid=move-${card.id} data-card-id=${card.id} style="width:18px;height:24px;font-size:9px;cursor:pointer"': ">"
            - 'button#del${card.id} data-testid=del-${card.id} data-card-id=${card.id} style="width:18px;height:24px;font-size:9px;cursor:pointer"': "x"
      - 'div style="flex:1;background:#e8f5e9;padding:8px;border-radius:4px;min-height:140px"':
        - 'div style="font-size:11px;font-weight:bold;margin-bottom:6px"': "Done (${doneCount})"
        - $for card, ci in doneCards:
          - 'div style="display:flex;gap:2px;margin-bottom:3px"':
            - 'div style="flex:1;height:24px;background:${card.color};border-radius:2px;padding:0 4px;display:flex;align-items:center;font-size:9px;color:white"': "${card.label}"
            - 'button#del${card.id} data-testid=del-${card.id} data-card-id=${card.id} style="width:18px;height:24px;font-size:9px;cursor:pointer"': "x"
